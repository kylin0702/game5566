window.__require=function e(t,i,s){function a(n,h){if(!i[n]){if(!t[n]){var c=n.split("/");if(c=c[c.length-1],!t[c]){var r="function"==typeof __require&&__require;if(!h&&r)return r(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+n+"'")}}var d=i[n]={exports:{}};t[n][0].call(d.exports,function(e){return a(t[n][1][e]||e)},d,d.exports,e,t,i,s)}return i[n].exports}for(var o="function"==typeof __require&&__require,n=0;n<s.length;n++)a(s[n]);return a}({AmusementScore:[function(e,t,i){"use strict";cc._RF.push(t,"e2c2cejXXdNy4KPBylvGFZ9","AmusementScore");var s=e("GameDataCenter").getInstance(),a=[1e3,1e3,1e3,1e3],o=[4e3,6e3,3e3,3e3];cc.Class({extends:cc.Component,properties:{modeTitleSprite:{default:[],type:cc.SpriteFrame},taskNumsLabel:cc.RichText,timeLabel:cc.RichText,taskRichText:cc.RichText,entryIcon:cc.Sprite,diamondSprite:cc.SpriteFrame,entryFreeLabel:cc.Label,closeBtn:cc.Node},start:function(){this.closeBtn.active=!1,this.scheduleOnce(function(){this.closeBtn.active=!0},2)},setSceneData:function(e,t,i,n){this.gameData=e,this.sceneData=cc.loading.getCustomData(),this.taskRichText.string=i;var h=0;switch(this.sceneData.amusementType){case 0:h=this.gameData.amusementOverTake;break;case 1:h=this.gameData.amusementHitVehicle;break;case 2:h=this.gameData.amusementGetBullions;break;case 3:h=this.gameData.amusementGetDiamonds}this.taskNumsLabel.string="<color=#FFFFFF>"+n+"</c><color=#f1d82a>/"+h+"</color>",this.timeLabel.string="<color=#FFFFFF>"+this.gameData.time/100+"</c><color=#f1d82a>/"+o[this.sceneData.amusementType]/100+"S</color>",this.entryFreeLabel.string=a[this.sceneData.amusementType],s.totalCoins-=a[this.sceneData.amusementType],s._userGameData.amusementCountArr[this.sceneData.amusementType].fail++,s.saveData()},onUgradeBike:function(){var e=void 0;s.getTotalAmusementCount()>=1&&!s.isUnlockAmusementAward&&(e="showAmusementAward"),cc.loading.loadScene("MainScene",{cmd:e||"upgrade"})},onGameMode:function(){var e=void 0;s.getTotalAmusementCount()>=1&&!s.isUnlockAmusementAward&&(e="showAmusementAward"),cc.loading.loadScene("MainScene",{cmd:e||"amusement",amusementType:this.sceneData.amusementType})},onEnable:function(){-1==s.newGuidelinesCount&&channelId==ChanneConfig.toutiao&&banner.show("main")},onDisable:function(){channelId==ChanneConfig.toutiao&&(banner.hide(),-1==s.newGuidelinesCount&&1!=s.rankLevel&&window.InterstitialAd.createInterstitialAdByAdId("main"))}}),cc._RF.pop()},{GameDataCenter:void 0}],AudioGame:[function(e,t,i){"use strict";cc._RF.push(t,"ee004eA4PVPwYex/EzTlSsz","AudioGame");var s=e("Loading");cc.Class({extends:cc.Component,properties:{gameBGMusic:{default:null,type:cc.AudioClip},speedUpAudioClip:{default:null,type:cc.AudioClip},motoStartAudioClip:{default:null,type:cc.AudioClip},overtakeCarAudioClip:{default:[],type:cc.AudioClip},overtakeMotoAudioClip:{default:[],type:cc.AudioClip},winAudioClip:{default:null,type:cc.AudioClip},failAudioClip:{default:null,type:cc.AudioClip},crashAudioClip:{default:[],type:cc.AudioClip},denAudioClip:{default:[],type:cc.AudioClip},hornAudioClip:{default:[],type:cc.AudioClip},slipAudioClip:{default:[],type:cc.AudioClip},throwAudioClip:{default:null,type:cc.AudioClip},beHitAudioClip:{default:null,type:cc.AudioClip},beThrownAudioClip:{default:null,type:cc.AudioClip},bebananaAudioClip:{default:null,type:cc.AudioClip},okAudioClip:{default:null,type:cc.AudioClip},smogAudioClip:{default:null,type:cc.AudioClip},motoMaxSteerAudioClip:{default:null,type:cc.AudioClip},circleTipsAudioClip:{default:null,type:cc.AudioClip},scoreStarAudioClip:{default:[],type:cc.AudioClip},scoreCoinsAudioClip:{default:null,type:cc.AudioClip},rankStarAudioClip:{default:[],type:cc.AudioClip}},onLoad:function(){if(cc.loading.getCustomData().isMatch){var e=cc.loading.getCustomData().matchScenery||0;this.bgmUrl="game/audio/"+cc.gameConfig.guankaScenery[e].bgm}else{var t=cc.loading.getCustomData().level,i=cc.gameConfig.guankaData[t];this.bgmUrl="game/audio/"+i.bgm}cc.loading.loadRes(this.bgmUrl,cc.AudioClip,function(e,t){this.gameBGMusic=t}.bind(this)),cc.audioGame=this,cc.loading.node.on(s.LOAD_COMPLETE,this.loadResComplete,this),cc.audioEngine.setMusicVolume(.3)},loadResComplete:function(){cc.log("playGameBGMusic"),this.playGameBGMusic(),cc.loading.node.off(s.LOAD_COMPLETE,this.loadResComplete,this)},onDestroy:function(){this.stopMotoStart(),this.stopMotoMaxSteer(),this.stopMusic(),cc.audioComponent._gameBGMusicID=null,cc.audioComponent.isGame=!1,cc.loader.releaseRes(this.bgmUrl,cc.AudioClip)},start:function(){},playSpeedUp:function(){cc.audioComponent.playEffect(this.speedUpAudioClip)},playMotoStart:function(){this.motoStartEffect=cc.audioComponent.playEffect(this.motoStartAudioClip)},stopMotoStart:function(){},playOvertakeCar:function(e){cc.audioComponent.playEffect(this.hornAudioClip[0])},playOvertakeMoto:function(e){cc.audioComponent.playEffect(this.overtakeMotoAudioClip[e])},playCrash:function(e){cc.audioComponent.playEffect(this.crashAudioClip[e])},playDen:function(e){cc.audioComponent.playEffect(this.denAudioClip[e])},playWin:function(){cc.audioComponent.playEffect(this.winAudioClip)},playfail:function(){cc.audioComponent.playEffect(this.failAudioClip)},playProps:function(e){switch(e){case"nail":cc.audioComponent.playEffect(this.slipAudioClip[1]);break;case"oil":cc.audioComponent.playEffect(this.slipAudioClip[2]);break;case"banana":cc.audioComponent.playEffect(this.slipAudioClip[3]);break;case"bar":cc.audioComponent.playEffect(this.slipAudioClip[0])}},playAiProps:function(){cc.audioComponent.playEffect(this.slipAudioClip[0])},playUetProps:function(){cc.audioComponent.playEffect(this.throwAudioClip)},playSmog:function(){cc.audioComponent.playEffect(this.smogAudioClip)},playOk:function(){cc.audioComponent.playEffect(this.okAudioClip)},playBebanana:function(){cc.audioComponent.playEffect(this.bebananaAudioClip)},playBeThrown:function(){cc.audioComponent.playEffect(this.beThrownAudioClip)},playBeHitAudioClip:function(){cc.audioComponent.playEffect(this.beHitAudioClip)},playCircleTips:function(){cc.audioComponent.playEffect(this.circleTipsAudioClip)},playStar:function(e){cc.audioComponent.playEffect(this.scoreStarAudioClip[e])},playCollectCoins:function(){cc.audioComponent.playEffect(this.scoreCoinsAudioClip)},playRankStar:function(e){cc.audioComponent.playEffect(this.rankStarAudioClip[e])},playMotoMaxSteer:function(){this.motoMaxSteerEffect||(this.motoMaxSteerEffect=cc.audioComponent.playEffect(this.motoMaxSteerAudioClip,!0))},stopMotoMaxSteer:function(){var e=this.motoMaxSteerEffect;this.motoMaxSteerEffect=null,e&&cc.audioComponent.stopEffect(e)},playGameBGMusic:function(){cc.audioComponent._mainBGMusicID=null,cc.audioComponent.gameBGMusic=this.gameBGMusic,cc.audioComponent.isGame=!0,cc.audioComponent.stopMusic(),cc.audioComponent.playGameBGMusic()},pauseMusic:function(){cc.audioEngine.isMusicPlaying()&&cc.audioEngine.pauseMusic()},resumeMusic:function(){cc.audioEngine.isMusicPlaying()||cc.audioEngine.resumeMusic()},stopMusic:function(){cc.audioEngine.stopMusic()},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()},stopAll:function(){cc.audioEngine.stopAll()},pauseAllEffects:function(){cc.audioEngine.pauseAllEffects()},resumeAllEffects:function(){cc.audioEngine.resumeAllEffects()},stopAllEffects:function(){cc.audioEngine.stopAllEffects()}}),cc._RF.pop()},{Loading:void 0}],Bollard:[function(e,t,i){"use strict";cc._RF.push(t,"6da10s1NMRMi6gUoeUaV4Cr","Bollard");var s=e("GameComponent");cc.Class({extends:s,properties:{orderType:0,scale:.01,bollardType:0,rowNum:360},onLoad:function(){this.bollardId="bollard"+this.bollardType,this.node.anchorY=0,this.node.anchorX=.5,this.bollardX=0,0==this.orderType?this.bollardSideMultiplier=-.5:this.bollardSideMultiplier=.5,cc.loading.loadRes("game/scenery/"+this.bollardType+"/bollard",cc.SpriteFrame,function(e,t){this.isValid&&(this.bollardSpriteFrame=t,this.node.getComponent(cc.Sprite).spriteFrame=this.bollardSpriteFrame)}.bind(this))},start:function(){},update:function(e){this.bollardSpriteFrame&&(this.node.x=this.bollardX,this.node.y=this.y,this.node.zIndex=2999-Math.floor(this.node.y),this.node.scaleX=this.scale,this.node.scaleY=this.scale)}}),cc._RF.pop()},{GameComponent:"GameComponent"}],Car:[function(e,t,i){"use strict";cc._RF.push(t,"b9383y/QaZJyolRGfgB4z4h","Car");var s=e("GameComponent");cc.Class({extends:s,statics:{newCar:function(e){var t=cc.Node().addComponent("Car");return t.carFrame=e,t},loadRes:function(e,t){var i="game/vehicle/car/"+e;null==t[i]&&cc.loading.loadRes(i,cc.SpriteAtlas,function(e,s,a){t[i]=s})}},properties:{carFrame:{default:[],type:cc.SpriteFrame},hooshNode0:cc.Node,hooshNode1:cc.Node,hooshNode2:cc.Node,carSprite:cc.Sprite,carFarmeURL:"car2",bossIcon:cc.Node,yunIcon:cc.Node},ctor:function(){},setFarmeURL:function(e){this.carFarmeURL=e},onLoad:function(){this.farmeURL="game/vehicle/car/"+this.carFarmeURL,cc.loading.loadRes(this.farmeURL,cc.SpriteAtlas,function(e,t){if(this.isValid){for(var i=0;i<31;i++){var s=i<10?"0"+i:i,a=t.getSpriteFrame(this.carFarmeURL+"_"+s);this.carFrame[i]=a}this.carSprite.spriteFrame=this.carFrame[15]}}.bind(this)),this.carSprite.spriteFrame=this.carFrame[15],this.isAccelerating=!1,this.isAccelerating?(this.hooshNode0.active=!0,this.hooshNode1.active=!0,this.hooshNode2.active=!0):(this.hooshNode0.active=!1,this.hooshNode1.active=!1,this.hooshNode2.active=!1),this.isBoss?this.bossIcon.active=!0:this.bossIcon.active=!1,this.yunIcon.active=!1},start:function(){this.maxSteer=1800,this.steerEaseX=0},setRotation:function(e){this.steerEaseX=e,this.carSprite.spriteFrame=this.carFrame[Math.floor(-e/7e3*15+15)+1]},setFrame:function(e){this.carSprite.spriteFrame=this.carFrame[e]},setSteerX:function(){},update:function(e){this.hooshNode1.opacity=255*(.2*Math.random()+.5),this.hooshNode1.angle=- -this.steerEaseX/this.maxSteer*5},onDestroy:function(){cc.loader.releaseRes(this.farmeURL,cc.SpriteAtlas)},onYun:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.scheduleOnce(function(){this.yunIcon.active=!1},e),this.yunIcon.active=!0}}),cc._RF.pop()},{GameComponent:"GameComponent"}],CoinMgr:[function(e,t,i){"use strict";cc._RF.push(t,"fd4a79rbKNFiamg1I1V4V21","CoinMgr");var s=new Array(.15,.38,.62,.85),a=e("GameDataCenter").getInstance(),o=e("GameComponent");cc.Class({extends:o,properties:{coinPool:cc.NodePool,coinPrefab:cc.Prefab,carNode:cc.Node},onLoad:function(){this.road=this.node.getComponent("Road")},initData:function(e){if(this.coinDataList=new Array,this.propDataList=new Array,this.isMatch=cc.loading.getCustomData().isMatch,this.sceneData=cc.loading.getCustomData(),this.level=cc.loading.getCustomData().level,this.isMatch||this.sceneData.isNewGuidelines||this.sceneData.isAmusement){if(this.sceneData.isAmusement&&(2==this.sceneData.amusementType||3==this.sceneData.amusementType)){var t=this.sceneData.amusementType,i=2==t?10*a._userGameData.amusementCountArr[t].win:10*(a._userGameData.amusementCountArr[t].win+1);i=i>50?50:i;for(var s=0;s<200;s++){var o=s/200;for(n=0;n<4;n++){if(1*Math.random()<.5)(h={}).lane=n,h.coinType=2==this.sceneData.amusementType?1:2,h.dist=o,h.speed=0,h.type="coin",this.coinDataList.push(h);else if(100*Math.random()<10&&this.propDataList.length<i)(h={}).lane=n,h.dist=o,this.propDataList.push(h)}}cc.log(this.coinDataList)}}else for(var n=0;n<e.coinCount+e.bonusCoinCount;n++){var h;(h={}).lane=Math.floor(4*Math.random());var c=1;c=e.coinCount>0&&e.bonusCoinCount>0?n%2==0?1:2:e.coinCount>0?1:2,h.coinType=c,h.dist=n/(e.coinCount+e.bonusCoinCount)+1*Math.random()/(e.coinCount+e.bonusCoinCount),h.speed=90,h.type="coin",0==this.level&&0==n&&this.sceneData.isGame&&(h.lane,h.dist=.001,h.isGuidelines=!0),this.coinDataList.push(h)}return this.coinDataList},start:function(){if(this.aCoins=new Array,this.aCoinLanes=new Array,cc.loading.getCustomData().isFcdb)for(var e=0;e<8;e++){var t=new Array;this.aCoinLanes.push(t)}else for(e=0;e<4;e++){t=new Array;this.aCoinLanes.push(t)}this.coinPool=new cc.NodePool,this.isBonusLevel=!1},update:function(e){if(a.gameData.gameStart){for(var t=e,i=0;i<this.coinDataList.length;i++){var o=this.coinDataList[i];a.gameData.dist>o.dist&&(this.coinDataList.splice(i,1),i--,this.addVehicle(o))}for(var n=0;n<this.aCoins.length;n++){var h=this.aCoins[n],c=this.road.roadNodeList[Math.floor(h.rowNum)];if(null!=c){var r=c.getPosition();if(0==this.level&&h.isGuidelines&&this.sceneData.isGame){var d=0;d=this.road.myVehicle.lane>=2?this.road.myVehicle.lane-1:this.road.myVehicle.lane+1,h.sideMultiplier=s[d]}h.x=r.x-c.width/2+h.sideMultiplier*c.width,h.y=r.y,h.scale=this.road.roadScaleMultiplier/1e3*(c.width-30)*.5,h.tempInc=(h.rowNum-360)/(this.road.segNum-360),h.perspSpeed=h.tempInc*Math.pow(h.tempInc,5)+0;var l=0,m=this.road.myVehicle.speed;this.sceneData.isGame&&0!=this.level&&(l=a.gameData.dist+.1>h.dist?45:90,m=m<this.road.myVehicle.minSpeed?this.road.myVehicle.minSpeed:m),h.rowNum+=.8*(150*h.perspSpeed+m-l)*t,h.scale<.03?h.active=!1:(h.active=!0,h.zIndex=3999-Math.floor(r.y)),h.rowNum>=this.road.segNum?(this.removeVehicle(n),n-=1):h.rowNum>this.road.segNum-30&&0==this.level&&h.isGuidelines&&this.sceneData.isGame?(this.road.myVehicle.lane>=2?h.x=-150:h.x=150,h.isGuidelines=!1,this.road.gameGuidelines.showCoinGuidelines(14,h.x>0?2:1)):h.rowNum>this.road.segNum-20?h.x>-120&&h.x<120&&(1==h.coinType?(this.node.emit("onCoinUp",3,10),cc.audioComponent.play("game_coins")):(this.node.emit("onCoinUp",4,1),cc.audioComponent.play("game_diamonds")),this.removeVehicle(n),n-=1):h.rowNum<350&&(this.removeVehicle(n),n-=1)}}}},addVehicle:function(e){var t=e.lane;cc.log(e.lane);for(var i=s[t],a=0;a<1;a++){var o=360+3*a,n=null,h=(n=this.coinPool.size()>0?this.coinPool.get():cc.instantiate(this.coinPrefab)).getComponent(cc.Animation);n.coinType=e.coinType,2==e.coinType?(n.getChildByName("txt").active=!1,h.play("coin2")):(this.sceneData.isAmusement&&2==this.sceneData.amusementType?n.getChildByName("txt").active=!1:n.getChildByName("txt").active=!0,h.play("coin")),0==this.level&&e.isGuidelines&&this.sceneData.isGame&&(n.isGuidelines=e.isGuidelines),n.dist=e.dist,n.road=this.road,n.rowNum=o,n.active=!1,this.node.addChild(n,this.carNode.getSiblingIndex()-1),n.sideMultiplier=i,n.lane=t,n.speed=e.speed<this.road.myVehicle.speed?e.speed:this.road.myVehicle.speed-5,n.speed=n.speed<0?0:n.speed,this.aCoinLanes[t].push(n),this.aCoins.push(n)}},removeVehicle:function(e){for(var t=this.aCoins[e],i=0;i<this.aCoinLanes[t.lane].length;i++)this.aCoinLanes[t.lane][i]==t&&this.aCoinLanes[t.lane].splice(i,1);this.coinPool.put(t),this.aCoins.splice(e,1)},shuffle:function(e){for(var t=e.length,i=0;i<t;i++){var s=t-1,a=Math.random()*(s+1)>>0,o=e[s];e[s]=e[a],e[a]=o}return e}}),cc._RF.pop()},{GameComponent:"GameComponent",GameDataCenter:void 0}],CointDown:[function(e,t,i){"use strict";cc._RF.push(t,"0f974IeHrRMcqN2mh+iCR8q","CointDown");(function(e){e&&e.__esModule})(e("InterstitialAd"));var s=e("GameDataCenter").getInstance();cc.Class({extends:cc.Component,properties:{timeDown:dragonBones.ArmatureDisplay,sprintAnim:dragonBones.ArmatureDisplay,sprintBtn:cc.Node,coinLabels:{default:[],type:cc.Label},coinNode:{default:[],type:cc.Node},awardTipsNode:cc.Node,bossAwardTips:cc.Node,bossAwardLabel:cc.Label,hasPassTips:cc.Node,awardTipsSprite:{default:[],type:cc.SpriteFrame}},onLoad:function(){this.isSprint=!1,this.isPlaySprint=!1,this.sceneData=cc.loading.getCustomData(),this.sceneType=cc.loading.getCustomData().amusementType,this.gameData=s.gameData,this.timeDown.on(dragonBones.EventObject.COMPLETE,this.timeCallBack,this),this.sprintBtn.getChildByName("sprint").on(cc.Node.EventType.TOUCH_START,this.onSprint,this),this.awardTipsNode.active=!1,this.bossAwardTips.active=!1,this.hasPassTips.active=!1,this.sprintBtn.getChildByName("sprint").getChildByName("on").active=!1;for(var e=0;e<this.coinNode.length;e++)this.coinNode[e].active=!1;this.isMatch=cc.loading.getCustomData().isMatch,this.isNewGuidelines=cc.loading.getCustomData().isNewGuidelines,this.timeStep=1},start:function(){cc.log("this.sprintBtn",this.sprintBtn.active)},startCoinDown:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.awards;t&&(this.gameGuidelines=t),this.sprintBtn.active=!1,this.node.active=!0,this.time=100*Math.ceil(2.55),this.isPlay=!1,this.isOverTime=!1,this.isSprint?(this.timeDown.node.active=!0,this.timeDown.playAnimation("newAnimation",1)):(null!=this.sceneType&&this.showAmusementTips(),this.scheduleOnce(function(){this.isOverTime=!0,this.playerSprint()},2)),this.awardTipsNode.active=!1,this.bossAwardTips.active=!1,this.hasPassTips.active=!1;var a=s.getLevelState(e.key);if(this.isMatch||this.isNewGuidelines||this.sceneData.isAmusement?this.isMatch&&(this.awardTipsNode.active=!0):a?this.hasPassTips.active=!0:e.isBoss?(this.bossAwardTips.active=!0,this.bossAwardLabel.string=i[0]+""):this.awardTipsNode.active=!0,this.isMatch)for(var o=0;o<this.coinNode.length;o++)this.coinLabels[o].node.active=!1,this.coinNode[o].getChildByName("title").active=!1,this.coinNode[o].getChildByName("icon").active=!1,this.coinNode[o].getChildByName("tips").active=!0,this.coinNode[o].active=!0;else if(!this.sceneData.isAmusement)for(o=0;o<this.coinNode.length;o++)!i[o]||a||e.isBoss?this.coinNode[o].active=!1:(this.coinLabels[o].node.active=!0,this.coinLabels[o].string=i[o]+"",this.coinNode[o].getChildByName("title").active=!0,this.coinNode[o].getChildByName("icon").active=!0,this.coinNode[o].getChildByName("tips").active=!1,this.coinNode[o].active=!0)},playerSprint:function(){if(!this.isPlay)if(this.isPlay=!0,this.timeDown.node.active=!0,this.timeDown.playAnimation("newAnimation",1),this.schedule(function(){this.onPlayAudio(0)},.8,3),this.awardTipsNode.active){for(var e=[],t=this.awardTipsNode.children.length-1;t>=0;t--)e.push(this.awardTipsNode.children[t]);var i=0,s=function(){e[i].runAction(cc.sequence(cc.callFunc(function(){}),cc.moveTo(.5,cc.v2(cc.winSize.width+e[i].width,e[i].y)).easing(cc.easeBackIn()))),i++}.bind(this);s(),this.schedule(s,.8,1)}else{(e=this.hasPassTips.active?this.hasPassTips:this.bossAwardTips).runAction(cc.sequence(cc.delayTime(1),cc.moveTo(1,cc.v2(cc.winSize.width+e.width,e.y)).easing(cc.easeBackIn())))}},timeCallBack:function(){console.log("over time",this.time),this.timeDown.node.active=!1,this.node.active=!1,this.onPlayAudio(1),this.node.emit("gameStart"),cc.audioGame.stopMotoStart()},onSprint:function(){cc.audioComponent.play("button"),console.log("onSprint Time: ",this.time),this.isNewGuidelines&&(cc.log("111222223333"),this.sprintAnim.timeScale=1,this.timeDown.timeScale=1,this.timeStep=1,this.gameGuidelines.hide(1)),this.time>=0&&this.time<=100&&!this.isSprint&&(console.log("in Sprint"),this.isSprint=!0,this.node.emit("gameSprint"))},showAmusementTips:function(){var e=void 0,t=void 0,i=void 0;switch(this.sceneType){case 0:e=cc.gameConfig.gameString.modeAmusementOverTakeTask,t=this.gameData.amusementOverTake,i=this.gameData.missCarCount;break;case 1:e=cc.gameConfig.gameString.modeAmusementHitVehicleTask,t=this.gameData.amusementHitVehicle,i=this.gameData.hitVehicleCount;break;case 2:e=cc.gameConfig.gameString.modeAmusementGetBullionsTask,t=this.gameData.amusementGetBullions,i=this.gameData.coins;break;case 3:e=cc.gameConfig.gameString.modeAmusementGetDiamondsTask,t=this.gameData.amusementGetDiamonds,i=this.gameData.diamonds}var s=new RegExp("X","g"),a=e.replace(s,t).replace("Y",i);cc.toast.showAmusementTips(a,1)},onPlayAudio:function(e){cc.audioGame.playDen(e)},onPause:function(){this.node.active&&(this.isSprint||(this.timeDown.timeScale=0),this.timeDown.node.active=!1)},onResume:function(){if(this.node.active){this.timeDown.node.active=!0,this.isSprint?this.timeDown.playAnimation("newAnimation",1):this.timeDown.timeScale=1;for(var e=this.awardTipsNode.children.length-1;e>=0;e--)this.awardTipsNode.children[e].x=0}},update:function(e){if(this.isOverTime){var t=e;this.time=Math.max(Math.round(this.time-100*t),0),0==this.time&&(this.isOverTime=!1),this.time<=100&&!this.isPlaySprint&&(this.sprintBtn.active=!0,this.sprintBtn.getChildByName("sprint").getChildByName("on").active=!0,this.sprintBtn.getChildByName("sprint").getChildByName("off").active=!1,this.isPlaySprint=!0,this.sprintAnim.timeScale=2.5,this.sprintAnim.playAnimation("newAnimation",1)),this.isNewGuidelines&&this.time<=100&&0==this.gameGuidelines._shoWIndex&&(this.sprintAnim.timeScale=0,this.timeDown.timeScale=0,this.timeStep=0,this.gameGuidelines.show(1))}}}),cc._RF.pop()},{GameDataCenter:void 0,InterstitialAd:void 0}],DistRankin:[function(e,t,i){"use strict";cc._RF.push(t,"79c75qL0AlJ7qDBWgIsOoTT","DistRankin"),cc.Class({extends:cc.Component,properties:{headIcon:cc.Sprite,headIconSpriteFrame:{type:cc.SpriteFrame,default:[]},nameLabel:cc.Label,overIcon:cc.Node,bgSpriteFrame:{type:cc.SpriteFrame,default:[]}},start:function(){this.overIcon.active=!1},setData:function(e,t){this.type=e,this.name!=t&&(this.name=t,this.node.getComponent(cc.Animation).play("distRankin"))},updateRankin:function(){this.nameLabel.string=this.name,"boss"==this.type?(this.headIcon.spriteFrame=this.headIconSpriteFrame[2],this.node.getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[1]):"player"==this.type?(this.headIcon.spriteFrame=this.headIconSpriteFrame[1],this.node.getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[0]):(this.headIcon.spriteFrame=this.headIconSpriteFrame[0],this.node.getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[1])},setOver:function(e){this.overIcon.active=e}}),cc._RF.pop()},{}],Dist:[function(e,t,i){"use strict";cc._RF.push(t,"e41afcmfthIPpq443QL/Hsl","Dist"),cc.Class({extends:cc.Component,properties:{label_num:cc.Label,propSpriteFrame:{default:[],type:cc.SpriteFrame},propNode:cc.Node,propSprite:cc.Sprite},onLoad:function(){this.propNode.active=!1},start:function(){},setNum:function(e){this.label_num.string=e+""},byProp:function(e){switch(e){case"nail":this.propSprite.spriteFrame=this.propSpriteFrame[0],this.propNode.active=!0,this.scheduleOnce(function(){this.propNode.active=!1},1.5);break;case"oil":this.propSprite.spriteFrame=this.propSpriteFrame[1],this.propNode.active=!0,this.scheduleOnce(function(){this.propNode.active=!1},1.5);break;case"banana":this.propSprite.spriteFrame=this.propSpriteFrame[2],this.propNode.active=!0,this.scheduleOnce(function(){this.propNode.active=!1},2);break;case"smoke":this.propSprite.spriteFrame=this.propSpriteFrame[3],this.propNode.active=!0,this.scheduleOnce(function(){this.propNode.active=!1},3);break;case"bar":this.propSprite.spriteFrame=this.propSpriteFrame[4],this.propNode.active=!0,this.scheduleOnce(function(){this.propNode.active=!1},2)}}}),cc._RF.pop()},{}],FcdbOver:[function(e,t,i){"use strict";cc._RF.push(t,"100e2/ZRz1MvomGN16fqPiV","FcdbOver");h(e("buttonConfig"));var s=h(e("share")),a=h(e("videoAd")),o=(h(e("statistics")),h(e("banner"))),n=h(e("login"));function h(e){return e&&e.__esModule?e:{default:e}}var c=e("GameDataCenter").getInstance();cc.Class({extends:cc.Component,properties:{awardLabel:cc.Label,awardSprite:cc.Sprite,doubleAwardButton:cc.Node,noThanksBtn:cc.RichText,shareBtn:cc.Node,doubleAwardButtonVideo:cc.SpriteFrame,yesBtn:cc.Node},setData:function(e,t){this.id=e,this.count=t},onLoad:function(){},start:function(){if(this.res="coins",this.name=cc.gameConfig.gameString.coinLabel,"coin"!=this.id){var e=cc.gameConfig.daojuDataForKey[this.id];cc.log("daoju =",e),this.res=e.res,this.name=e.name}cc.loader.loadRes(this.res,cc.SpriteFrame,function(e,t){this.awardSprite.spriteFrame=t}.bind(this)),this.awardLabel.string=this.name+"x"+this.count,"coin"==this.id?c.totalCoins=c.totalCoins+this.count:c.setDaoJuNum(1,this.id,this.count),c.saveData()},onGetAward:function(){this.node.active=!1,this.node.destroy()},onGetDoubleAward:function(){var e=this;a.default.show("bisaipaimingshuangbeijiangli",function(){c.totalCoins=c.totalCoins+e.count,c.saveData(),cc.toast.show("\u606d\u559c\u83b7\u5f97"+e.count+"x2",1.5),cc.loading.loadScene("MainScene"),e.node.active=!1,e.node.destroy()})},onShareFriend:function(){s.default.shareToSociety({shareType:2,buttonKey:"xuanyaoyixia"},this.onClose.bind(this))},onClose:function(){cc.toast.show("\u606d\u559c\u83b7\u5f97"+this.count,1.5),cc.loading.loadScene("MainScene")},onDestroy:function(){cc.loader.releaseRes(this.res,cc.SpriteFrame)},onEnable:function(){this.banner=o.default.show("top"),n.default.hideLogin()},onDisable:function(){this.banner?o.default.show(this.banner):o.default.hide(),n.default.showLogin()}}),cc._RF.pop()},{GameDataCenter:void 0,banner:void 0,buttonConfig:void 0,login:void 0,share:void 0,statistics:void 0,videoAd:void 0}],GameComponent:[function(e,t,i){"use strict";cc._RF.push(t,"b9b4djDjWNBhKIWLScEV48p","GameComponent"),cc.Class({extends:cc.Component,properties:{}}),cc._RF.pop()},{}],GameData:[function(e,t,i){"use strict";cc._RF.push(t,"95cf5jG8A5DIbDEw5dWLZZ1","GameData");cc.Class({properties:{overtakes:0,speedSecs:0,coins:0,diamonds:0,multiple:1,dist:0,levelStage:1,time:2500,totalLevelScore:0,totalLevelCoins:0,sceneryOrderLeft:null,sceneryOrderRight:null,levelNum:0,isBonusLevel:!1,raceDist:0,levelOver:!1,beyondDist:0,gameStart:!1,beyondEndDist:0,circle:0,curveCount:0,startSprint:!1,missSprint:!1,missObstacleCount:0,hitVehicleCount:0,missCarCount:0,throwingPropCount:0,useAccelCount:0,infiniteAccel:!1,infiniteProp:!1,timeTrail:!1,levelStar:0,amusementOverTake:20,amusementHitVehicle:3,amusementGetBullions:50,amusementGetDiamonds:50},ctor:function(){},initSceneryOrder:function(e){}});cc._RF.pop()},{}],GameGuidelines:[function(e,t,i){"use strict";cc._RF.push(t,"16123mzNBlL66tGbPZ/EV5e","GameGuidelines"),cc.Class({extends:cc.Component,properties:{guidelines:{type:cc.Node,default:[]},_shoWIndex:-1},start:function(){cc.loading.getCustomData().isNewGuidelines||(this.node.getChildByName("btn_on_audio").active=!1)},show:function(e){this._shoWIndex!=e&&(this.hide(this._shoWIndex),this.guidelines[e].active=!0,this._shoWIndex=e)},setRoad:function(e){this.road=e},setGame:function(e){this.game=e},update:function(e){switch(this._shoWIndex){case 2:this.road.myVehicle.lane<=.8&&(this.road.onTouchEndLeft(),console.log(this.road.myVehicle.lane),this._index2||(this._index2=!0,this.road.vehicleAiMgr.aVehicleAis[0].isBoss=!1,this.road.vehicleAiMgr.aVehicleAis[0].rowNum=550,this.road.vehicleAiMgr.aVehicleAis[0].lane=this.road.myVehicle.lane+1,this.myLane=this.road.myVehicle.lane,this.road.vehicleAiMgr.aVehicleAis[0].speed=this.road.myVehicle.speed),this.show(3));break;case 3:this._index3?this._index3_1||(-1==this.road.myVehicle.rightSteer?(this.game.onResumeGame(),this.road.vehicleAiMgr.aVehicleAis[0].rowNum=598):this.game.onPause(),this.road.myVehicle.lane>=1.5&&(this.road.onTouchEndRight(),this.setTakeState(1),this.road.vehicleAiMgr.aVehicleAis[0].lane=this.road.myVehicle.lane+1,this.road.vehicleAiMgr.aVehicleAis[0].rowNum=520,this.road.vehicleAiMgr.aVehicleAis[0].speed=2*this.road.myVehicle.speed,this.show(4))):(this.road.vehicleAiMgr.aVehicleAis[0].rowNum<570?-1==this.road.myVehicle.rightSteer&&(this.road.vehicleAiMgr.aVehicleAis[0].speed=.45*this.road.myVehicle.speed):this.road.vehicleAiMgr.aVehicleAis[0].speed=this.road.myVehicle.speed,this.road.myVehicle.lane>=1&&(this.road.onTouchEndRight(),this.road.vehicleAiMgr.aVehicleAis[0].speed=this.road.myVehicle.speed,this.road.vehicleAiMgr.aVehicleAis[0].rowNum=580,this.road.vehicleAiMgr.aVehicleAis[0].x=250.3,this.scheduleOnce(function(){this.road.vehicleAiMgr.aVehicleAis[0].sideMultiplier=.45,this.game.onPause(),this.road.vehicleAiMgr.aVehicleAis[0].x=250.3},.1),this._index3=!0,this.guidelines[this._shoWIndex].getChildByName("game_1").active=!1,this.guidelines[this._shoWIndex].getChildByName("game_2").active=!0));break;case 4:!this._index4&&this.road.vehicleAiMgr.aVehicleAis[0].rowNum<=520&&(this._idnex4=!0,this.road.vehicleAiMgr.aVehicleAis[0].rowNum=520,this.road.vehicleAiMgr.aVehicleAis[0].speed=this.road.myVehicle.speed);break;case 5:this._index5||(this._idnex5=!0,this.game.curRanking=1,this.game.rankLabel.string=this.game.curRanking,this.road.vehicleAiMgr.aVehicleAis[0].speed=0);break;case 6:if(!this._idnex6){this._idnex6=!0,this.game.curRanking=1,this.game.showAiTips.active=!0,this.game.showAiDistLabel.string="0M",this.game.showAiRankLabel.string="\u7b2c\u4e8c\u540d";var t={lane:2,vehicleId:"1",dist:0,type:"vehicle"},i=this.road.vehicleMgr.addVehicle(t);i.rowNum=460;var s=3+this.road.myVehicle.steerEaseX/1e4;i.sideMultiplier=.4,cc.log(this.road.myVehicle.steerEaseX),this.myLane=s,this.scheduleOnce(function(){this.game.onPause()},1.5)}break;case 8:break;case 9:if(this._index9){if(this._index10||!(this.road.vehicleMgr.aVehicles[0].rowNum>600))return;this._index10=!0,this.road.onTouchEndLeft(),this.road.onTouchEndRight()}else 1==this.road.myVehicle.leftSteer?(this.game.onResumeGame(),this.road.myVehicle.sideMultiplierLane<this.myLane-1.5&&(this._index9=!0,this.road.onTouchEndLeft(),this.hide(this._shoWIndex),this.game.gameData.dist=1-.2/this.game.gameData.raceDist)):this.game.onPause()}},onPlay10:function(){this.game.onResumeGame(),this.game.gameData.dist=1-.2/this.game.gameData.raceDist},onContinue:function(e,t){if(0==(t=parseInt(t)))this.game.newGuidelinesStart();else{if(t<10)return void this.show(t);if(14==t||15==t||16==t){if(!this.isHide)return;this.game.onResumeGame()}}this.hide(t),this._shoWIndex=t},hide:function(e){this.guidelines[e]&&(this.guidelines[e].active=!1),1==e&&this.setTakeState(0)},setTakeState:function(e){var t=this.game.taskItems[e].getChildByName("star");t.getChildByName("on").active=!0,t.getChildByName("off").active=!1;var i=this.game.taskItems[e].getChildByName("name");i.getComponent(cc.RichText).string=cc.gameConfig.config.newGuidelinesFinished[e];var s=this.game.taskItems[e].getChildByName("done");s.x=i.x+i.width+20,s.active=!0},showCoinGuidelines:function(e,t){this.isHide=!1,this.scheduleOnce(function(){this.isHide=!0},1),this.game.onPause(),this.guidelines[e].active=!0,this.guidelines[e].getChildByName("game_"+t).active=!0}}),cc._RF.pop()},{}],GamePause:[function(e,t,i){"use strict";cc._RF.push(t,"66c5a9fh2FJiobtlIKlc2X9","GamePause");var s=n(e("ChanneConfig")),a=n(e("banner")),o=n(e("athletics"));n(e("InterstitialAd"));function n(e){return e&&e.__esModule?e:{default:e}}var h=e("GameDataCenter").getInstance(),c=s.default.channelId;cc.Class({extends:cc.Component,properties:{mainBtn:cc.Node,audioBtn:cc.Node,inventoryPrefab:cc.Prefab,npcSprite:cc.Sprite,npcGirlSprite:cc.SpriteFrame},onLoad:function(){-1!=h.rankLevel&&(this.npcSprite.spriteFrame=this.npcGirlSprite)},start:function(){c==s.default.toutiao&&(a.default.show("game"),window.InterstitialAd.createInterstitialAdByAdId("pause"))},onMap:function(){o.default.disconnectSoket(),cc.audioComponent.play("button"),c==s.default.toutiao&&recorder.isRecorder&&(console.log("\u6e38\u620f\u7ed3\u675f\u5f55\u5c4f"),recorder.gameIsWin=!1,cc.eventCenter.emit("game_recoreder_stop")),cc.loading.loadScene("MainScene")},onRestart:function(){cc.audioComponent.play("button");var e=cc.loading.getCustomData();e.isGame?cc.loading.loadScene("GameScene",{level:e.level,daojuList:e.daojuList,tryProps:e.tryProps,isGame:!0},!0):e.isAmusement&&cc.loading.loadScene("GameScene",{level:e.level,daojuList:e.daojuList,isAmusement:!0,amusementType:e.amusementType,tryProps:e.tryProps,circle:e.circle,raceDist:e.raceDist},!0)},onResume:function(){cc.audioComponent.play("button"),this.node.active=!1,this.node.emit("onResume")},onPause:function(e){this.node.active=!0},onSpeedUp:function(){cc.audioComponent.play("button"),this.node.emit("onSpeedUp"),this.onResume()},onInventory:function(){var e=cc.instantiate(this.inventoryPrefab);e.on("inventoryClose",function(){this.node.emit("ResetDaoju",cc.loading.getCustomData().daojuList)},this),this.node.getChildByName("pause").addChild(e)},onEnable:function(){},onDisable:function(){c==s.default.toutiao&&a.default.hide()}}),cc._RF.pop()},{ChanneConfig:void 0,GameDataCenter:void 0,InterstitialAd:void 0,athletics:void 0,banner:void 0}],GameScene:[function(e,t,i){"use strict";cc._RF.push(t,"ec2b2M6te1Oxoek0UlDZWjg","GameScene"),Object.defineProperty(i,"__esModule",{value:!0}),i.random=v;var s=h(e("athletics")),a=(h(e("login")),h(e("banner"))),o=(h(e("devices")),h(e("share")),h(e("statistics")),h(e("buttonConfig")),h(e("recorder"))),n=h(e("ChanneConfig"));function h(e){return e&&e.__esModule?e:{default:e}}var c=e("GameDataCenter").getInstance(),r=e("Road"),d=e("Loading"),l=e("GamePause"),m=e("GameGuidelines"),u=e("GameComponent"),p=n.default.channelId;cc.Class({extends:u,properties:{crash:cc.Node,road:r,distBgNode:cc.Node,distNode:cc.Node,distLabel:cc.Label,distBossPrefab:cc.Prefab,coinLabel:cc.Label,diamondLabel:cc.Label,speedLabel:cc.Label,timeLabel1:cc.Label,timeLabel2:cc.Label,timeLabel3:cc.Label,distPrefab:cc.Prefab,maskSpeedUpProgressBar:{default:[],type:cc.ProgressBar},speedUpCountLabel:{default:[],type:cc.Label},speedUpInfinite:{default:[],type:cc.Node},cointDownNode:cc.Node,scoreWinPrefab:cc.Prefab,scoreLosPrefab:cc.Prefab,scoreBossWinPrefab:cc.Prefab,scoreBossLosPrefab:cc.Prefab,scoreRankingPrefab:cc.Prefab,gamePause:l,overWinNode:cc.Node,overFireworks:dragonBones.ArmatureDisplay,overRankingLayout:cc.Node,overAmusementNode:cc.Node,overTimeLayout:cc.Node,overRankingSprite:{default:[],type:cc.SpriteFrame},overBossVictory:cc.SpriteFrame,overBossFailure:cc.SpriteFrame,rankGameFailure:cc.SpriteFrame,speedUdEffects:cc.Node,whooshNode:cc.Node,windNode:cc.Node,speedUpLabel:cc.Node,daojuBut:{default:[],type:cc.Node},daojuRightBtn:{default:[],type:cc.Node},daojuIcon:{default:[],type:cc.Sprite},daojuRightIcon:{default:[],type:cc.Sprite},daojuLabel:{default:[],type:cc.Label},daojuRightLabel:{default:[],type:cc.Label},daojuMaskLabel:{default:[],type:cc.ProgressBar},daojuRightMask:{default:[],type:cc.ProgressBar},daojuAinm:cc.Node,matchScorePrefab:cc.Prefab,speedProgressBar:cc.Node,speedUpButtonTips:cc.Node,speedUpButtonNode:cc.Node,timeOverLabel:cc.Label,button_pause:cc.Node,gameGuidelines:m,gameGuidelinesPrefab:cc.Prefab,roundLabel:cc.Label,totalCircleLabel:cc.Label,rankLabel:cc.Label,totalRankLabel:cc.Label,showTipsNode:cc.Node,gameTips:cc.Prefab,tipsSprite:{default:[],type:cc.SpriteFrame},showAiDistLabel:cc.Label,showAiRankLabel:cc.Label,boxAwardPrefab:cc.Prefab,topLightNode:cc.Node,bottomLightNode:cc.Node,showCircleNode:cc.Node,circleTipsPrefab:cc.Prefab,distEndNode:cc.Node,showAiTips:cc.Node,overRankNode:cc.Node,controlNode:cc.Node,taskNode:cc.Node,taskItems:{default:[],type:cc.Node},showRankingNode:cc.Node,gameModelTips:cc.Node,amusementTaskNode:cc.Node,amusementOverPrefab:cc.Prefab,modeTitleSprite:{default:[],type:cc.SpriteFrame},gameTimeNode:cc.Node,recorderBtn:cc.Node},onLoad:function(){this.controlNode.active=!1,this.isShowStartTips=!1,this.overLightMove=50,this.crash.active=!1,this.overWinNode.parent.active=!1,this.overFireworks.node.active=!1,this.gamePause.node.active=!1,this.timeOverLabel.node.active=!1,c.resetGameData(),this.gameData=c.gameData,this.level=cc.loading.getCustomData().level,this.isMatch=cc.loading.getCustomData().isMatch,this.isNewGuidelines=cc.loading.getCustomData().isNewGuidelines,this.sceneData=cc.loading.getCustomData(),this.levelData=cc.gameConfig.guankaData[this.level],this.levelState=[],this.levelTask=this.levelData.levelTask[this.levelData.levelTask.length-1],this.gameData.infiniteAccel=this.levelTask.infiniteAccel&&!this.isMatch&&!this.sceneData.isAmusement,this.gameData.infiniteProp=this.levelTask.infiniteProp&&!this.isMatch&&!this.sceneData.isAmusement,this.levelAi=!!(this.isNewGuidelines||this.isMatch||this.sceneData.isAmusement&&1==this.sceneData.amusementType)||!this.sceneData.isAmusement&&this.levelData.isAi,this.isSpeedUpFoPause=cc.loading.getCustomData().accelOn,this.curTime=this.sceneData.isAmusement?this.gameData.time:0,this.ranking=1,this.overAi={},this.overAiTime=[],this.speedUpCount=0,this.tryProps=cc.loading.getCustomData().tryProps;var e=this.isNewGuidelines?2:c.getDaoJuNum("accel");this.tryAccelCount=this.tryProps&&this.tryProps.accel?parseInt(this.tryProps.accel):0,this.accelCount=e+this.tryAccelCount,this.curRanking=1,this.isNewGuidelines?(this.sumRanking=3,this.button_pause.active=!1):this.isMatch?(this.sumRanking=s.default.players.length+1,this.button_pause.active=!1):this.sceneData.isAmusement&&1==this.sceneData.amusementType?this.sumRanking=8:this.levelAi&&(this.sumRanking=this.levelData.ais.length+1),this.distLabel.string=this.curRanking,this.showRankingNode.active=this.levelAi,this.levelAi&&(this.rankLabel.string=this.curRanking,this.totalRankLabel.string=this.sumRanking+""),this.gameModelTips.active=!1,this.sceneData.isAmusement||this.isNewGuidelines||(this.gameData.infiniteAccel?(this.gameModelTips.active=!0,this.gameModelTips.getChildByName("name").getComponent(cc.Label).string=cc.gameConfig.gameString.levelInfiniteAccel):this.gameData.infiniteProp&&(this.gameModelTips.active=!0,this.gameModelTips.getChildByName("name").getComponent(cc.Label).string=cc.gameConfig.gameString.levelInfiniteProp)),p==n.default.toutiao&&(this.gameData.infiniteAccel||this.gameData.infiniteProp)&&(this.recorderBtn.y=50),this.sceneData.isAmusement&&(this.distBgNode.getComponent(cc.Widget).top=210,this.distBgNode.getComponent(cc.Widget).updateAlignment(),this.gameTimeNode.setScale(1.5),this.gameTimeNode.getComponent(cc.Widget).top=300,this.gameTimeNode.getComponent(cc.Widget).updateAlignment()),cc.loading.node.on(d.LOAD_COMPLETE,this.loadResComplete,this),this.cointDownNode.active=!0,this.road.node.on("onRankingChange",this.onRankingChange,this),this.road.node.on("crash",this.onCrash,this),this.road.node.on("VehicleAiPos",this.onVehicleAiPos,this),this.road.node.on("onReachEnd",this.onReachEnd,this),this.road.node.on("onAddSpeedUp",this.onAddSpeedUp,this),this.road.node.on("onCoinUp",this.onCoinUp,this),this.road.node.on("onSpeedUpOver",this.onSpeedUpOver,this),this.road.node.on("onDistDaoju",this.onDistDaoju,this),this.road.node.on("onHitVehicle",this.onHitVehicle,this),this.road.node.on("onMatchEnd",this.onMatchEnd,this),this.road.node.on("onAiDaoju",this.onAiDaoju,this),this.road.node.on("onMissObstacle",this.onMissObstacle,this),this.road.node.on("onMissCar",this.onMissCar,this),this.gamePause.node.on("onResume",this.onResume,this),this.gamePause.node.on("onSpeedUp",this.onSpeedUpFoPause,this),this.gamePause.node.on("ResetDaoju",this.resetDaojuCount,this),this.maskSpeedUpProgressBar[0].progress=this.maskSpeedUpProgressBar[1].progress=0,this.speedUpCd=5,this.daojuCd=2;for(var t=0;t<this.daojuMaskLabel.length;t++)this.daojuMaskLabel[t].progress=1,this.daojuRightMask[t].progress=1;if(this.whooshNode.opacity=0,this.speedUpLabel.active=!1,this.speedUpLabel.getComponent(cc.Animation).on("finished",function(){this.speedUpLabel.active=!1},this),this.setDaoJuBtn(cc.loading.getCustomData().daojuList),this.daojuAinm.getComponent(cc.Animation).on("finished",function(){this.daojuAinm.active=!1},this),this.cointDown=this.cointDownNode.getComponent("CointDown"),s.default.on("onBegin",this.athleticsBegin.bind(this)),this.updateDistDelta=0,this.isNewGuidelines||0==this.level||3==this.level){var i=cc.instantiate(this.gameGuidelinesPrefab);i.zIndex=100,this.node.addChild(i),this.gameGuidelines=i.getComponent("GameGuidelines"),this.isNewGuidelines&&this.gameGuidelines.show(0),this.gameGuidelines.setRoad(this.road),this.gameGuidelines.setGame(this),this.road.setGameGuidelines(this.gameGuidelines)}if(1==this.gameData.circle)this.distEndNode.active=!1;else for(var a=1,o=0;a<=this.gameData.circle-1;a++,o++)if(o<this.distEndNode.parent.children.length)this.distEndNode.x=19+(this.distBgNode.width-19)*(a/this.gameData.circle);else{var h=cc.instantiate(this.distEndNode);h.x=9+(this.distBgNode.width-19)*(a/this.gameData.circle),this.distEndNode.parent.addChild(h)}if(this.showAiTips.active=!1,this.leftLightDic=-1,this.rightLightDic=1,this.isShowOverWin=!1,this.isMatch||this.isNewGuidelines)if(this.isNewGuidelines){this.amusementTaskNode.active=!1,this.taskNode.getChildByName("bossTask").active=!1,this.taskNode.getChildByName("taskItems").active=!0;for(var r=0;r<this.levelTask.starsConditions.length;r++){var l=this.taskItems[r].getChildByName("star");l.getChildByName("on").active=this.levelState[r],l.getChildByName("off").active=!this.levelState[r];var m=this.taskItems[r].getChildByName("name");m.getComponent(cc.RichText).string=cc.gameConfig.config.newGuidelinesInGame[r];var u=this.taskItems[r].getChildByName("done");u.x=m.x+m.width+20,u.active=!1}}else this.taskNode.active=!1;else if(this.amusementTaskNode.active=!1,this.taskNode.getChildByName("taskItems").active=!1,this.taskNode.getChildByName("bossTask").active=!1,this.sceneData.isAmusement)this.amusementTaskNode.active=!0,this.showAmusementTaskName(1);else if(this.levelData.isBoss){var g=this.taskNode.getChildByName("bossTask");g.active=!0,g.getChildByName("off").active=!0,g.getChildByName("on").active=!1}else{this.taskNode.getChildByName("taskItems").active=!0;for(var f=0;f<this.levelTask.starsConditions.length;f++)this.levelState.push(!1),this.showTaskName(f)}},startCoinDown:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;cc.audioGame.playMotoStart(),this.cointDown.startCoinDown(e,t,i)},loadResComplete:function(){cc.loading.node.off(d.LOAD_COMPLETE,this.loadResComplete,this),this.gameData.gameStart||(this.road.node.active=!0,cc.log("loadResComplete"),this.isLoadResComplete=!0,this.isMatch?(s.default.prepare(1),cc.loadingMask.showLoading("\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u8fdb\u5165")):this.isPropsTips||this.isNewGuidelines||this.startCoinDown(this.levelData))},newGuidelinesStart:function(){this.startCoinDown(this.levelData,!0,this.gameGuidelines)},athleticsBegin:function(){cc.loadingMask.hideLoading(),this.startCoinDown(this.levelData)},start:function(){a.default.hide(),this.isLoadResComplete||(this.road.node.active=!1),this.gameData.infiniteAccel&&!this.isNewGuidelines?(this.speedUpCountLabel[0].node.active=!1,this.speedUpCountLabel[1].node.active=!1,this.speedUpInfinite[0].active=!0,this.speedUpInfinite[1].active=!0,0==c.levelNum&&0==this.level&&(this.handTips=this.speedUpInfinite[1].parent.getChildByName("hand"),this.handTips.active=!0)):(this.speedUpCountLabel[0].string=this.speedUpCount+this.accelCount,this.speedUpCountLabel[1].string=this.speedUpCountLabel[0].string,this.speedUpInfinite[0].active=!1,this.speedUpInfinite[1].active=!1),this.crashAnim=this.crash.getComponent(cc.Animation),this.crashAnim.on("finished",this.onCrashFinished,this),this.levelOver=!1,this.coinLabel.string=this.gameData.coins+"",this.diamondLabel.string=this.gameData.diamonds+"",this.cointDownNode.on("gameStart",this.onGameStart,this),this.cointDownNode.on("gameSprint",this.setSprintData,this),this.roundLabel.string=this.gameData.levelStage-1+"",this.totalCircleLabel.string=this.gameData.circle,this.speedLabel.string="0",this.speedProgressBar.width=0,this.windNode.opacity=0,this.timeLabel1.string="00",this.timeLabel2.string="00",this.timeLabel3.string="00",this.topRankingTime=0,this.isNewGuidelines||p==n.default.toutiao&&(o.default.isRecorder||(console.log("\u5f00\u5c40\u5f55\u5c4f"),this.scheduleOnce(function(){cc.eventCenter.emit("game_recoreder_start",!0)},.3)))},onGameStart:function(){if(!c.gameData.gameStart){c.gameData.gameStart=!0,this.road.initCurve(),this.setSpeedUpCd(0);for(var e=0;e<this.daojuMaskLabel.length;e++)this.daojuMaskLabel[e].progress=0,this.daojuRightMask[e].progress=0}if(this.isNewGuidelines)this.gameGuidelines.show(1);else for(var t=this.node.getComponentsInChildren(u),i=0;i<t.length;i++)t[i].enabled=!0;this.isSpeedUpFoPause&&this.speedUpCd<=0&&(this.isSpeedUpFoPause=!1,this.road.node.emit("onSpeedUp"),this.setSpeedUpCd(5)),this.showCircleTips(),this.isShowStartTips||(this.gameData.startSprint?(this.gameData.startSprint=!1,this.onStartSprint()):(this.gameData.missSprint=!0,this.showGameTips(1)),this.isShowStartTips=!0,this.controlNode.active||(this.controlNode.active=!0))},update:function(e){if(this.gameData.gameStart){var t=e;if(!this.gameData.levelOver){var i=this.sceneData.isAmusement?-100:100;this.curTime=Math.max(Math.round(this.curTime+i*t),0),this.sceneData.isAmusement&&this.curTime<=0&&this.raceOver(!1),1==this.gameData.dist&&(this.gameData.beyondDist+=60*this.road.myVehicle.speed/this.gameData.raceDist/18e4*t),this.gameData.dist>1?(this.gameData.dist=1,this.isMatch&&s.default.end()):this.gameData.dist<1&&(this.isNewGuidelines&&9!=this.gameGuidelines._shoWIndex||(this.gameData.dist+=t*this.road.myVehicle.speed/this.gameData.raceDist/18e4*60)),this.gameData.raceDist-this.gameData.dist*this.gameData.raceDist<this.gameData.raceDist/this.gameData.circle*(this.gameData.circle-this.gameData.levelStage)+.193&&this.road.updateroadEnd(),this.updateDistDelta+=t,this.updateDistDelta>5&&(this.updateDistDelta=0,s.default.updateDist(this.gameData.dist)),1==this.curRanking&&(this.topRankingTime+=t,this.topRankingTime>5&&(this.road.onAiDaoJu(),this.topRankingTime=0))}if(this.gameData.levelStage<this.gameData.circle&&this.gameData.dist>=this.gameData.levelStage/this.gameData.circle&&!this.gameData.levelOver?(this.gameData.levelStage++,this.roundLabel.string=this.gameData.levelStage-1+"",this.road.roadEnd=!1,this.showCircleTips()):this.isMatch?this.gameData.circle==this.gameData.levelStage&&this.gameData.dist>=1&&!this.gameData.levelOver&&(this.overAi[-1]=this.ranking,this.raceOver(!0)):this.gameData.circle==this.gameData.levelStage&&this.gameData.dist>=1&&!this.gameData.levelOver&&(this.overAi[-1]=this.ranking,this.roundLabel.string=this.gameData.levelStage+"",this.raceOver(!0)),this.distNode.x=19+(this.distBgNode.width-19)*this.gameData.dist,this.isFcdb){var a=Math.floor(this.curTime/6e3).toString(),o=Math.floor((this.curTime-6e3*Math.floor(this.curTime/6e3))/100).toString();o.length<2&&(o="0"+o),(n=this.curTime.toString().charAt(this.curTime.toString().length-2)+this.curTime.toString().charAt(this.curTime.toString().length-1)).length<2&&(n="0"+n)}else{var n;(a=Math.floor(this.curTime/6e3).toString()).length<2&&(a="0"+a),(o=Math.floor((this.curTime-6e3*Math.floor(this.curTime/6e3))/100).toString()).length<2&&(o="0"+o),(n=this.curTime.toString().charAt(this.curTime.toString().length-2)+this.curTime.toString().charAt(this.curTime.toString().length-1)).length<2&&(n="0"+n)}if(this.timeLabel1.string=a,this.timeLabel2.string=o,this.timeLabel3.string=n,this.speedLabel.string=Math.ceil(this.road.myVehicle.speed)+"",this.road.myVehicle.speed>this.road.myVehicle.maxSpeed?this.speedProgressBar.width=679*(.74+(this.road.myVehicle.speed-this.road.myVehicle.maxSpeed)/(.2*this.road.myVehicle.maxSpeed)):this.speedProgressBar.width=this.road.myVehicle.speed/this.road.myVehicle.maxSpeed*.74*679,this.maskSpeedUpProgressBar[0].progress<1){var h=(this.maskSpeedUpProgressBar[0].progress*this.speedUpCd+e)/this.speedUpCd;this.maskSpeedUpProgressBar[0].progress=h>1?1:h,this.maskSpeedUpProgressBar[1].progress=this.maskSpeedUpProgressBar[0].progress}if(this.road.myVehicle.isSpeedUp){var c=(1-(this.road.segNum-this.road.myVehicle.rowNum)/150)/2+.5,r=2*Math.random()*(.2*c)+.5*c;this.whooshNode.opacity=Math.floor(1e3*r),this.windNode.opacity=0}else this.whooshNode.opacity=0,this.windNode.opacity=255;for(var d=0;d<this.daojuMaskLabel.length;d++)if(this.daojuMaskLabel[d].progress>0){h=(this.daojuMaskLabel[d].progress*this.daojuCd-e)/this.daojuCd;this.daojuMaskLabel[d].progress=h<0?0:h,this.daojuRightMask[d].progress=this.daojuMaskLabel[d].progress,h<0&&this.daojuHand&&(this.daojuHand.active=!0)}if(this.onAddTimeSpeedUp(e),this.isShowOverWin){a=100*e;this.topLightNode.x<-cc.winSize.width/2&&-1==this.leftLightDic?this.leftLightDic=1:this.topLightNode.x>cc.winSize.width/2&&1==this.leftLightDic&&(this.leftLightDic=-1),this.topLightNode.x+=a*this.leftLightDic,this.bottomLightNode.x<-cc.winSize.width/2&&-1==this.rightLightDic?this.rightLightDic=1:this.bottomLightNode.x>cc.winSize.width/2&&1==this.rightLightDic&&(this.rightLightDic=-1),this.bottomLightNode.x+=a*this.rightLightDic}}},showTaskName:function(e){var t=this.taskItems[e].getChildByName("star");t.getChildByName("on").active=this.levelState[e],t.getChildByName("off").active=!this.levelState[e];var i=parseInt(this.levelTask.type[e]),s=this.taskItems[e].getChildByName("name"),a=this.levelTask.starsConditions[e]+"",o=cc.gameConfig.config.gameShowTaskName[i],n=o.replace("X",a);if(i<3){var h=this.levelState[e]?"#15FF0F":"#FFFFFF";s.getComponent(cc.RichText).string="<color="+h+"><b>"+n+"</b></c>"}else{var c;switch(i){case 3:c=this.gameData.coins;break;case 4:c=this.gameData.diamonds;break;case 5:c=this.gameData.missCarCount;break;case 6:c=this.gameData.hitVehicleCount;break;case 7:c=this.gameData.missObstacleCount}if(this.levelState[e]){n=o.replace("/X","");s.getComponent(cc.RichText).string="<color=#A40A0A><b>"+c+"/"+a+"</b></c><color=#FFFFFF><b>"+n+"<b></c>"}else s.getComponent(cc.RichText).string="<color=#A40A0A><b>"+c+"</b></c><color=#FFFFFF><b>"+n+"<b></c>";var r=this.taskItems[e].getChildByName("done");r.x=s.x+s.width+20,r.active=this.levelState[e]}},checkTaskCondition:function(){for(var e=0;e<this.levelState.length;e++){if(!this.levelState[e])switch(parseInt(this.levelTask.type[e])){case 0:parseInt(this.levelTask.starsConditions[e])<=this.gameData.useAccelCount&&(this.levelState[e]=!0);break;case 1:parseInt(this.levelTask.starsConditions[e])>=Math.floor(this.curTime/100)&&this.gameData.levelOver&&(this.levelState[e]=!0);break;case 2:parseInt(this.levelTask.starsConditions[e])>=this.curRanking&&this.gameData.levelOver&&(this.levelState[e]=!0);break;case 3:parseInt(this.levelTask.starsConditions[e])<=this.gameData.coins&&(this.levelState[e]=!0);break;case 4:parseInt(this.levelTask.starsConditions[e])<=this.gameData.diamonds&&(this.levelState[e]=!0);break;case 5:parseInt(this.levelTask.starsConditions[e])<=this.gameData.missCarCount&&(this.levelState[e]=!0);break;case 6:parseInt(this.levelTask.starsConditions[e])<=this.gameData.hitVehicleCount&&(this.levelState[e]=!0);break;case 7:parseInt(this.levelTask.starsConditions[e])<=this.gameData.missObstacleCount&&(this.levelState[e]=!0)}}},showAmusementTaskName:function(e){var t=void 0;switch(this.sceneData.amusementType){case 0:t=1==e?cc.gameConfig.gameString.gameAmusementOverTakeTask:cc.gameConfig.gameString.modeAmusementOverTakeTask;break;case 1:t=1==e?cc.gameConfig.gameString.gameAmusementHitVehicleTask:cc.gameConfig.gameString.modeAmusementHitVehicleTask;break;case 2:t=1==e?cc.gameConfig.gameString.gameAmusementGetBullionsTask:cc.gameConfig.gameString.modeAmusementGetBullionsTask;break;case 3:t=1==e?cc.gameConfig.gameString.gameAmusementGetDiamondsTask:cc.gameConfig.gameString.modeAmusementGetDiamondsTask}if(1!=e)return this.setAmusementTaskname(t);this.amusementTaskNode.getChildByName("txt").getComponent(cc.RichText).string=this.setAmusementTaskname(t)},setAmusementTaskname:function(e){var t=void 0,i=this.setAmusementTaskValue();switch(this.sceneData.amusementType){case 0:t=this.gameData.amusementOverTake;break;case 1:t=this.gameData.amusementHitVehicle;break;case 2:t=this.gameData.amusementGetBullions;break;case 3:t=this.gameData.amusementGetDiamonds}var s=new RegExp("X","g");return e.replace(s,t).replace("Y",i).replace("Q","\n")},setAmusementTaskValue:function(){var e=void 0;switch(this.sceneData.amusementType){case 0:e=this.gameData.missCarCount;break;case 1:e=this.gameData.hitVehicleCount;break;case 2:e=this.gameData.coins;break;case 3:e=this.gameData.diamonds}return e},checkAmusementTask:function(){var e=void 0,t=this.setAmusementTaskValue();switch(this.sceneData.amusementType){case 0:e=this.gameData.amusementOverTake;break;case 1:e=this.gameData.amusementHitVehicle;break;case 2:e=this.gameData.amusementGetBullions;break;case 3:e=this.gameData.amusementGetDiamonds}return t>=e},onMatchEnd:function(){this.gameData.dist>=1&&0==this.gameData.beyondEndDist&&(this.road.updateroadEnd(),this.gameData.beyondEndDist=this.gameData.beyondDist+.204/this.gameData.raceDist)},onExitGame:function(){this.isPropsTips||(cc.audioComponent.play("button"),this.gamePause.onPause(this.isMatch),this.isMatch||(this.cointDown.onPause(),this.onPause()),cc.log("onExitGame"))},onPause:function(){for(var e=this.node.getComponentsInChildren(u),t=0;t<e.length;t++)e[t].enabled=!1},onResume:function(){this.isMatch||(this.gameData.gameStart?this.cointDown.startCoinDown(this.levelData,!1):this.cointDown.onResume())},onResumeGame:function(){for(var e=this.node.getComponentsInChildren(u),t=0;t<e.length;t++)e[t].enabled=!0},onCrash:function(){this.gameData.levelOver||(this.whooshNode.opacity=0,this.crash.active=!0,this.crashAnim.play("crash"))},onCrashFinished:function(){this.crash.active=!1},raceOver:function(e){if(!this.gameData.levelOver){var t,i;this.gameData.levelOver=!0;var h=0,r=[];if(this.isNewGuidelines&&(this.curRanking=1),cc.log("this.curtime",this.curTime),this.isMatch){for(var d=0;r.length<s.default.players.length+1;){if(d+1==this.curRanking){var l={};l.time=this.curTime,l.userinfo=c.username,r.push(l)}if(r.length<s.default.players.length+1){var m={};m.time,1==this.curRanking?m.time=Math.floor(r[r.length-1].time+300*r.length*Math.random()):r.length<1?m.time=Math.floor(this.curTime-Math.random()*s.default.players.length*100):m.time=Math.floor(v(r[r.length-1].time+100,this.curTime)),m.userinfo=s.default.players[this.rankingVehicles[d].id].userinfo.nickName,r.push(m)}d++}i=this.curRanking<=3,c.totalMatchWin+=1==this.curRanking?1:0,(t=cc.instantiate(this.matchScorePrefab)).getComponent("GameScore").setData(this.curRanking,this.curTime,this.gameData,i,this.levelData,r)}else if(this.sceneData.isAmusement){i=this.checkAmusementTask()&&e;var u=this.showAmusementTaskName(2);i?((t=cc.instantiate(this.boxAwardPrefab)).getComponent("MysticalBox").setLevelData(),t.on("onClose",function(){c._userGameData.amusementCountArr[this.sceneData.amusementType].win++,c.saveData();var e="amusement";c.getTotalAmusementCount()>=1&&!c.isUnlockAmusementAward&&(e="showAmusementAward"),cc.loading.loadScene("MainScene",{cmd:e,amusementType:this.sceneData.amusementType})},this)):(t=cc.instantiate(this.amusementOverPrefab)).getComponent("AmusementScore").setSceneData(this.gameData,i,u,this.setAmusementTaskValue())}else if(this.isNewGuidelines){i=!0,t=cc.instantiate(this.scoreWinPrefab);for(var g=cc.gameConfig.config.newGuidelinesScore,f=0;f<g.length;f++){var C={};C.task=g[f],C.finished=!0,r.push(C)}t.getComponent("GameScore").setData(this.curRanking,this.curTime,this.gameData,i,this.levelData,r,this.gameGuidelines)}else{if(this.levelData.isBoss){r=[];var y={};if(y.time=this.curTime,y.userinfo=c.username,r.push(y),this.curRanking<=1){t=cc.instantiate(this.scoreBossWinPrefab),i=!0;var S=this.taskNode.getChildByName("bossTask");S.getChildByName("off").active=!1,S.getChildByName("on").active=!0,this.gameData.levelStar=3}else i=!1,t=cc.instantiate(this.scoreBossLosPrefab)}else{for(var D=0;D<this.levelState.length;D++)this.checkTaskCondition(),this.showTaskName(D),this.levelState[D]&&h++;i=h>0,this.gameData.levelStar=h,t=cc.instantiate(this.scoreWinPrefab);for(var w=0;w<this.levelState.length;w++){var N={},b=parseInt(this.levelTask.type[w]),A=parseInt(this.levelTask.starsConditions[w]),M=void 0;switch(b){case 0:M=this.gameData.useAccelCount;break;case 1:M=Math.floor(this.curTime/100);break;case 2:M=this.curRanking;break;case 3:M=this.gameData.coins;break;case 4:M=this.gameData.diamonds;break;case 5:M=this.gameData.missCarCount;break;case 6:M=this.gameData.hitVehicleCount;break;case 7:M=this.gameData.missObstacleCount}N.task="<color=#FFFFFF><b>"+cc.gameConfig.config.scoreShowTaskName[b]+A+"/<b></c><color=#A40A0A><b>"+M+"</b></c>",N.finished=this.levelState[w],r.push(N)}}t.getComponent("GameScore").setData(this.curRanking,this.curTime,this.gameData,i,this.levelData,r)}if(e||this.onPause(),this.isMatch)this.overRankingLayout.parent.active=!0,this.overAmusementNode.active=!1,i?(this.overRankingLayout.getChildByName("title").active=!i,this.overRankingLayout.getChildByName("ranking").getComponent(cc.Sprite).spriteFrame=this.overRankingSprite[this.curRanking-1]):(this.overRankingLayout.getChildByName("title").getComponent(cc.Sprite).spriteFrame=this.rankGameFailure,this.overRankingLayout.getChildByName("ranking").active=!1);else if(this.sceneData.isAmusement)if(this.overRankingLayout.parent.active=!1,i){this.overAmusementNode.getChildByName("fail").active=!1;var k=this.overAmusementNode.getChildByName("win");k.active=!0,k.getChildByName("nums").getChildByName("count").getComponent(cc.Label).string=this.setAmusementTaskValue(),k.getChildByName("nums").getChildByName("title").getComponent(cc.Sprite).spriteFrame=this.modeTitleSprite[this.sceneData.amusementType],k.getChildByName("task").getChildByName("txt").getComponent(cc.RichText).string=this.showAmusementTaskName(2)}else this.overAmusementNode.getChildByName("fail").active=!0,this.overAmusementNode.getChildByName("win").active=!1;else this.overRankingLayout.parent.active=!0,this.overAmusementNode.active=!1,this.levelData.isBoss||!this.isAi?(this.overRankingLayout.getChildByName("title").getComponent(cc.Sprite).spriteFrame=i?this.overBossVictory:this.overBossFailure,this.overRankingLayout.getChildByName("ranking").active=!1):(this.overRankingLayout.getChildByName("title").active=!i,this.overRankingLayout.getChildByName("ranking").getComponent(cc.Sprite).spriteFrame=this.overRankingSprite[this.curRanking-1]);if(!this.sceneData.isAmusement){var T=Math.floor(this.curTime/6e3).toString();T.length<2&&(T="0"+T);var L=Math.floor((this.curTime-6e3*Math.floor(this.curTime/6e3))/100).toString();L.length<2&&(L="0"+L);var R=this.curTime.toString().charAt(this.curTime.toString().length-2)+this.curTime.toString().charAt(this.curTime.toString().length-1);R.length<2&&(R="0"+R),this.overTimeLayout.getChildByName("time1").getComponent(cc.Label).string=T,this.overTimeLayout.getChildByName("time2").getComponent(cc.Label).string=L,this.overTimeLayout.getChildByName("time3").getComponent(cc.Label).string=R}t.active=!1,this.node.addChild(t),this.overWinNode.parent.active=!0;var P=this.overWinNode.getComponent(cc.Animation);P.on("finished",function(){this.isShowOverWin=!0,(this.curRanking<=1||h>=3||i&&this.sceneData.isAmusement)&&(this.overFireworks.node.active=!0,this.overFireworks.playAnimation("\u70df\u82b1",0)),this.isNewGuidelines||p==n.default.toutiao&&o.default.isRecorder&&(console.log("\u6e38\u620f\u7ed3\u675f\u5f55\u5c4f"),o.default.gameIsWin=i,cc.eventCenter.emit("game_recoreder_stop")),this.isNewGuidelines||p==n.default.toutiao&&a.default.show("game");var e=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=function(){if(!this.isMatch&&i&&!this.sceneData.isAmusement){var s=0;this.schedule(function(){cc.audioGame.playStar(s),s++},.3,this.isNewGuidelines?3:this.gameData.levelStar)}this.isMatch&&(t.getComponent("GameScore").isShiled=e),t.active=!0}.bind(this);e&&this.scheduleOnce(s,1),!e&&s()}.bind(this);this.isMatch?this.scheduleOnce(function(){c.rankLevel<1&&this.curRanking>1?e():(this.overWinNode.parent.active=!1,this.overRankNode.getComponent("RankSettlement").gameRanking=this.curRanking,this.overRankNode.getComponent("RankSettlement").showPlayerRankInfo(),this.overRankNode.active=!0,this.overRankNode.on("onClose",e,this))},2):this.sceneData.isAmusement?this.scheduleOnce(function(){t.active=!0},2):1==this.levelData.getGift&&!c.getLevelBoxAwards(this.level)&&i||this.isNewGuidelines?this.scheduleOnce(function(){var t=cc.instantiate(this.boxAwardPrefab);if(this.isNewGuidelines){var i={giftType:[4,0,4,1],giftName:["\u5361\u724ckb","\u91d1\u6761","\u5361\u724ckb","\u94bb\u77f3"],giftNum:[2,6e3,1,20]};t.getComponent("MysticalBox").setLevelData(i,this.isNewGuidelines?this.gameGuidelines:null)}else t.getComponent("MysticalBox").setLevelData(this.levelData,this.isNewGuidelines?this.gameGuidelines:null);t.on("onClose",e,this),this.node.addChild(t)},2):e(!0)},this),P.play("over_win"),i?cc.audioGame.playWin():cc.audioGame.playfail()}},showCircleTips:function(){var e=cc.instantiate(this.circleTipsPrefab);e.getChildByName("circle").getComponent(cc.Label).string=this.gameData.levelStage+"",this.showCircleNode.children.length>0&&this.showCircleNode.removeAllChildren(),e.x=-e.width,this.showCircleNode.addChild(e);var t=this;e.opacity=0,e.runAction(cc.sequence(cc.spawn(cc.fadeTo(.5,255),cc.moveTo(.5,cc.v2(0,0))),cc.callFunc(function(){cc.audioGame.playCircleTips()}),cc.delayTime(1.5),cc.callFunc(function(){e.runAction(cc.sequence(cc.moveTo(1,cc.v2(cc.winSize.width+e.width,e.y)).easing(cc.easeBackIn()),cc.callFunc(function(){t.showCircleNode.removeAllChildren()})))})))},hitCheckPoint:function(){},getBonusTime:function(){return 100*Math.ceil(.85*this.gameData.time/100)},onVehicleAiPos:function(e){this.vehicleAiPosNodes=this.vehicleAiPosNodes||new Array,this.distRankinNodes=this.distRankinNodes||new Array;var t=this;e.sort(function(e,i){var s=i.dist-e.dist;return t.overAi[e.id]&&t.overAi[i.id]?s=t.overAi[e.id]-t.overAi[i.id]:t.overAi[e.id]?s=-1:t.overAi[i.id]&&(s=1),s}),this.rankingVehicles=e;for(var i=e.length,s=0;s<e.length;s++){var a=e[s],o=this.vehicleAiPosNodes[a.id];if(null==o){if(a.isBoss)o=cc.instantiate(this.distBossPrefab);else(o=cc.instantiate(this.distPrefab)).getComponent("Dist").setNum(a.id+1);this.vehicleAiPosNodes[a.id]=o,this.distBgNode.addChild(o,this.distNode.getSiblingIndex()-1)}o.dist=a.dist,o.x=19+(this.distBgNode.width-19)*a.dist;var n=s+1>=this.curRanking?s+2:s+1;o.getComponent("Dist").setNum(n);if(a.dist<=this.gameData.dist&&(!this.overAi[a.id]||this.overAi[a.id]>=this.ranking)&&(i>s&&(i=s),1+s),this.curRanking==this.sumRanking||this.isNewGuidelines&&this.gameGuidelines._shoWIndex<6)this.showAiTips.active=!1;else if(s==this.curRanking-1){this.showAiTips.active=!0,this.showAiDistLabel.string=Math.floor(1e3*(this.gameData.dist-a.dist))+"\u7c73",this.showAiRankLabel.string="\u7b2c"+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00"][s+1]+"\u540d"}}},onRankingChange:function(e){this.gameData.levelOver||(this.curRanking+=e,this.distLabel.string=this.curRanking,this.rankLabel.string=this.curRanking)},onReachEnd:function(e){var t=Object.keys(this.overAi).length+1;this.overAi[e.id]=t,this.overAiTime.push({id:e.id,time:this.curTime});var i=this.distRankinNodes[t-1];i&&i.setOver(t),this.gameData.levelOver||(this.ranking=this.ranking+1,this.isMatch?this.ranking>3&&this.raceOver(!1):this.levelData.isBoss&&this.ranking>1&&this.raceOver(!1))},timeOver:function(){if(this.timeOverNun--,this.timeOverNun<0)return this.raceOver(!1),this.unschedule(this.timeOver),void(this.timeOverLabel.node.active=!1);this.timeOverLabel.string=this.timeOverNun,this.timeOverLabel.node.active=!0},onSpeedUp:function(e){cc.audioComponent.play("button");var t=!1;this.speedUpCd<=0&&(this.gameData.infiniteAccel&&!this.isNewGuidelines?(t=!0,this.gameData.useAccelCount+=1):(this.speedUpCount>0?(this.speedUpCount--,t=!0):this.accelCount>0?(this.accelCount--,this.tryAccelCount>0?this.tryAccelCount--:this.isNewGuidelines||(c.setDaoJuNum(1,"accel",-1),c.saveData()),t=!0):this.isMatch?cc.toast.show(cc.gameConfig.gameString.rankGameAccelTips,.5,50):cc.toast.show(cc.gameConfig.gameString.speedUpCountTipsString_1,.5,50),this.speedUpCountLabel[0].string=this.speedUpCount+this.accelCount,this.speedUpCountLabel[1].string=this.speedUpCountLabel[0].string)),t&&(this.isNewGuidelines&&5==this.gameGuidelines._shoWIndex&&this.gameGuidelines.show(6),this.speedUpProgress=0,this.road.node.emit("onSpeedUp"),this.handTips&&(this.handTips.active=!1),this.setSpeedUpCd(5))},setSpeedUpCd:function(e){this.speedUpCd=e,e>0?(this.maskSpeedUpProgressBar[0].progress=0,this.maskSpeedUpProgressBar[1].progress):(this.maskSpeedUpProgressBar[0].progress=1,this.maskSpeedUpProgressBar[1].progress=1)},onAddSpeedUp:function(e){if(!(this.speedUpCd>0)){var t=this.speedUpProgress;this.speedUpProgress+=1,t<g&&this.speedUpProgress>=g&&(this.speedUpCountLabel[0].string=this.speedUpCount+this.accelCount,this.speedUpCountLabel[1].string=this.speedUpCountLabel[0].string),this.speedUpProgress<=g&&(this.speedUpLabel.active=!0,this.speedUpLabel.getComponent(cc.Label).string=parseInt(this.speedUpProgress/g*100)+",",this.speedUpLabel.getComponent(cc.Animation).play("speedUpLabel"));cc.delayTime(1.5),cc.easeInOut(2)}},onStartSprint:function(){this.showGameTips(0),this.road.node.emit("onSpeedUp",!0)},setSprintData:function(){this.gameData.startSprint=!0},showGameTips:function(e){var t=cc.instantiate(this.gameTips);t.getComponent(cc.Sprite).spriteFrame=this.tipsSprite[e],this.showTipsNode.children.length>0&&this.showTipsNode.removeAllChildren(),this.showTipsNode.addChild(t);var i=this;t.opacity=0,t.runAction(cc.sequence(cc.fadeTo(.5,255),cc.delayTime(1.5),cc.callFunc(function(){t.runAction(cc.sequence(cc.moveTo(.3,cc.v2(cc.winSize.width+t.width,t.y)).easing(cc.easeBackIn()),cc.callFunc(function(){i.showTipsNode.removeAllChildren()})))})))},onMissObstacle:function(){for(var e=0;e<this.levelTask.type.length;e++){7==parseInt(this.levelTask.type[e])&&(this.checkTaskCondition(),this.showTaskName(e))}this.gameData.missObstacleCount%3==0&&this.showGameTips(4)},onHitVehicle:function(){if(this.gameData.hitVehicleCount++,this.sceneData.isAmusement)this.showAmusementTaskName(1);else if(!this.isMatch&&!this.isNewGuidelines)for(var e=0;e<this.levelTask.type.length;e++){6==parseInt(this.levelTask.type[e])&&(this.checkTaskCondition(),this.showTaskName(e))}1==this.gameData.hitVehicleCount?this.showGameTips(2):8==this.gameData.hitVehicleCount?this.showGameTips(5):this.gameData.hitVehicleCount-1==0&&this.showGameTips(2)},onMissCar:function(){if(this.gameData.missCarCount++,this.sceneData.isAmusement)this.showAmusementTaskName(1);else if(!this.isMatch&&!this.isNewGuidelines)for(var e=0;e<this.levelTask.type.length;e++){5==parseInt(this.levelTask.type[e])&&(this.checkTaskCondition(),this.showTaskName(e))}(this.gameData.missCarCount%3==0||this.isNewGuidelines&&1==this.gameData.missCarCount)&&this.showGameTips(6),this.isNewGuidelines&&9==this.gameGuidelines._shoWIndex&&this.gameGuidelines.setTakeState(2)},onAddTimeSpeedUp:function(e){if(!(this.speedUpCd>0&&this.speedUpProgress<1)){var t=this.speedUpProgress;this.speedUpProgress+=g/f*e,t<g&&this.speedUpProgress>=g&&(this.speedUpCountLabel[0].string=this.speedUpCount+this.accelCount,this.speedUpCountLabel[1].string=this.speedUpCountLabel[0].string)}},onCoinUp:function(e,t){var i,s=0,a=0;if(3==e?(s=this.gameData.coins,this.sceneData.isAmusement&&(t=1),this.gameData.coins+=t,a=this.gameData.coins,this.coinLabel.node.stopAllActions(),i=this.coinLabel):(s=this.gameData.diamonds,this.gameData.diamonds+=t,a=this.gameData.diamonds,this.diamondLabel.node.stopAllActions(),i=this.diamondLabel),this.sceneData.isAmusement)this.showAmusementTaskName(1);else for(var o=0;o<this.levelTask.type.length;o++){e==parseInt(this.levelTask.type[o])&&(this.checkTaskCondition(),this.showTaskName(o))}var n=cc.delayTime(2),h=cc.easeOut(2);n.update=function(e){s+=(a-s)*h.easing(e),i.string=Math.ceil(s)+""}.bind(this),i.node.runAction(n)},onSpeedUpFoPause:function(){this.isSpeedUpFoPause=!0},onSpeedUpOver:function(){this.handTips&&(this.handTips.active=!0),this.setSpeedUpCd(0),this.isNewGuidelines&&1==this.gameGuidelines._shoWIndex&&this.gameGuidelines.show(2)},setDaoJuBtn:function(e){var t=this;if(this.levelAi)for(var i=0,s=0;s<e.length||i<2;s++){var a=e[s];null==a?(this.daojuBut[i].active=!1,this.daojuLabel[i].node.active=!1,this.daojuRightBtn[i].active=!1,this.daojuRightLabel[i].node.active=!1,i++):"accel"!=a&&function(){var e=i;t.daojuLabel[e].node.active=!0,t.daojuBut[e].id=a,t.daojuBut[e].count=t.isNewGuidelines?2:c.getDaoJuNum(a)||0,t.daojuBut[e].tryCount=t.tryProps&&t.tryProps[a]?parseInt(t.tryProps[a]):0,t.daojuRightLabel[e].node.active=!0,t.daojuRightBtn[e].id=a,t.daojuRightBtn[e].count=t.isNewGuidelines?2:c.getDaoJuNum(a)||0,t.daojuRightBtn[e].tryCount=t.tryProps&&t.tryProps[a]?parseInt(t.tryProps[a]):0,t.gameData.infiniteProp?(t.daojuLabel[e].node.active=!1,t.daojuRightLabel[e].node.active=!1,t.daojuBut[e].parent.getChildByName("tips_infinite").active=!0,t.daojuRightBtn[i].parent.getChildByName("tips_infinite").active=!0,1==c.levelNum&&1==t.level&&0==i&&(t.daojuHand=t.daojuRightBtn[i].parent.getChildByName("hand"),t.daojuHand.active=!0)):(t.daojuLabel[e].node.active=!0,t.daojuLabel[e].string=t.daojuBut[e].count+t.daojuBut[e].tryCount+"",t.daojuRightLabel[e].node.active=!0,t.daojuRightLabel[e].string=t.daojuRightBtn[e].count+t.daojuRightBtn[e].tryCount+"",t.daojuBut[e].parent.getChildByName("tips_infinite").active=!1,t.daojuRightBtn[i].parent.getChildByName("tips_infinite").active=!1),cc.loading.loadRes("prop/"+a,cc.SpriteFrame,function(t,i){this.daojuIcon[e].spriteFrame=i,this.daojuRightIcon[e].spriteFrame=i}.bind(t)),i++}()}else for(var o=0;o<this.daojuBut.length;o++)this.daojuBut[o].parent.active=!1,this.daojuRightBtn[o].parent.active=!1},onDaoJu:function(e,t){if(cc.audioComponent.play("button"),this.isNewGuidelines&&4==this.gameGuidelines._shoWIndex&&this.gameGuidelines.show(5),this.enabled&&this.daojuMaskLabel[t].progress<=0&&this.gameData.gameStart)if(this.daojuBut[t].tryCount>0||this.daojuBut[t].count>0||this.gameData.infiniteProp){this.daojuMaskLabel[t].progress=1,this.daojuRightMask[t].progress=1,this.daojuHand&&(this.daojuHand.active=!1);var i=this.daojuBut[t].id;if(this.gameData.infiniteProp||(this.daojuBut[t].isMask?(this.daojuBut[t].isMask=!1,this.daojuBut[t].count--,this.daojuRightBtn[t].isMask=!1,this.daojuRightBtn[t].count--):this.daojuBut[t].tryCount>0?(this.daojuBut[t].tryCount--,this.daojuRightBtn[t].tryCount--):(this.daojuBut[t].count--,this.daojuRightBtn[t].count--,this.isNewGuidelines||(c.setDaoJuNum(1,i,-1),c.saveData())),this.daojuLabel[t].string=this.daojuBut[t].count+this.daojuBut[t].tryCount+"",this.daojuRightLabel[t].string=this.daojuRightBtn[t].count+this.daojuRightBtn[t].tryCount+""),!this.road.onDaoJu(this.daojuIcon[t].spriteFrame,i)){this.daojuAinm.getComponent(cc.Sprite).spriteFrame=this.daojuIcon[t].spriteFrame;var s=this.daojuAinm.getComponent(cc.Animation);"smoke"==i?s.play("propUse_2"):s.play("propUse"),this.daojuAinm.active=!0,s.on("finished",function(){this.daojuAinm.active=!1,this.road.onDaoJuBehind(i)},this)}cc.audioGame.playUetProps()}else this.isMatch?cc.toast.show(cc.gameConfig.gameString.rankGamePropTips,.5,50):cc.toast.show(cc.gameConfig.gameString.daojuTipsString_1,.5,50)},onDistDaoju:function(e,t){var i=this.vehicleAiPosNodes[e.id];(cc.log("onDistDaoju",t),i)&&(i.getComponent("Dist").byProp(t),this.gameData.throwingPropCount++,this.showGameTips(3))},onAiDaoju:function(){0},onDestroy:function(){},recorderShare:function(){console.log("recorder.videoPath: "+o.default.vedioPath);var e=this;o.default.vedioPath&&(e.onPause(),tt.shareAppMessage({channel:"video",title:"\u7cbe\u5f69\u7684\u4e00\u5c40",imageUrl:"",query:"",extra:{videoPath:o.default.vedioPath,videoTopics:["\u98d9\u98d9\u98de\u8f66"]},success:function(){c.totalDiamonds+=50,cc.toast.show("\u83b7\u5f97\u94bb\u77f350",1),o.default.cleanVedioPath(),console.log("\u89c6\u9891\u5df2\u5206\u4eab"),e.onResume()},fail:function(t){console.log(t),"shareAppMessage:cancel"==t.errMsg&&cc.toast.show("\u53d6\u6d88\u5206\u4eab",1),e.onResume()}}))},resetDaojuCount:function(e){if(!this.gameData.infiniteAccel){var t=c.getDaoJuNum("accel");this.accelCount=t+this.tryAccelCount,this.speedUpCountLabel[0].string=t,this.speedUpCountLabel[1].string=this.speedUpCountLabel[0].string}this.gameData.infiniteProp||this.setDaoJuBtn(e)}});var g=3,f=15;function v(e,t){return Math.floor(Math.random()*(t-e))+e}cc._RF.pop()},{ChanneConfig:void 0,GameComponent:"GameComponent",GameDataCenter:void 0,GameGuidelines:"GameGuidelines",GamePause:"GamePause",Loading:void 0,Road:"Road",athletics:void 0,banner:void 0,buttonConfig:void 0,devices:void 0,login:void 0,recorder:void 0,share:void 0,statistics:void 0}],GameScore:[function(e,t,i){"use strict";cc._RF.push(t,"2af2ffKQrtMgZ69y+2lqlW8","GameScore");o(e("buttonConfig")),o(e("share"));var s=o(e("videoAd")),a=(o(e("statistics")),o(e("banner")),o(e("ChanneConfig")));function o(e){return e&&e.__esModule?e:{default:e}}var n=e("GameDataCenter").getInstance(),h=a.default.channelId,c=[1,2,3,4];cc.Class({extends:cc.Component,properties:{rankingItem:{default:[],type:cc.Node},getCoinLabel:cc.Label,getDiamondLabel:cc.Label,getPassItem:cc.Node,hitVehicleItem:cc.Node,perfectSprintItem:cc.Node,perfectMissCarItem:cc.Node,throwingPropItem:cc.Node,totalCoinsLabel:cc.Label,totalDiamondLabel:cc.Label,lineNode:cc.Node,totalNode:cc.Node,gameGetCoinsNode:cc.Node,gameGetDiamondsNode:cc.Node,showScoreArr:{default:[],type:cc.Node},bullionNode:cc.Node,diamondNode:cc.Node,showStar:dragonBones.ArmatureDisplay,showMvp:dragonBones.ArmatureDisplay,shiledTipsPrefab:cc.Prefab,fightingBtn:cc.Node,doubleBtn:cc.Node,thanksBtn:cc.Node,isShiled:!1},onLoad:function(){this.getTotalCoins=0,this.getTotalDiamonds=0,this.isPlayCoins=!1,this.isPlayDiamonds=!1,this.isDouble=!1,this.showPool=new cc.NodePool,this.initShowPool(),!this.sceneData.isNewGuidelines&&this.isPass&&(this.doubleBtn.active=!1,this.thanksBtn.active=!1),this.sceneData.isNewGuidelines&&(this.doubleBtn.getChildByName("icon_video").active=!1)},initShowPool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=new cc.Node;t.addComponent(cc.Sprite);for(var i=0;i<e;i++){var s=cc.instantiate(t);this.showPool.put(s)}},setData:function(e,t,i,s,a,o,h){this.ranking=e,this.curTime=t,this.overData=i,this.isPass=s,this.levelData=a,this.rankingData=o,this.gameGuidelines=h,this.starCount=this.overData.levelStar,this.awardCoin=0,this.operateAward=0,this.sceneData=cc.loading.getCustomData();var c=n.getLevelState(this.levelData.key),r=[];if(this.sceneData.isNewGuidelines&&(this.awardCoin=900),this.sceneData.isMatch||(n.totalMatchNum++,this.sceneData.isNewGuidelines?this.starCount=3:(n.totalGameNum++,this.levelData.isBoss?this.isPass&&(this.starCount=3,this.awardCoin=c?0:Number(this.levelData.awards[0])):this.isPass&&(this.awardCoin=c?0:Number(this.levelData.awards[this.levelData.awards.length-this.starCount])))),this.sceneData.isMatch||this.levelData.isBoss){for(var d=0;d<this.rankingData.length;d++)if(this.rankingItem[d]){if(!this.sceneData.isMatch&&this.rankingData.length>3&&3==d){this.rankingItem[d].getChildByName("name").getComponent(cc.Label).string=this.rankingData[d].userinfo;break}if((this.isPass||!this.levelData.isBoss||this.sceneData.isMatch)&&d<3)(m=Math.floor(this.rankingData[d].time/6e3).toString()).length<2&&(m="0"+m),(u=Math.floor((this.rankingData[d].time-6e3*Math.floor(this.rankingData[d].time/6e3))/100).toString()).length<2&&(u="0"+u),(p=this.rankingData[d].time.toString().charAt(this.rankingData[d].time.toString().length-2)+this.rankingData[d].time.toString().charAt(this.rankingData[d].time.toString().length-1)).length<2&&(p="0"+p),this.rankingItem[d].getChildByName("time").getChildByName("time1").getComponent(cc.Label).string=m,this.rankingItem[d].getChildByName("time").getChildByName("time2").getComponent(cc.Label).string=u,this.rankingItem[d].getChildByName("time").getChildByName("time3").getComponent(cc.Label).string=p;this.rankingItem[d].getChildByName("name").getComponent(cc.Label).string=this.rankingData[d].userinfo,this.levelData.isBoss||(this.rankingItem[d].getChildByName("self").active=e-1==d)}}else{for(var l=0;l<this.rankingData.length;l++)this.rankingItem[l]&&(this.rankingItem[l].getChildByName("star").getChildByName("on").active=this.rankingData[l].finished,this.rankingItem[l].getChildByName("star").getChildByName("off").active=!this.rankingData[l].finished,this.rankingItem[l].getChildByName("txt").getComponent(cc.RichText).string=this.rankingData[l].task,this.rankingItem[l].getChildByName("done").active=this.rankingData[l].finished,r.push(this.rankingData[l].finished));var m,u,p;(m=Math.floor(t/6e3).toString()).length<2&&(m="0"+m),(u=Math.floor((t-6e3*Math.floor(t/6e3))/100).toString()).length<2&&(u="0"+u),(p=t.toString().charAt(t.toString().length-2)+t.toString().charAt(t.toString().length-1)).length<2&&(p="0"+p),this.node.getChildByName("scorePanel").getChildByName("time").getComponent(cc.Label).string="\u7d2f\u8ba1\u8017\u65f6: "+m+":"+u+":"+p}if(this.totalCoinsLabel.string="0",this.totalDiamondLabel.string="0",this.hitAward=0,this.sprintAward=0,this.missAward=0,this.throwingAward=0,this.setItemScore(),this.sceneData.isMatch||this.sceneData.isNewGuidelines||(this.levelData.isBoss||n.setLevelTask(this.levelData.key,r),this.isPass&&n.setLevelFinish(this.levelData.key),n.setLevelStars(this.levelData.key,this.starCount),1!=this.levelData.key&&4!=this.levelData.key||(this.isFirst=0==n.getLevelTime(this.levelData.key)),this.isPass&&n.setLevelTime(this.levelData.key,this.curTime)),s&&!this.sceneData.isNewGuidelines){for(var g=0;g<this.rankingItem.length;g++)this.rankingItem[g].opacity=0;for(var f=0;f<this.showScoreArr.length;f++)this.showScoreArr[f].opacity=0}n.saveData()},start:function(){n.gameSocoreCount++,this.rankingCount=0,this.otherCount=0,this.type=0,this.sceneData.isNewGuidelines&&(this.getTotalCoins=this.overData.coins+this.awardCoin+this.hitAward+this.sprintAward+this.missAward+this.throwingAward,this.getTotalDiamonds=this.overData.diamonds,this.totalCoinsLabel.string=this.getTotalCoins+"",this.totalDiamondLabel.string=this.getTotalDiamonds+"",this.gameGuidelines.show(13)),this.sceneData.isMatch?this.isPass?(this.showMvp.on(dragonBones.EventObject.COMPLETE,this.showMvpComplete,this),this.showNodeAnimation(this.rankingItem)):(this.scheduleOnce(function(){if(this.isShiled){var e=cc.instantiate(this.shiledTipsPrefab),t=this.rankingItem[this.ranking-1];t.addChild(e),e.setPosition(cc.v2(-t.width/2,t.height/2-e.height/2)),e.setScale(2),e.runAction(cc.sequence(cc.scaleTo(.5,1),cc.callFunc(function(){var i=cc.instantiate(this.shiledTipsPrefab);t.addChild(i),i.setPosition(cc.v2(-t.width/2,t.height/2-e.height/2)),i.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,1.3),cc.fadeTo(.5,150)),cc.fadeOut(.3),cc.callFunc(function(){})))},this)))}},1),this.showAddScoreItem()):this.isPass?(this.showStar.on(dragonBones.EventObject.COMPLETE,this.showStarComplete,this),(this.sceneData.isMatch||this.levelData.isBoss)&&this.showMvp.on(dragonBones.EventObject.COMPLETE,this.showMvpComplete,this),this.showStar.playAnimation(this.starCount+"",1)):(this.showStar&&(this.showStar.node.active=!1),this.levelData.isBoss&&cc.audioComponent.play("boss_smile"),this.showAddScoreItem()),h!=a.default.toutiao||this.sceneData.isNewGuidelines||window.InterstitialAd.createInterstitialAdByAdId("over")},showNodeAnimation:function(e){var t=this,i=0==t.type?t.rankingCount:t.otherCount;if(i<e.length){var s=i,a=e[s].position;0==t.type&&e[s].setPosition(cc.v2(-cc.winSize.width/2,a.y));var o=1==t.type?cc.fadeTo(.3,255):cc.spawn(cc.moveTo(.3,a),cc.fadeTo(.3,255));e[s].runAction(cc.sequence(o,cc.callFunc(function(){0==t.type?t.rankingCount++:t.otherCount++,t.showNodeAnimation(0==t.type?t.rankingItem:t.showScoreArr)})))}else t.otherCount<t.showScoreArr.length?1==this.ranking&&(this.sceneData.isMatch||this.levelData.isBoss)?(this.showMvp.node.active=!0,this.showMvp.playAnimation("MVP",1)):(this.type=1,this.showNodeAnimation(this.showScoreArr)):1==this.type&&(this.showAddScoreItem(),this.doubleBtn.active=!0,this.doubleBtn.getComponent(cc.Animation).play(),this.thanksBtn.active=!1,this.scheduleOnce(function(){this.thanksBtn.active=!0},2))},showScoreAnimation:function(e,t){var i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=t,n=1==a?this.bullionNode:this.diamondNode,h=0,c=0,r=cc.delayTime(4),d=cc.easeOut(4);1==a?(h=this.addCoinsAction,this.addCoinsAction+=t,c=this.addCoinsAction,this.isPlayCoins||(this.isPlayCoins=!0,this.schedule(function(){cc.audioComponent.play("game_coins"),cc.log("game_coins")},.1,this.showCount)),r.update=function(e){h+=(c-h)*d.easing(e),this.totalCoinsLabel.string=Math.ceil(h)+""}.bind(this),this.totalCoinsLabel.node.runAction(r)):2==a&&(h=this.getTotalDiamonds,this.addDiamondAction+=t,c=this.addDiamondAction,this.isPlayDiamonds||(this.isPlayDiamonds=!0,this.schedule(function(){cc.audioComponent.play("game_diamonds")},.1,this.showCount)),r.update=function(e){h+=(c-h)*d.easing(e),this.totalDiamondLabel.string=Math.ceil(h)+""}.bind(this),this.totalDiamondLabel.node.runAction(r)),this.node.runAction(cc.sequence(cc.repeat(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){var t=void 0;if(i.showPool.size()>0)t=i.showPool.get();else{var a=new cc.Node;a.addComponent(cc.Sprite),t=cc.instantiate(a)}var h=e.parent.convertToWorldSpaceAR(e);h=i.node.convertToNodeSpaceAR(h),t.setPosition(h),t.getComponent(cc.Sprite).spriteFrame=n.getComponent(cc.Sprite).spriteFrame,i.node.addChild(t);var c=n.convertToWorldSpaceAR(new cc.Vec2(0,0));c=i.node.convertToNodeSpaceAR(c),t.runAction(cc.sequence(cc.moveTo(.15,c),cc.callFunc(function(){i.showPool.size()<20?i.showPool.put(t):t.destroy()}))),o-=s,e.parent.getChildByName("award")&&(e.parent.getChildByName("award").getComponent(cc.Label).string=(o<0?0:o)+"")})),o/s),cc.delayTime(.3),cc.callFunc(function(){cc.log("SaveData"),e.parent.getChildByName("award")&&(e.parent.getChildByName("award").getComponent(cc.Label).string="0"),i.addCount<i.showCount&&i.isDouble&&(i.addCount++,i.addCount>=i.showCount&&(i.sceneData.isMatch?i.returnGameMode():i.onReturnMap()))})))},showStarComplete:function(){this.levelData.isBoss&&cc.audioComponent.play("boss_cry"),this.sceneData.isNewGuidelines||this.showNodeAnimation(this.rankingItem)},showMvpComplete:function(){this.sceneData.isNewGuidelines||(this.type=1,this.showNodeAnimation(this.showScoreArr))},showAddScoreItem:function(){if(this.sceneData.isNewGuidelines)return this.getTotalCoins=this.overData.coins+this.awardCoin+this.hitAward+this.sprintAward+this.missAward+this.throwingAward,this.getTotalDiamonds=this.overData.diamonds,n.totalCoins+=2*this.getTotalCoins,n.totalDiamonds+=2*this.getTotalDiamonds,n.saveData(),this.totalCoinsLabel.string=2*this.getTotalCoins+"",this.totalDiamondLabel.string=2*this.getTotalDiamonds+"",void cc.loading.loadScene("MainScene",{cmd:"upgradeGuidelines",isFailure:!this.isPass});if(this.isDouble||(this.addCoinsAction=0,this.addDiamondAction=0,this.getTotalCoins=this.overData.coins+this.awardCoin+this.hitAward+this.sprintAward+this.missAward+this.throwingAward,this.getTotalDiamonds=this.overData.diamonds),n.totalCoins+=this.getTotalCoins,n.totalDiamonds+=this.getTotalDiamonds,this.showCount=0,this.addCount=0,this.overData.coins>0&&this.showCount++,this.overData.diamonds>0&&this.showCount++,this.awardCoin>0&&this.showCount++,this.hitAward>0&&this.showCount++,this.sprintAward>0&&this.showCount++,this.missAward>0>0&&this.showCount++,this.throwingAward>0&&this.showCount++,console.log("this.showCount",this.showCount),this.gameGetCoinsNode&&this.overData.coins>0){var e=Math.floor(10*this.overData.coins/10);this.showScoreAnimation(this.gameGetCoinsNode.getChildByName("icon"),this.overData.coins,e)}if(this.gameGetDiamondsNode&&this.overData.diamonds>0){e=Math.floor(10*this.overData.diamonds/10);this.showScoreAnimation(this.gameGetDiamondsNode.getChildByName("icon"),this.overData.diamonds,e,2)}if(this.getPassItem){e=Math.floor(this.awardCoin/10);this.showScoreAnimation(this.getPassItem.getChildByName("icon"),this.awardCoin,e)}if(this.hitVehicleItem&&this.hitAward>0){e=Math.floor(this.hitAward/10);this.showScoreAnimation(this.hitVehicleItem.getChildByName("icon"),this.hitAward,e)}if(this.perfectSprintItem&&this.sprintAward>0){e=Math.floor(this.sprintAward/10);this.showScoreAnimation(this.perfectSprintItem.getChildByName("icon"),this.sprintAward,e)}if(this.perfectMissCarItem&&this.missAward>0){e=Math.floor(this.missAward/10);this.showScoreAnimation(this.perfectMissCarItem.getChildByName("icon"),this.missAward,e)}if(this.throwingPropItem&&this.throwingAward>0){e=Math.floor(this.throwingAward/10);this.showScoreAnimation(this.throwingPropItem.getChildByName("icon"),this.throwingAward,e)}},setItemScore:function(){this.getCoinLabel.string=""+this.overData.coins,this.getDiamondLabel.string=""+this.overData.diamonds,this.getPassItem&&(this.getPassItem.getChildByName("award").getComponent(cc.Label).string=""+this.awardCoin),this.hitVehicleItem&&(this.hitAward=20*this.overData.hitVehicleCount,this.hitVehicleItem.getChildByName("nums").getComponent(cc.Label).string=this.overData.hitVehicleCount+"\u6b21",this.hitVehicleItem.getChildByName("award").getComponent(cc.Label).string=this.hitAward+""),this.perfectSprintItem&&(this.sceneData.isMatch,this.sprintAward=this.overData.missSprint?0:100,this.perfectSprintItem.getChildByName("nums").getComponent(cc.Label).string=(this.overData.missSprint?0:1)+"\u6b21",this.perfectSprintItem.getChildByName("award").getComponent(cc.Label).string=this.sprintAward+""),this.perfectMissCarItem&&(this.perfectMissCarItem.getChildByName("nums").getComponent(cc.Label).string=this.overData.missCarCount+"\u6b21",this.missAward=20*this.overData.missCarCount,this.perfectMissCarItem.getChildByName("award").getComponent(cc.Label).string=this.missAward+""),this.throwingPropItem&&(this.throwingPropItem.getChildByName("nums").getComponent(cc.Label).string=this.overData.throwingPropCount+"\u6b21",this.throwingAward=20*this.overData.throwingPropCount,this.throwingPropItem.getChildByName("award").getComponent(cc.Label).string=this.throwingAward+""),this.awardCount=0,1==this.ranking&&this.awardCount++,this.overData.coins>0&&this.awardCount++,this.overData.diamonds>0&&this.awardCount++,this.awardCoin>0&&this.awardCount++,this.hitAward>0&&this.awardCount++,this.sprintAward>0&&this.awardCount++,this.missAward>0>0&&this.awardCount++,this.throwingAward>0&&this.awardCount++,this.awardCount>0?(this.doubleBtn.active=!0,this.fightingBtn.active=!1,this.thanksBtn.active=!0):(this.doubleBtn.active=!1,this.fightingBtn.active=!0,this.thanksBtn.active=!1)},onDoubleReceive:function(){cc.audioComponent.play("button"),this.sceneData.isNewGuidelines&&this.gameGuidelines.hide(13);var e=function(){this.isDouble=!0,this.isPlayCoins=!1,this.isPlayDiamonds=!1,cc.toast.show("\u5df2\u83b7\u5f97\u7ffb\u500d\u5956\u52b1",1),this.showAddScoreItem(!1),this.doubleBtn.getComponent(cc.Button).interactable=!1,this.doubleBtn.getComponent(cc.Animation).stop(),cc.uiCenter.setState(this.doubleBtn.getChildByName("bg").getComponent(cc.Sprite),0),cc.uiCenter.setState(this.doubleBtn.getChildByName("icon_video").getComponent(cc.Sprite),0)}.bind(this);this.sceneData.isNewGuidelines?e():s.default.show("bisaijiesuan",e)},onClose:function(){cc.audioComponent.play("button"),this.sceneData.isNewGuidelines||this.onReturnMap()},onReturnMap:function(){var e,t;n.totalGameNum>=1&&!n._userGameData.isUnlockAchievement?e="showAchievement":this.isPass&&1==this.levelData.key&&this.isFirst?e="plateGuidelines":n.getTotalStar()>=13&&!n._userGameData.isUnlockRankModeArr[0]?(e="rankGuidelines",t=0):n.getTotalStar()>=45&&!n._userGameData.isUnlockRankModeArr[1]?(e="UnlockObstacleMode",t=1):n.getTotalStar()>=65&&!n._userGameData.isUnlockRankModeArr[2]?(e="UnlockPropsMode",t=2):e="showMap",cc.loading.loadScene("MainScene",{cmd:e,isFailure:!this.isPass,type:t})},onRankGame:function(){cc.audioComponent.play("button"),this.returnGameMode()},returnGameMode:function(){var e,t="showGameMode";if(n.totalMatchNum>=1&&!n.isUnlockRankAward)t="showRankAward";else if(1==this.ranking&&this.sceneData.isMatch&&!n._userGameData.isUnlockAmuseModeArr[3])for(var i=n.getRankData(),s=i.id,a=i.starNum,o=["UnlockOvertaskMode","UnlockCollideMode","UnlockBullionMode","UnlockDiamondMode"],h=0;h<c.length;h++){if(s>=n.getRankData(n.getRankIdStar(c[h])).id&&a>=1&&!n._userGameData.isUnlockAmuseModeArr[h]){t=o[h],e=h;break}}cc.loading.loadScene("MainScene",{cmd:t,isFailure:!this.isPass,rankType:this.sceneData.rankMap,type:e})},onEnable:function(){},onDisable:function(){}}),cc._RF.pop()},{ChanneConfig:void 0,GameDataCenter:void 0,banner:void 0,buttonConfig:void 0,share:void 0,statistics:void 0,videoAd:void 0}],LicenseUp:[function(e,t,i){"use strict";cc._RF.push(t,"f8003eYwW1CpJCg/rpvWiZW","LicenseUp");var s=n(e("buttonConfig")),a=n(e("statistics")),o=n(e("share"));function n(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{licenseSprite1:cc.Sprite,licenseSprite2:cc.Sprite,shareBut:{default:null,type:cc.Button}},setData:function(e){this.level=e},start:function(){cc.loader.loadRes("license/license_"+(this.level-1),cc.SpriteFrame,function(e,t){!e&&this.isValid&&(this.licenseSprite1.spriteFrame=t)}.bind(this)),cc.loader.loadRes("license/license_"+this.level,cc.SpriteFrame,function(e,t){!e&&this.isValid&&(this.licenseSprite2.spriteFrame=t)}.bind(this)),s.default.isShow("xuanyaoyixia")?this.shareBut.node.active=!0:this.shareBut.node.active=!1},onShareFriend:function(){cc.audioComponent.play("button"),a.default.setSceneEvent("\u9a7e\u7167\u5347\u7ea7-\u7b49\u7ea7"+this.level,"\u70b9\u51fb","\u9a7e\u7167\u5347\u7ea7-\u70ab\u8000\u4e00\u4e0b"),o.default.shareToSociety({shareType:2,buttonKey:"jiazhaoshengji-xuanyaoyixia"},function(){})},onClose:function(){cc.audioComponent.play("button"),this.node.destroy()}}),cc._RF.pop()},{buttonConfig:void 0,share:void 0,statistics:void 0}],MatchLos:[function(e,t,i){"use strict";cc._RF.push(t,"25f1ccjx6pD6ZdyO0IEGuqR","MatchLos");var s=c(e("banner")),a=c(e("athletics")),o=c(e("ChanneConfig")),n=c(e("statistics")),h=c(e("Portrait"));function c(e){return e&&e.__esModule?e:{default:e}}var r=e("GameDataCenter").getInstance(),d=o.default.channelId;cc.Class({extends:cc.Component,properties:{myTotalCoins:cc.Label,againBut:cc.Button,icon1:cc.Sprite,icon2:cc.Sprite,nickName1:cc.Label,nickName2:cc.Label,profileBut:cc.Button,portrait2:h.default},initPlayerInfo:function(){5==d?(this.showProfile(a.default.player2.userinfo,this.icon2,this.nickName2),this.portrait2&&this.portrait2.setAvatarUrl(a.default.player2.userinfo.avatarUrl)):(this.showProfile(a.default.player2.userinfo,this.icon2,this.nickName2),this.portrait2&&this.portrait2.setAvatarUrl(a.default.player2.userinfo.avatarUrl),this.profileBut.node.active=!1)},showProfile:function(e,t,i){e?i&&(i.string=e.nickName||e.nickname||""):(t&&(t.spriteFrame=null),i&&(i.string=""))},start:function(){this.initPlayerInfo(),this.myTotalCoins.string=r.totalCoins,s.default.show("main"),n.default.setSceneEvent("\u5339\u914d\u6311\u6218","\u5173\u5361\u72b6\u6001","\u901a\u5173\u5931\u8d25")},onAgain:function(){a.default.disconnectSoket(),cc.audioComponent.play("button"),this.node.destroy(),cc.loading.loadScene("MainScene",{cmd:"showMatch"})},onClose:function(){a.default.disconnectSoket(),cc.audioComponent.play("button"),this.node.destroy(),cc.loading.loadScene("MainScene",{cmd:"showMatch"})},onEnable:function(){},onDisable:function(){s.default.hide()},onViewProfile:function(){5==d?window.wbeLogin.viewProfile(a.default.player2.userinfo.clientid):(cc.toast.show(cc.gameConfig.gameString.viewProfileFail,1),this.profileBut.interactable=!1)}}),cc._RF.pop()},{ChanneConfig:void 0,GameDataCenter:void 0,Portrait:void 0,athletics:void 0,banner:void 0,statistics:void 0}],MatchScore:[function(e,t,i){"use strict";cc._RF.push(t,"48517xoxT1FaK1U5npr8sqm","MatchScore");var s=r(e("share")),a=r(e("buttonConfig")),o=r(e("statistics")),n=r(e("banner")),h=r(e("athletics")),c=r(e("ChanneConfig"));function r(e){return e&&e.__esModule?e:{default:e}}var d=e("GameDataCenter").getInstance(),l=c.default.channelId;cc.Class({extends:cc.Component,properties:{myTotalCoins:cc.Label,buttonBox1:cc.Node,shareBut:cc.Button,againBut:cc.Button,buttonBox2:cc.Node,feedBackBut:cc.Button,matchBut:cc.Button,againBut2:cc.Button,exitBut:cc.Button,labelTip:cc.Label,playerNode:cc.Node,winnerPrefab:cc.Prefab,loserPrefab:cc.Prefab,isPass:cc.Integer},onLoad:function(){this.buttonBox1.active=this.buttonBox2.active=!1,this.shareBut.node.active=!1;var e=this.isPass?cc.instantiate(this.winnerPrefab):cc.instantiate(this.loserPrefab);this.playerNode.addChild(e),this.player2=h.default.player2,5==l?this.buttonBox2.active=!0:(this.buttonBox1.active=!0,a.default.isShow("xuanyaoyixia")?this.isPass&&this.shareBut&&(this.shareBut.node.active=!0):this.isPass&&this.shareBut&&(this.shareBut.node.active=!1))},start:function(){if(d.gameSocoreCount++,this.myTotalCoins.string=d.totalCoins,this.labelTip.string=cc.gameConfig.gameString.gameOver,n.default.show("main"),5==l){var e=this.player2.bike.isAi,t=d.totalCoins>=2e3||d.freeMatchNum>0||d.ticket>0;(0==t||e)&&(this.againBut2.interactable=!1,h.default.disconnectSoket()),0==t?this.labelTip.string=cc.gameConfig.gameString.gameOver1:e?this.labelTip.string=cc.gameConfig.gameString.gameOver2:h.default.on("onRestartGame",this.onRestartGame.bind(this)),h.default.on("onLeaveRoom",this.onLeaveRoom.bind(this))}},onShareFriend:function(){cc.audioComponent.play("button"),o.default.setSceneEvent("\u5339\u914d-\u7ed3\u7b97","\u70b9\u51fb","\u80dc\u5229-\u70ab\u8000\u4e00\u4e0b"),s.default.shareToSociety({shareType:2,buttonKey:"shengli-xuanyaoyixia"},function(){})},onRestartGame:function(e,t){e?this.labelTip.string=e:0==t?(this.labelTip.string=this.sendRequest?cc.gameConfig.gameString.gameRequest:cc.gameConfig.gameString.gameResponse,this.sendRequest=!1):(this.schedule(this.onStartGame,1),this.startGameTime=3,this.labelTip.string=cc.gameConfig.gameString.gameConfirm+this.startGameTime)},onStartGame:function(){this.startGameTime--,this.labelTip.string=cc.gameConfig.gameString.gameConfirm+this.startGameTime,this.startGameTime<=0&&(this.unschedule(this.onStartGame),d.freeMatchNum>0?d.freeMatchNum-=1:d.ticket>0?d.ticket-=1:d.totalCoins-=1e3,d.saveData(),cc.loading.loadScene("GameScene",{level:0,daojuList:["accel"],accelOn:!1,isMatch:!0},!0))},onLeaveRoom:function(e){e&&(this.labelTip.string=cc.gameConfig.gameString.gameOver2,this.againBut2.interactable=!1,h.default.disconnectSoket())},onAgain:function(){h.default.disconnectSoket(),cc.audioComponent.play("button"),this.node.destroy(),cc.loading.loadScene("MainScene",{cmd:"showMatch"})},onClose:function(){h.default.disconnectSoket(),cc.audioComponent.play("button"),this.node.destroy(),cc.loading.loadScene("MainScene")},onFeedBack:function(){window.wbeLogin.feedback()},onRestart:function(){this.againBut2.interactable=!1,this.sendRequest||(this.sendRequest=!0),h.default.restart()}}),cc._RF.pop()},{ChanneConfig:void 0,GameDataCenter:void 0,athletics:void 0,banner:void 0,buttonConfig:void 0,share:void 0,statistics:void 0}],MatchWin:[function(e,t,i){"use strict";cc._RF.push(t,"1b471fm6lhIypV+lU3pbg2x","MatchWin");var s=c(e("banner")),a=c(e("athletics")),o=c(e("ChanneConfig")),n=c(e("statistics")),h=c(e("Portrait"));function c(e){return e&&e.__esModule?e:{default:e}}var r=e("GameDataCenter").getInstance(),d=o.default.channelId;cc.Class({extends:cc.Component,properties:{myTotalCoins:cc.Label,againBut:cc.Button,icon1:cc.Sprite,icon2:cc.Sprite,nickName1:cc.Label,nickName2:cc.Label,profileBut:cc.Button,portrait2:h.default},initPlayerInfo:function(){5==d?(this.showProfile(a.default.player2.userinfo,this.icon2,this.nickName2),this.portrait2&&this.portrait2.setAvatarUrl(a.default.player2.userinfo.avatarUrl)):(this.showProfile(a.default.player2.userinfo,this.icon2,this.nickName2),this.portrait2&&this.portrait2.setAvatarUrl(a.default.player2.userinfo.avatarUrl),this.profileBut.node.active=!1)},showProfile:function(e,t,i){e?i&&(i.string=e.nickName||e.nickname||""):(t&&(t.spriteFrame=null),i&&(i.string=""))},onLoad:function(){r.totalCoins+=2e3,r.saveData()},start:function(){this.initPlayerInfo(),this.myTotalCoins.string=r.totalCoins,s.default.show("main"),n.default.setSceneEvent("\u5339\u914d\u6311\u6218","\u5173\u5361\u72b6\u6001","\u901a\u5173\u6210\u529f")},onAgain:function(){a.default.disconnectSoket(),cc.audioComponent.play("button"),this.node.destroy(),cc.loading.loadScene("MainScene",{cmd:"showMatch"})},onClose:function(){a.default.disconnectSoket(),cc.audioComponent.play("button"),this.node.destroy(),cc.loading.loadScene("MainScene")},onEnable:function(){},onDisable:function(){s.default.hide()},onViewProfile:function(){5==d?window.wbeLogin.viewProfile(a.default.player2.userinfo.clientid):(cc.toast.show(cc.gameConfig.gameString.viewProfileFail,1),this.profileBut.interactable=!1)}}),cc._RF.pop()},{ChanneConfig:void 0,GameDataCenter:void 0,Portrait:void 0,athletics:void 0,banner:void 0,statistics:void 0}],Moto:[function(e,t,i){"use strict";cc._RF.push(t,"376efd27LRBtIsDYrGUcq3t","Moto");var s=e("GameComponent");cc.Class({extends:s,statics:{newCar:function(e){var t=cc.Node().addComponent("Car");return t.carFrame=e,t},loadRes:function(e,t){var i="game/vehicle/newMoto/"+e;null==t[i]&&cc.loading.loadRes(i,cc.SpriteAtlas,function(e,s,a){t[i]=s})},loadRes2:function(e,t){var i="game/vehicle/moto/"+e+"_0",s="game/vehicle/moto/"+e+"_1",a="game/vehicle/moto/"+e+"_2";if(null==t[i]&&cc.loading.loadRes(i,cc.SpriteAtlas,function(e,s,a){t[i]=s}),null==t[s]&&cc.loading.loadRes(s,cc.SpriteAtlas,function(e,i,a){t[s]=i}),null==t[a]&&cc.loading.loadRes(a,cc.SpriteAtlas,function(e,i,s){t[a]=i}),"moto1"==e){var o="game/vehicle/moto/"+e+"_3";null==t[o]&&cc.loading.loadRes(o,cc.SpriteAtlas,function(e,i,s){t[o]=i});var n="game/vehicle/moto/"+e+"_4";null==t[n]&&cc.loading.loadRes(n,cc.SpriteAtlas,function(e,i,s){t[n]=i})}}},properties:{motoFrame:{default:[],type:cc.SpriteFrame},carFrame:{default:[],type:cc.SpriteFrame},motoFrame0:{default:[],type:cc.SpriteFrame},motoFrame1:{default:[],type:cc.SpriteFrame},motoFrame2:{default:[],type:cc.SpriteFrame},motoFrame3:{default:[],type:cc.SpriteFrame},motoFrame4:{default:[],type:cc.SpriteFrame},_motoFrameAll:{default:[],type:Array},hooshNode0:cc.Node,hooshNode1:cc.Node,hooshNode2:cc.Node,motoSprite:cc.Sprite,carSprite:cc.Sprite,motoFarmeURL:"moto15",bossIcon:cc.Node,yunIcon:cc.Node},ctor:function(){},setFarmeURL:function(e){this.motoFarmeURL=e},onLoad:function(){cc.log("onLoad1-1"),cc.loading.getCustomData().isMatch&&(this.motoFarmeURL="moto1"),this.motoDir="game/vehicle/newMoto/"+this.motoFarmeURL;for(var e=0;e<5;e++)this._motoFrameAll[e]=new Array;cc.loading.loadRes(this.motoDir,cc.SpriteAtlas,function(e,t){for(var i=0;i<5;i++)for(var s=0;s<31;s++){var a=31*i+s+1;a=a<10?"0"+a:a;var o=t.getSpriteFrame("moto_"+a);this._motoFrameAll[i][s]=o}this.motoSprite.spriteFrame=this._motoFrameAll[0][15],this.motoFrame=this._motoFrameAll[0]}.bind(this)),this.motoSprite.spriteFrame=this.motoFrame[15],this.isAccelerating=!1,this.isAccelerating?(this.hooshNode0.active=!0,this.hooshNode1.active=!0,this.hooshNode2.active=!0):(this.hooshNode0.active=!1,this.hooshNode1.active=!1,this.hooshNode2.active=!1),this.bossIconX=0,this.isBoss?this.bossIcon.active=!0:this.bossIcon.active=!1,this.yunIcon.active=!1},start:function(){this.maxSteer=1800,this.steerEaseX=0},setRotation:function(e){this.steerEaseX=e,this.motoSprite.spriteFrame=this.motoFrame[Math.floor(-e/7e3*15+15)+1]},onYun:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.scheduleOnce(function(){this.yunIcon.active=!1},e),this.yunIcon.active=!0},setFrame:function(e){if(this.carSprite.spriteFrame=this.carFrame[e],this.bossIcon.x=3.5*(e-15)+this.bossIconX,this.yunIcon.x=3.5*(e-15)+this.bossIconX,e>15)e=15+Math.round((e-15)/15*15);else if(e<15)e=15-Math.round((15-e)/15*15);this.motoSprite.spriteFrame=this.motoFrame[e]},setSteerX:function(e){e>.3?(this.motoFrame=this._motoFrameAll[2],this.bossIconX=10):e>.7?(this.motoFrame=this._motoFrameAll[4],this.bossIconX=30):e<-.3?(this.motoFrame=this._motoFrameAll[1],this.bossIconX=-10):e<-.7?(this.motoFrame=this._motoFrameAll[3],this.bossIconX=-30):(this.motoFrame=this._motoFrameAll[0],this.bossIconX=0)},update:function(e){this.hooshNode1.opacity=255*(.2*Math.random()+.5),this.hooshNode1.angle=-5*-this.steerEaseX/this.maxSteer},onDestroy:function(){cc.log("onDestroy+++++++++++++")}}),cc._RF.pop()},{GameComponent:"GameComponent"}],MyMoto:[function(e,t,i){"use strict";cc._RF.push(t,"a335faSJVRD46oAmNIMfgLL","MyMoto");var s=function(e){return e&&e.__esModule?e:{default:e}}(e("buttonConfig"));var a=e("GameDataCenter").getInstance(),o=e("GameComponent");cc.Class({extends:o,statics:{newCar:function(e){var t=cc.Node().addComponent("Car");return t.motoFrame=e,t}},properties:{motoFrame:{default:[],type:cc.SpriteFrame},testMotoFrame:{default:[],type:cc.SpriteFrame},hooshNode0:cc.Node,hooshNode1:cc.Node,hooshNode2:cc.Node,motoSprite:cc.Sprite,yunIcon:cc.Node,speedEffect:sp.Skeleton,leftSpark:dragonBones.ArmatureDisplay,rightSpark:dragonBones.ArmatureDisplay,tailGasNode:cc.Node},ctor:function(){},onLoad:function(){cc.log("onLoad1-1");var e=a.curUseEffect-1,t=cc.gameConfig.effectData[e].effectRes,i=cc.loading.getCustomData().level;if(!a.getTestBikeData(i)){var o=cc.gameConfig.guankaData[i];o.testBike&&s.default.isShow("haocheshijia")&&(cc.loading.loadRes("game/vehicle/myMoto/moto"+o.testBike,cc.SpriteAtlas,function(e,t){for(var i=0;i<11;i++){var s=i<10?"0"+i:i,a=t.getSpriteFrame("moto_"+s);this.testMotoFrame[i]=a}}.bind(this)),cc.eventCenter.on("testBike",this.onTestBike,this))}var n=a.curUseBike;cc.loading.getCustomData().isNewGuidelines&&(n=0),cc.loading.loadRes("game/vehicle/myMoto/moto"+n,cc.SpriteAtlas,function(e,t){for(var i=0;i<11;i++){var s=i<10?"0"+i:i,a=t.getSpriteFrame("moto_"+s);this.motoFrame[i]=a}this.motoSprite.spriteFrame=this.motoFrame[5]}.bind(this)),cc.loader.loadRes(t,sp.SkeletonData,function(e,t){e||(this.speedEffect.skeletonData=t,this.speedEffect.animation="await1")}.bind(this)),this.motoSprite.spriteFrame=this.motoFrame[5],this.isAccelerating=!1,this.isAccelerating?this.hooshNode0.active=!0:(this.hooshNode0.active=!1,this.hooshNode1.active=!1,this.hooshNode2.active=!1),this.yunIcon.active=!1,this.crashAnim=this.motoSprite.getComponent(cc.Animation),this.crashAnim.on("finished",this.onCrashFinished,this),this.leftSpark.node.active=!1,this.rightSpark.node.active=!1},hideLeft:function(){this.leftSpark.node.active=!1},hideRight:function(){this.rightSpark.node.active=!1},start:function(){this.maxSteer=1800,this.steerEaseX=0},setRotation:function(e){this.steerEaseX=e;var t=Math.floor(-e/this.maxSteer*5+5);t=(t=t>10?10:t)<0?0:t,this.yunIcon.x=10*(t-5),this.motoSprite.spriteFrame=this.motoFrame[t],this.hooshNode0.angle=- -this.steerEaseX/this.maxSteer*24},setFrame:function(e){this.motoSprite.spriteFrame=this.motoFrame[e]},update:function(e){},showCrash:function(e){this.crashAnim.play("motoCrash").repeatCount=2},showOutOfControl:function(e){this.crashAnim.play("motoCrash").repeatCount=5*e},onCrashFinished:function(){this.crashAnim.stop()},onAccelerating:function(e){this.hooshNode0.active=e},onYun:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.scheduleOnce(function(){this.yunIcon.active=!1},e),this.yunIcon.active=!0},onTestBike:function(){this.motoFrame=this.testMotoFrame,this.motoSprite.spriteFrame=this.motoFrame[5]},showMotoSpark:function(e){e<0?(this.leftSpark.node.active=!0,this.leftSpark.playAnimation("newAnimation",1)):(this.rightSpark.node.active=!0,this.rightSpark.playAnimation("newAnimation",1)),this.scheduleOnce(function(){e<0?this.leftSpark.node.active=!1:this.rightSpark.node.active=!1},.6)}}),cc._RF.pop()},{GameComponent:"GameComponent",GameDataCenter:void 0,buttonConfig:void 0}],MyVehicle:[function(e,t,i){"use strict";cc._RF.push(t,"418ed+foWVA5oV1xoaQuCcn","MyVehicle");var s=o(e("buttonConfig")),a=o(e("devices"));function o(e){return e&&e.__esModule?e:{default:e}}var n=e("GameDataCenter").getInstance(),h=e("GameComponent");cc.Class({extends:h,properties:{speed:0,isAccelerating:!1,maxSpeed:0,minSpeed:0,accRate:0,steerRate:6e3,maxSteer:1800,leftSteer:0,rightSteer:0,steerEaseX:0},onLoad:function(){this.moto=this.node.getComponent("MyMoto"),this.isNewGuidelines=cc.loading.getCustomData().isNewGuidelines;var e=n.getCurBikeAndUpgradeData();this.maxSpeed=e.maxSpeed,this.minSpeed=e.minSpeed,this.accRate=e.accRate,this.steerRate=e.steerRate,this.isControl=!0;var t=cc.loading.getCustomData().level;n.getTestBikeData(t)||cc.gameConfig.guankaData[t].testBike&&s.default.isShow("haocheshijia")&&cc.eventCenter.on("testBike",this.onTestBike,this)},onTestBike:function(e){var t=n.getBikeAndUpgradeData(e);this.maxSpeed=t.maxSpeed,this.minSpeed=t.minSpeed,this.accRate=t.accRate,this.steerRate=t.steerRate},start:function(){this.rowNum=360,this.isAccelerating=!0,this.accelTime=0},update:function(e){if(n.gameData.gameStart){this.isStart||(this.isStart=!0,this.speed=1.1*this.maxSpeed);var t=e;if(n.gameData.levelOver)this.speed-=30*t,this.speed=this.speed<0?0:this.speed;else if(this.isSpeedUp)this.accelTime>0?this.accelTime=Math.max(Math.round(this.accelTime-100*t),0):this.onSpeedUpOver(),this.speed-=(this.speed-1.2*this.maxSpeed)*(5*this.accRate*t);else{var i=this.speed>this.maxSpeed?5*this.accRate:this.accRate;this.isAccelerating?this.speed-=(this.speed-this.maxSpeed)*(i*t):this.speed-=(this.speed-this.minSpeed)*(i*t)}this.isControl&&this.rightSteer+this.leftSteer==1?this.steerEaseX=Math.min(this.steerEaseX+this.steerRate*t,this.maxSteer):this.isControl&&this.rightSteer+this.leftSteer==-1?this.steerEaseX=Math.max(this.steerEaseX-this.steerRate*t,-this.maxSteer):0==this.rightSteer&&0==this.leftSteer&&(this.steerEaseX<0?this.steerEaseX=Math.min(this.steerEaseX+this.steerRate*t,0):this.steerEaseX=Math.max(this.steerEaseX-this.steerRate*t,0)),this.slidingIndex>0?(this.steerEaseX+=this.slidingEaseX*t,this.slidingIndex-=t,this.moto.setRotation(-this.steerEaseX)):this.moto.setRotation(this.steerEaseX)}},onSliding:function(e){this.slidingIndex=1,this.steerEaseX<0?(this.slidingEaseX=.8*-this.steerRate,this.steerEaseX=-this.maxSteer):this.steerEaseX>0?(this.slidingEaseX=.8*this.steerRate,this.steerEaseX=this.maxSteer):e>0?(this.slidingEaseX=.8*+this.steerRate,this.steerEaseX=this.maxSteer):e<0?(this.slidingEaseX=.8*-this.steerRate,this.steerEaseX=-this.maxSteer):this.moto.showCrash()},hasCrashed:function(e){this.steerEaseX=e*this.maxSteer,this.speed=0,this.slidingEaseX=0,this.onSpeedUpOver()},hasAiCrashed:function(e){this.steerEaseX=e*this.maxSteer*.5,this.speed*=0==e?.5:.9,this.slidingEaseX=0,a.default.vibrate(),cc.audioGame.playCrash(0)},outOfControl:function(e){this.isControl=!1,this.moto.showOutOfControl(e),this.scheduleOnce(this.gainControl,e)},gainControl:function(){this.unschedule(this.gainControl),this.isControl=!0},onSpeedUpOver:function(){this.isSpeedUp=!1,this.unschedule(this.onSpeedUpOver),this.moto.onAccelerating(!1),this.node.emit("onSpeedUpOver")},onSpeedUp:function(e){this.isSpeedUp=!0,this.isAccelerating=!0,this.accelTime+=100*Math.ceil(.85*(e?1:5)),this.moto.onAccelerating(!0),cc.audioGame.playSpeedUp()},onNewGuidelinesSpeedUP:function(){this.isSpeedUp=!0,this.isAccelerating=!0,this.moto.onAccelerating(!0),cc.audioGame.playSpeedUp()},onDaoju:function(e,t){switch(e){case"nail":this.speed-=.5*this.speed,this.moto.onYun(1),cc.audioGame.playProps(e),a.default.vibrate();break;case"oil":this.onSliding(t),cc.audioGame.playProps(e),this.moto.onYun(1.5),a.default.vibrate();break;case"banana":this.speed-=.3*this.speed,this.outOfControl(1),cc.audioGame.playProps(e),this.moto.onYun(1),a.default.vibrate();break;case"bar":this.speed-=.6*this.speed,this.outOfControl(2),cc.audioGame.playProps(e),this.moto.onYun(2),a.default.vibrate()}}}),cc._RF.pop()},{GameComponent:"GameComponent",GameDataCenter:void 0,buttonConfig:void 0,devices:void 0}],NewMatchLos:[function(e,t,i){"use strict";cc._RF.push(t,"89983a2q+VFI51YF9JAcaA3","NewMatchLos");var s=n(e("athletics")),a=n(e("statistics")),o=n(e("banner"));function n(e){return e&&e.__esModule?e:{default:e}}var h=[1e3,3e3,5e3];function c(e,t){var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var s in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[s]:("00"+i[s]).substr((""+i[s]).length)));return e}function r(e,t){return c(e,new Date(t))}cc.Class({extends:cc.Component,properties:{ranking:cc.Label,costGold:cc.Label,time:cc.Label},setData:function(e,t){this.ranking.string=e+"",this.time.string="\u8017\u65f6:"+r("mm:ss:S",t)},start:function(){this.costGold.string=h[s.default.licenseLevel],a.default.setSceneEvent("","adshow",7,{pos:"pipeijiesuan"})},onAgain:function(){s.default.disconnectSoket(),cc.audioComponent.play("button"),this.node.destroy(),cc.loading.loadScene("MainScene",{cmd:"showMatch"}),a.default.setSceneEvent("\u5339\u914d\u5bf9\u6218-\u6a21\u5f0f"+s.default.licenseLevel,"\u70b9\u51fb","\u5339\u914d\u5bf9\u6218-\u5931\u8d25-\u91cd\u65b0\u5339\u914d")},onUpgrade:function(){cc.audioComponent.pauseMusic(),cc.loading.loadScene("ShopScene",{type:0}),a.default.setSceneEvent("\u5339\u914d\u5bf9\u6218-\u6a21\u5f0f"+s.default.licenseLevel,"\u70b9\u51fb","\u5339\u914d\u5bf9\u6218-\u5347\u7ea7\u8d5b\u8f66")},onEnable:function(){o.default.show("game")},onDisable:function(){o.default.hide()}}),cc._RF.pop()},{athletics:void 0,banner:void 0,statistics:void 0}],NewMatchWin:[function(e,t,i){"use strict";cc._RF.push(t,"f3d62pSSDJGe6CwB59yz3lj","NewMatchWin");var s=r(e("Portrait")),a=r(e("athletics")),o=r(e("buttonConfig")),n=r(e("statistics")),h=r(e("share")),c=r(e("banner"));function r(e){return e&&e.__esModule?e:{default:e}}var d=e("GameDataCenter").getInstance(),l=[[5e3,1500,1500],[14e3,5e3,5e3],[2e4,1e4,1e4]],m=[0,5,20,50,200];function u(e,t){var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var s in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[s]:("00"+i[s]).substr((""+i[s]).length)));return e}function p(e,t){return u(e,new Date(t))}cc.Class({extends:cc.Component,properties:{portraitList:{default:[],type:s.default},nameList:{default:[],type:cc.Label},rewardGold:{default:[],type:cc.Label},time:{default:[],type:cc.Label},shareBut:{default:null,type:cc.Button},licenseUp:cc.Prefab},setData:function(e,t){for(var i=0;i<e.length;i++){var s=e[i].userinfo;this.portraitList[i].setAvatarUrl(s.avatarUrl),this.nameList[i].string=s.nickName||s.nickname||"",this.rewardGold[i].string=l[a.default.licenseLevel][i]+"",this.time[i].string="\u8017\u65f6:\n"+p("mm:ss:S",e[i].time)}this.ranking=t},start:function(){o.default.isShow("xuanyaoyixia")?this.shareBut.node.active=!0:this.shareBut.node.active=!1,d.matchWin++,d.totalCoins+=l[a.default.licenseLevel][this.ranking-1],d.saveData();for(var e=1;e<m.length;e++)if(d.matchWin==m[e])return void this.scheduleOnce(function(){this.onUp(e)},.5)},onUp:function(e){var t=cc.instantiate(this.licenseUp);t.getComponent("LicenseUp").setData(e),this.node.parent.addChild(t)},onShareFriend:function(){cc.audioComponent.play("button"),n.default.setSceneEvent("\u5339\u914d\u5bf9\u6218-\u6a21\u5f0f"+a.default.licenseLevel,"\u70b9\u51fb","\u5339\u914d\u5bf9\u6218-\u80dc\u5229-\u70ab\u8000\u4e00\u4e0b"),h.default.shareToSociety({shareType:2,buttonKey:"shengli-xuanyaoyixia"},function(){})},onAgain:function(){a.default.disconnectSoket(),cc.audioComponent.play("button"),this.node.destroy(),cc.loading.loadScene("MainScene",{cmd:"showMatch"}),n.default.setSceneEvent("\u5339\u914d\u5bf9\u6218-\u6a21\u5f0f"+a.default.licenseLevel,"\u70b9\u51fb","\u5339\u914d\u5bf9\u6218-\u80dc\u5229-\u91cd\u65b0\u5339\u914d")},onUpgrade:function(){cc.audioComponent.pauseMusic(),cc.loading.loadScene("ShopScene",{type:0}),n.default.setSceneEvent("\u5339\u914d\u5bf9\u6218-\u6a21\u5f0f"+a.default.licenseLevel,"\u70b9\u51fb","\u5339\u914d\u5bf9\u6218-\u5347\u7ea7\u8d5b\u8f66")},onEnable:function(){c.default.show("game")},onDisable:function(){c.default.hide()}}),cc._RF.pop()},{GameDataCenter:void 0,Portrait:void 0,athletics:void 0,banner:void 0,buttonConfig:void 0,share:void 0,statistics:void 0}],PropsMgr:[function(e,t,i){"use strict";cc._RF.push(t,"2ca0b7d1gRH9KcEwVVQebpS","PropsMgr");var s=new Array(.15,.38,.62,.85);s[.5]=.26,s[1.5]=.5,s[2.5]=.73;var a=e("GameDataCenter").getInstance(),o=e("GameComponent");cc.Class({extends:o,properties:{propsLanePools:{default:{},type:Array},propsPrefab:{default:[],type:cc.Prefab},carNode:cc.Node},onLoad:function(){this.gameData=a.gameData,this.road=this.node.getComponent("Road")},initData:function(e){if(this.propDataList=new Array,this.sceneData=cc.loading.getCustomData(),this.level=cc.loading.getCustomData().level,this.sceneData.isMatch&&0==this.sceneData.rankMap||this.sceneData.isAmusement&&0==this.sceneData.amusementType)return this.propDataList;if(cc.loading.getCustomData().isNewGuidelines||cc.loading.getCustomData().isAmusement){if(cc.loading.getCustomData().isAmusement)for(t=0;t<e.length;t++){(s={speed:0}).lane=e[t].lane,s.id="wall",s.prefab=this.choicePrefab(s.id),s.dist=e[t].dist,s.type="prop",this.propDataList.push(s)}}else if(e.obstacle)for(var t=0;t<e.obstacle.length;t++){var i=e.obstacle[t].propId;if((1!=this.sceneData.rankMap||"nail"!=i&&"oil"!=i&&"banana"!=i&&"smoke"!=i)&&(2!=this.sceneData.rankMap||"wall"!=i&&"cone"!=i&&"column_black"!=i&&"column_red"!=i)){var s={},a=e.obstacle[t].lane;s.speed=0,s.lane=-1==a?Math.floor(4*Math.random()):a,s.id=e.obstacle[t].propId,s.prefab=this.choicePrefab(s.id),s.dist=e.obstacle[t].dist,s.type="prop",0!=this.level&&3!=this.level||0!=t||!this.sceneData.isGame||(s.isGuidelines=!0,s.dist-=.1),this.propDataList.push(s)}}return cc.log("this.propDataList",this.propDataList),this.propDataList},start:function(){this.props=new Array,this.propsLanes=new Array;for(var e=0;e<4;e++){var t=new Array;this.propsLanes.push(t)}for(e=.5;e<3;e+=1){t=new Array;this.propsLanes[e]=t}this.propsLanePools.nail=new cc.NodePool,this.propsLanePools.oil=new cc.NodePool,this.propsLanePools.banana=new cc.NodePool,this.propsLanePools.smoke=new cc.NodePool,this.propsLanePools.wall=new cc.NodePool,this.propsLanePools.cone=new cc.NodePool,this.propsLanePools.column_black=new cc.NodePool,this.propsLanePools.column_red=new cc.NodePool},update:function(e){if(a.gameData.gameStart){for(var t=e,i=0;i<this.propDataList.length;i++){var o=this.propDataList[i];a.gameData.dist>o.dist&&(this.propDataList.splice(i,1),i--,this.addVehicle(o))}for(var n=0;n<this.props.length;n++){var h=this.props[n],c=this.road.roadNodeList[Math.floor(h.rowNum)];if(null!=c){var r=c.getPosition();if((0==this.level||3==this.level)&&h.isGuidelines&&this.sceneData.isGame){var d=0;d=this.road.myVehicle.lane>=2?this.road.myVehicle.lane-1:this.road.myVehicle.lane+1,h.sideMultiplier=s[d]}if(h.x=r.x-c.width/2+h.sideMultiplier*c.width,h.y=r.y,h.scale=(c.width-30)*this.road.roadScaleMultiplier/1e3,h.tempInc=h.rowNum-360,h.tempInc/=this.road.segNum-360,h.perspSpeed=1*h.tempInc*Math.pow(h.tempInc,5)+0,h.rowNum+=(this.road.myVehicle.speed-h.speed+150*h.perspSpeed)*t*.8,h.scale>.03?(h.active=!0,h.zIndex=1e3-Math.floor(r.y)):h.active=!1,h.rowNum>=this.road.segNum)this.removeVehicle(n),n-=1;else if(h.rowNum>this.road.segNum-40&&(0==this.level||3==this.level)&&h.isGuidelines&&this.sceneData.isGame){this.road.myVehicle.lane>=2?h.x=-150:h.x=150,h.isGuidelines=!1;var l=0==this.level?15:16;this.road.gameGuidelines.showCoinGuidelines(l,h.x>0?2:1)}else if(h.rowNum>this.road.segNum-20){var m=!1;switch(h.id){case"nail":h.x>-100&&h.x<100&&(this.road.myVehicle.onDaoju(h.id),this.removeVehicle(n),n-=1);break;case"oil":h.x>-180&&h.x<180&&(this.road.myVehicle.onDaoju(h.id,this.road.curve),this.removeVehicle(n),n-=1);break;case"banana":h.x>-100&&h.x<100&&(this.road.myVehicle.onDaoju(h.id),this.removeVehicle(n),n-=1);break;case"wall":h.x>-150&&h.x<150?(cc.audioGame.playCrash(1),this.road.hasCrashed(),this.removeVehicle(n),n-=1):h.x>-2e3&&h.x<2e3&&(h.isMiss||(m=!0,h.isMiss=!0,this.gameData.missObstacleCount++));break;case"cone":h.x>-50&&h.x<50?(cc.audioGame.playCrash(1),this.road.hasCrashed(),this.removeVehicle(n),n-=1):h.x>-2e3&&h.x<2e3&&(h.isMiss||(m=!0,h.isMiss=!0,this.gameData.missObstacleCount++));break;case"column_black":case"column_red":h.x>-50&&h.x<50?(cc.audioGame.playCrash(1),this.road.hasCrashed(),this.removeVehicle(n),n-=1):h.x>-2e3&&h.x<2e3&&(h.isMiss||(m=!0,h.isMiss=!0,this.gameData.missObstacleCount++))}m&&this.node.emit("onMissObstacle",1)}else h.rowNum<350&&(this.removeVehicle(n),n-=1)}}}},addVehicle:function(e){cc.log("skeletonData++++++++++++",e.lane);var t=e.lane,i=null;return this.propsLanePools[e.id].size()>0?i=this.propsLanePools[e.id].get():(i=cc.instantiate(e.prefab)).id=e.id,(0==this.level||3==this.level)&&e.isGuidelines&&this.sceneData.isGame&&(i.isGuidelines=e.isGuidelines),"smoke"!=i.id?(i.road=this.road,i.rowNum=360,i.active=!1,i.isMiss=!1,this.node.addChild(i,this.carNode.getSiblingIndex()-1),i.sideMultiplier=s[t],i.lane=t,i.speed=e.speed,this.propsLanes[t].push(i),this.props.push(i)):(this.smogProp&&this.node.removeChild(i),this.smogProp=i,cc.audioGame.playSmog(),this.node.addChild(i,9999)),i},removeVehicle:function(e){for(var t=this.props[e],i=0;i<this.propsLanes[t.lane].length;i++)this.propsLanes[t.lane][i]==t&&this.propsLanes[t.lane].splice(i,1);this.propsLanePools[t.id].put(t),this.props.splice(e,1)},choicePrefab:function(e){var t;switch(e){case"nail":t=this.propsPrefab[0];break;case"oil":t=this.propsPrefab[1];break;case"banana":t=this.propsPrefab[2];break;case"smoke":t=this.propsPrefab[3];break;case"wall":t=this.propsPrefab[4];break;case"cone":t=this.propsPrefab[5];break;case"column_black":t=this.propsPrefab[6];break;case"column_red":t=this.propsPrefab[7]}return t}}),cc._RF.pop()},{GameComponent:"GameComponent",GameDataCenter:void 0}],PropsTips:[function(e,t,i){"use strict";cc._RF.push(t,"ad96cpSwAxO0I0PDf0hwHpO","PropsTips"),cc.Class({extends:cc.Component,properties:{tipsSprite:cc.Sprite},onLoad:function(){this.res&&cc.loader.loadRes(this.res,cc.SpriteFrame,function(e,t){this.tipsSprite.spriteFrame=t}.bind(this))},init:function(e){switch(e){case 1:this.res="game/propsTips/banana_tips";break;case 2:this.res="game/propsTips/oil_tips";break;case 3:this.res="game/propsTips/nail_tips";break;case 4:this.res="game/propsTips/smoke_tips"}},start:function(){},onClose:function(){cc.audioComponent.play("button"),this.node.emit("onClose"),this.node.destroy()},onDestroy:function(){this.res&&cc.loader.releaseRes(this.res,cc.SpriteFrame)}}),cc._RF.pop()},{}],RankSettlement:[function(e,t,i){"use strict";cc._RF.push(t,"e938e531jVL6Lo8ayRWja2U","RankSettlement");n(e("buttonConfig"));var s=n(e("share")),a=n(e("videoAd")),o=(n(e("statistics")),n(e("banner")),n(e("ChanneConfig")));function n(e){return e&&e.__esModule?e:{default:e}}var h=e("GameDataCenter").getInstance();o.default.channelId;cc.Class({extends:cc.Component,properties:{grayStarNode:cc.Node,yellowStarNode:cc.Node,addStarNode:cc.Node,shiledPrefab:cc.Prefab,notPunishBtn:cc.Node,shareBtn:cc.Node,gameRanking:0,maxStarNode:cc.Node,starNumsNode:cc.Node,disStarPrefab:cc.Prefab,skipBtn:cc.Node},onLoad:function(){this.type=0,this.isShiled=!1,this.showShiled=!1;var e=h.getRankData();100!=e.star&&0!=e.star||(this.type=1),this.skipBtn.active=!0},start:function(){this.gameRanking<=3?(this.notPunishBtn.active=!1,this.shareBtn.active=!0):(this.notPunishBtn.active=!0,this.shareBtn.active=!1,this.skipBtn.active=!1,this.scheduleOnce(function(){this.skipBtn.active=!0},2)),this.scheduleOnce(function(){0==this.type&&(1==this.gameRanking?this.showAddStarAnimation():this.gameRanking<=3?this.showShiledAnimation(!0):this.showDisappearStarAnimation())},1)},showPlayerRankInfo:function(){var e=h.getRankData(),t=this.node.getChildByName("show");this.showRankIcon(t.getChildByName("icon"),e.iconRes),this.showRankName(t.getChildByName("txt"),e.nameRes),console.log("star",e.starNum),this.showRankStar(e.starNum,e.star)},showRankStar:function(e,t){if(100==t||0==t)this.maxStarNode.active=!1,this.starNumsNode.active=!0,this.starNumsNode.getChildByName("num").getComponent(cc.Label).string=e+"",this.starNumsNode.getChildByName("add").getComponent(cc.Label).string=1==this.gameRanking?"/1":this.gameRanking<=3?"/0":".1";else{this.maxStarNode.active=!0,this.starNumsNode.active=!1;for(var i=0;i<this.grayStarNode.children.length;i++){var s=this.grayStarNode.children[i];s.active=!(i>=t)}for(var a=0;a<this.yellowStarNode.children.length;a++){var o=this.yellowStarNode.children[a];o.active=!(a>=e)}}},showRankIcon:function(e,t){e&&cc.loader.loadRes(t,cc.SpriteFrame,function(t,i){t||(e.getComponent(cc.Sprite).spriteFrame=i)})},showRankName:function(e,t){e&&cc.loader.loadRes(t,cc.SpriteFrame,function(t,i){t||(e.getComponent(cc.Sprite).spriteFrame=i)})},onRankShiled:function(){h.rankLevel<1?this.close():this.showShiled||(this.showShiled=!0,a.default.show("duanweijiesuan",this.showShiledAnimation.bind(this)))},showShiledAnimation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];cc.log("showShiledAnimation"),this.isShiled=!0;var t=h.getRankData(h.rankLevel),i=h.getRankData(h.rankLevel-1),s=this.gameRanking>3?i.total+i.star==h.rankLevel:t.total+t.star==h.rankLevel;cc.log("test newRankData",i.total,i.star,h.rankLevel);var a=function(){var e=function(){if(i.id!=t.id&&(100!=i.star||0!=i.star)&&this.gameRanking>3){var e=this.node.getChildByName("show");this.showRankName(e.getChildByName("txt"),t.nameRes),this.showRankStar(t.starNum,t.star),e.getChildByName("icon").runAction(cc.sequence(cc.callFunc(function(){this.showRankIcon(e.getChildByName("icon"),t.iconRes)},this),cc.fadeIn(.5),cc.callFunc(function(){this.scheduleOnce(function(){this.close()},.5)},this)))}}.bind(this),s=this.node.getChildByName("show").getChildByName("icon");s.getComponent(cc.Animation).on("finished",e,this),s.getComponent(cc.Animation).play()}.bind(this);(function(){var o=cc.instantiate(this.shiledPrefab);o.setScale(.5),o.opacity=0;var n,h=this.node.getChildByName("show");if(0==this.type){var c=e?t.starNum:s?i.star-1:i.starNum,r=this.yellowStarNode.children[c].position,d=this.yellowStarNode.convertToWorldSpaceAR(r);n=h.convertToNodeSpaceAR(d)}else{r=this.starNumsNode.getChildByName("icon").position,d=this.starNumsNode.convertToWorldSpaceAR(r);n=h.convertToNodeSpaceAR(d)}var l=cc.spawn(cc.scaleTo(1,2),cc.fadeIn(1)),m=cc.spawn(cc.scaleTo(1,.3),cc.moveTo(1,n));h.addChild(o),cc.audioGame.playRankStar(2),o.runAction(cc.sequence(l,m,cc.delayTime(.5),cc.fadeOut(1),cc.delayTime(.5),cc.callFunc(function(){this.gameRanking>3?function(){this.yellowStarNode.children[c].opacity=0,this.yellowStarNode.children[c].active=!0,this.yellowStarNode.children[c].runAction(cc.sequence(cc.fadeIn(.5),cc.delayTime(.1),cc.callFunc(function(){s?a():this.close()},this)))}.bind(this)():this.scheduleOnce(function(){this.close()},.2)},this)))}).bind(this)()},showAddStarAnimation:function(){var e=h.getRankData(),t=h.getRankData(h.rankLevel+1),i=function(){if(e.id!=t.id&&(100!=t.star||0!=t.star)){var i=function(){var e=this.node.getChildByName("show");this.showRankName(e.getChildByName("txt"),t.nameRes),this.showRankStar(t.starNum,t.star),e.getChildByName("icon").runAction(cc.sequence(cc.callFunc(function(){this.showRankIcon(e.getChildByName("icon"),t.iconRes)},this),cc.fadeIn(.5),cc.callFunc(function(){e.getChildByName("light").active=!0},this)))}.bind(this),s=this.node.getChildByName("show").getChildByName("icon");s.getComponent(cc.Animation).on("finished",i,this),s.getComponent(cc.Animation).play()}}.bind(this);(function(){var e=h.getRankData();cc.log("rankData.starNum",e.starNum);var t=e.starNum,s=0==this.type?this.yellowStarNode.children[t]:this.starNumsNode.getChildByName("icon");s.active=!0,console.log(s.position),s.opacity=0;var a=cc.instantiate(s);this.addStarNode.addChild(a);var o=s.parent.convertToWorldSpaceAR(this.grayStarNode.children[t]),n=this.addStarNode.convertToNodeSpaceAR(o);a.setPosition(n),s.setScale(2),cc.audioGame.playRankStar(0),s.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,1),cc.fadeIn(.2)),cc.callFunc(function(){console.log(a.position),a.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,2),cc.fadeTo(.5,188)),cc.fadeOut(.3),cc.callFunc(function(){i()})))})))}).bind(this)()},showDisappearStarAnimation:function(){cc.log("showDisappearStarAnimation");var e=h.getRankData(),t=h.getRankData(h.rankLevel-1);cc.log("test newRankData",t.total,t.star,h.rankLevel);var i=function(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(console.log("isShow",i),e.id!=t.id&&(100!=t.star||0!=t.star)){var a=function(){var e=this.node.getChildByName("show");this.showRankName(e.getChildByName("txt"),t.nameRes),this.showRankStar(t.star,t.star),e.getChildByName("icon").runAction(cc.sequence(cc.callFunc(function(){this.showRankIcon(e.getChildByName("icon"),t.iconRes)},this),cc.fadeIn(.5),cc.callFunc(function(){i&&s()},this)))}.bind(this),o=this.node.getChildByName("show").getChildByName("icon");o.getComponent(cc.Animation).on("finished",a,this),o.getComponent(cc.Animation).play()}}.bind(this),s=function(){var s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(console.log("isShow",s),!this.isShiled){var a=s?this.yellowStarNode.children[e.starNum]:this.yellowStarNode.children[t.star-1];a.active=!1;var o=cc.instantiate(this.disStarPrefab),n=this.node.getChildByName("show").getChildByName("new");n.addChild(o);var h=a.parent.convertToWorldSpaceAR(a.position),c=this.node.getChildByName("show").getChildByName("new").convertToNodeSpaceAR(h);o.setPosition(cc.v2(o.x+c.x,o.y+c.y));var r=o.getComponent(dragonBones.ArmatureDisplay);r.on(dragonBones.EventObject.COMPLETE,function(){this.node.getChildByName("show").removeChild(n),s&&i()},this),cc.audioGame.playRankStar(1),r.playAnimation("newAnimation",1)}}.bind(this);t.total+t.star==h.rankLevel?i(!0):s(!0)},onShare:function(){cc.audioComponent.play("button"),s.default.shareToSociety({shareType:2,buttonKey:"xuanyaoyixia"},this.close.bind(this))},onSkip:function(){cc.audioComponent.play("button"),this.close()},close:function(){1==this.gameRanking?h.rankLevel+=1:this.isShiled||(h.rankLevel-=1),this.node.emit("onClose",this.isShiled),this.node.active=!1}}),cc._RF.pop()},{ChanneConfig:void 0,GameDataCenter:void 0,banner:void 0,buttonConfig:void 0,share:void 0,statistics:void 0,videoAd:void 0}],Road:[function(e,t,i){"use strict";cc._RF.push(t,"fe401LHg2FJMo/SwGwPYhfV","Road");var s=a(e("ChanneConfig"));a(e("devices"));function a(e){return e&&e.__esModule?e:{default:e}}e("Loading");var o=e("Car"),n=e("GameDataCenter").getInstance(),h=e("GameComponent");s.default.channelId;cc.Class({extends:h,properties:{roadSpriteFrame:cc.SpriteFrame,roadEndSpriteFrame:cc.SpriteFrame,roadStartSpriteFrame:cc.SpriteFrame,segNum:600,scrollY:0,car:o,carNode:cc.Node,motoNode:cc.Node,sky:cc.Node,sunNode:cc.Node,vehiclePrefab:cc.Prefab,daojuAinm:cc.Node,leftButton:cc.Node,rightButton:cc.Node,leftSpriteFrame:{type:cc.SpriteFrame,default:[]},rightSpriteFrame:{type:cc.SpriteFrame,default:[]},smokePrefab:cc.Prefab},onLoad:function(){var e,t=this;(cc.log("onLoad1"),this.startPoint=0,this.gameData=n.gameData,this.sceneData=cc.loading.getCustomData(),this.level=this.sceneData.level,this.levelData=cc.gameConfig.guankaData[this.level],this.bgType=this.sceneData.isMatch?cc.loading.getCustomData().rankMap:this.levelData.bgType,this.bgType=this.bgType<0?Math.floor(1*Math.random()*2):this.bgType,this.vehicleMgr=this.node.getComponent("VehicleMgr"),this.vehicleAiMgr=this.node.getComponent("VehicleAiMgr"),this.coinMgr=this.node.getComponent("CoinMgr"),this.propsMgr=this.node.getComponent("PropsMgr"),this.sceneData.isMatch)?(e=cc.gameConfig.obstacleGameData[this.sceneData.sceneType],cc.log("On Match Obstacle",e)):e=this.levelData;if(this.sceneData.isAmusement){this.vehicleMgr.initData(this.levelData);var i=this.coinMgr.initData(this.levelData),s=this.propsMgr.initData(this.coinMgr.propDataList);this.vehicleSort(!1,i,s)}else this.vehicleSort(this.vehicleMgr.initData(this.levelData),this.coinMgr.initData(this.levelData),this.propsMgr.initData(e));cc.loading.loadRes("game/road/road"+this.bgType,cc.SpriteFrame,function(e,t){this.roadSpriteFrame=t}.bind(this)),cc.loading.loadRes("game/road/roadEnd",cc.SpriteFrame,function(e,t){this.roadEndSpriteFrame=t}.bind(this)),cc.loading.loadRes("game/road/roadStart",cc.SpriteFrame,function(e,t){this.roadStartSpriteFrame=t}.bind(this)),this.daojuIconSpriteFrame={};for(var a=function(){var e=cc.gameConfig.daojuData[o].id;cc.loading.loadRes("prop/"+e,cc.SpriteFrame,function(t,i){this.daojuIconSpriteFrame[e]=i}.bind(t))},o=0;o<cc.gameConfig.daojuData.length;o++)a();this.daojuAinmPool=new cc.NodePool,this.moto=this.motoNode.getComponent("MyMoto"),this.myVehicle=this.motoNode.getComponent("MyVehicle"),this.node.on("onSpeedUp",this.onSpeedUp,this),this.myVehicle.node.on("onSpeedUpOver",this.onSpeedUpOver,this)},setGameGuidelines:function(e){this.gameGuidelines=e},vehicleSort:function(e,t,i){var s=t;function a(e,t){return e.dist-t.dist}s.sort(a);for(var o=1;o<s.length;o++){var n=s[o],h=s[o-(c=1)];n.dist-h.dist<.2/this.levelData.raceDist&&n.lane==h.lane&&("vehicle"!=n.type?n.lane=(h.lane+1)%4:h.lane=(n.lane+1)%4)}(s=s.concat(i)).sort(a);for(o=1;o<s.length;o++){if("prop"==(n=s[o]).type){var c;h=s[o-(c=1)];n.dist-h.dist<.1/this.levelData.raceDist&&n.lane==h.lane&&s.splice(o,1),(h=s[o+c])&&n.dist-h.dist<.1/this.levelData.raceDist&&n.lane==h.lane&&s.splice(o,1)}}cc.log("list",s)},loadResComplete:function(){cc.log("loadResComplete")},onControlMethod:function(){this.controlMethod+=1,this.controlMethod%2==1?(this.motoboy.active=!1,this.car.node.active=!1,this.moto.node.active=!0):(this.motoboy.active=!0,this.car.node.active=!1,this.moto.node.active=!1)},start:function(){this.leftButton.on(cc.Node.EventType.TOUCH_START,this.onTouchStartLeft,this),this.leftButton.on(cc.Node.EventType.TOUCH_END,this.onTouchEndLeft,this),this.leftButton.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelLeft,this),this.rightButton.on(cc.Node.EventType.TOUCH_START,this.onTouchStartRight,this),this.rightButton.on(cc.Node.EventType.TOUCH_END,this.onTouchEndRight,this),this.rightButton.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelRight,this),this.isControl=!1,this.isControlMove=!1,this.isMiddleMove=!1,this.steerXcentre=0,this.steerX=this.steerXcentre,this.curve=0,this.roadHeight=380,this.horizon=380,this.scrollX=cc.winSize.width*Math.random()*.8+.1,this.skyScale=cc.winSize.width/(this.sky.width/2),this.rect=cc.rect(0,0,this.roadSpriteFrame.getTexture().width,this.roadSpriteFrame.getTexture().height),this.roadPieceWidth=this.rect.width,this.roadPieceHeight=this.rect.height/this.segNum/2,this.controlMethod=1,cc.log("start ="),this.roadNodeList=new Array,this.roadScaleMultiplier=1,this.isRadian=!1,this.preRadian=0,this.radianMax=0,this.radianMin=0,this.radianCount=this.gameData.curveCount,this.controlDir=0,this.maxCurNum=n.levelNum<n.getTotalLevelCount()/2?.25:.5;for(var e=0;e<this.segNum;e++){var t=new cc.Node,i=t.addComponent(cc.Sprite),s=e/this.segNum,a=(e+1)/this.segNum,o=Math.pow(s,15)*s,h=Math.pow(a,15)*a,c=h-o,r=e*this.roadPieceHeight,d=cc.rect(0,r,this.roadPieceWidth,this.roadPieceHeight);i.spriteFrame=new cc.SpriteFrame(this.roadSpriteFrame.getTexture(),d),t.width=this.roadPieceWidth*(c+o)*8+50,t.height=c*this.roadHeight+1,t.anchorX=.5,t.anchorY=1;var l=t.getPosition();l.x=0,l.y=this.horizon-this.roadHeight*h,t.setPosition(l),this.node.addChild(t,2),this.roadNodeList[e]=t}this.roadNodeList2=new Array;for(e=this.segNum;e<this.segNum+30;e++){var m=new cc.Node,u=m.addComponent(cc.Sprite),p=e/this.segNum,g=(e+1)/this.segNum,f=p*Math.pow(p,15),v=g*Math.pow(g,15),C=v-f,y=e*this.roadPieceHeight,S=cc.rect(0,y,this.roadPieceWidth,this.roadPieceHeight);u.spriteFrame=new cc.SpriteFrame(this.roadSpriteFrame.getTexture(),S),m.width=this.roadPieceWidth*(C+f)*8+50,m.height=C*this.roadHeight+1,m.anchorX=.5,m.anchorY=1;var D=m.getPosition();D.x=0,D.y=this.horizon-v*this.roadHeight,m.setPosition(D),this.node.addChild(m,2),this.roadNodeList2[e]=m}this.roadEndNodeList=new Array;var w=360;this.sceneData.isMatch&&(this.steerX=450,w=570);for(e=0;e<10;e++){var N=new cc.Node,b=w+e,A=N.addComponent(cc.Sprite),M=b/this.segNum,k=(b+1)/this.segNum,T=M*Math.pow(M,15),L=k*Math.pow(k,15),R=L-T,P=5*e,B=cc.rect(0,P,this.roadPieceWidth,5);A.spriteFrame=new cc.SpriteFrame(this.roadStartSpriteFrame.getTexture(),B),N.width=8*(T+R)*this.roadPieceWidth+50,N.height=R*this.roadHeight+1,N.anchorX=.5,N.anchorY=1;var G=N.getPosition();G.x=0,G.y=this.horizon-L*this.roadHeight,N.setPosition(G),N.rowNum=b,this.node.addChild(N,2),this.roadEndNodeList.push(N)}this.motoboy=new cc.Node,this.motoSprite=this.motoboy.addComponent(cc.Sprite),this.motoboy.width=908,this.motoboy.height=359,this.motoboy.anchorX=.5,this.motoboy.anchorY=.4,this.motoboy.setPosition(cc.v2(0,0)),this.motoboy.scale=1.5,this.node.addChild(this.motoboy,2001),this.motoboy.zIndex=4001,this.controlMethod%2==1?(this.motoboy.active=!1,this.car.node.active=!1,this.moto.node.active=!0):(this.motoboy.active=!0,this.car.node.active=!1,this.moto.node.active=!1),this.sky.zIndex=601,this.carNode.zIndex=4e3,this.motoNode.zIndex=4e3,this.daojuAinm.zIndex=4e3;var V=this.levelData.aiUse||[];for(var F in(this.sceneData.isMatch&&0==this.sceneData.rankMap||this.sceneData.isNewGuidelines)&&(V=[]),this.aiProps=new Array,V)if(this.sceneData.isGame)for(var x=0;x<parseInt(V[F]);x++){(U={}).id=F,this.aiProps.push({id:U.id})}else if(this.sceneData.isMatch&&(1==this.sceneData.rankMap||2==this.sceneData.rankMap))for(var I=1==this.sceneData.rankMap?10:5,E=Math.floor(Math.random()*I),_=0;_<E;_++){var U;(U={}).id=F,this.aiProps.push({id:U.id})}if(0==this.level)for(var O=.5,j=0;j<this.aiProps.length;j++)this.aiProps[j].dist=O,O+=.4;else for(j=0;j<this.aiProps.length;j++)this.aiProps[j].dist=.5+.4/this.aiProps.length*j+.4/this.aiProps.length*Math.random();cc.log("this.aiProps = ",this.aiProps),this.isAiProp=0},onTouchStartLeft:function(e){this.leftButton.scale=1.1,this.leftButton.getComponent(cc.Sprite).spriteFrame=this.leftSpriteFrame[1],this.myVehicle.leftSteer=1},onTouchEndLeft:function(e){this.leftButton.scale=1,this.leftButton.getComponent(cc.Sprite).spriteFrame=this.leftSpriteFrame[0],this.myVehicle.leftSteer=0,cc.log("onTouchEndLeft")},onTouchCancelLeft:function(e){this.leftButton.scale=1,this.leftButton.getComponent(cc.Sprite).spriteFrame=this.leftSpriteFrame[0],this.myVehicle.leftSteer=0},onTouchStartRight:function(e){this.rightButton.scale=1.1,this.rightButton.getComponent(cc.Sprite).spriteFrame=this.rightSpriteFrame[1],this.myVehicle.rightSteer=-1},onTouchEndRight:function(e){this.rightButton.scale=1,this.rightButton.getComponent(cc.Sprite).spriteFrame=this.rightSpriteFrame[0],this.myVehicle.rightSteer=0},onTouchCancelRight:function(e){this.rightButton.scale=1,this.rightButton.getComponent(cc.Sprite).spriteFrame=this.rightSpriteFrame[0],this.myVehicle.rightSteer=0},initCurve:function(){var e=0;if(this.isRadian=this.isRadian?this.isRadian:this.gameData.dist<1/3?1*Math.random()<.3:1*Math.random()<.5,this.isRadian&&this.radianCount>0||1*Math.random()<.5&&this.gameData.dist<.8&&this.radianCount>0){cc.log("in Radian.........."),cc.log("maxNum:",this.maxCurNum,this.radianMin,this.radianMax,this.gameData.dist);var t=0==this.preRadian?1e3*Math.random()%10>5?1:-1:this.preRadian>0?1e3*Math.random()%10>8?1:-1:1e3*Math.random()%10>3?1:-1;this.radianMax=0==this.radianMax?(2*Math.random()-1)*t:this.radianMax,this.radianMin=0==this.radianMin?this.radianMax:this.radianMin,this.radianMin=this.radianMin>0?this.radianMin+Math.random():this.radianMin-Math.random(),e=this.radianMin,(this.radianMax>0&&this.radianMin>this.radianMax+this.maxCurNum||this.radianMax<0&&this.radianMin<this.radianMax-this.maxCurNum)&&(this.isRadian=!1,this.preRadian=this.radianMax,this.radianMax=0,this.radianMin=0,this.radianCount--)}else if(this.gameData.dist>.5&&this.radianCount>0){cc.log("in radianEnd..........");var i=this.curve>0?1e3*Math.random()%10>8?1:-1:1e3*Math.random()%10>3?1:-1;e=2*Math.random()*i,this.radianCount--}else{cc.log("in levelData..........");var s=this.levelData.curves,a=[],o=parseFloat(s[0]),n=parseFloat(s[1]);a[0]={mis:0,max:o},a[1]={mis:o,max:n};var h=Math.random(),c=1e5*h%10>3.5?a[1]:a[0];e=(c.mis+(c.max-c.mis)*h)*(1e3*h%10>5?1:-1)}this.toCurve=e;var r=cc.delayTime(4*Math.random()+4);this._previousCurve=this.curve;var d=cc.easeInOut(3);r.update=function(e){var t=d.easing(e);this.curve=this._previousCurve+(this.toCurve-this._previousCurve)*t,1==e&&(this.node.stopAction(r),this.gameData.levelOver||this.initCurve())}.bind(this),this.node.runAction(r)},updateroadEnd:function(){if(!this.roadEnd){this.roadEnd=!0;for(var e=0;e<this.roadEndNodeList.length;e++){var t=this.roadEndNodeList[e];t.rowNum=e,t.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.roadEndSpriteFrame.getTexture())}}},update:function(e){var t=e;if(0==this.isAiProp)for(var i=0;i<this.aiProps.length;i++)if(this.aiProps[i].dist<this.gameData.dist){this.isAiProp=1;break}(B=this.roadNodeList[this.segNum-1].getPosition()).x<-2e3?(this.myVehicle.hasCrashed(1),this.showSpark(1),this.myVehicle,cc.audioGame.playCrash(0)):B.x>2e3&&(this.myVehicle.hasCrashed(-1),this.showSpark(-1),cc.audioGame.playCrash(0)),this.myVehicle.lane=-(B.x-2e3)/900,this.myVehicle.sideMultiplierLane=this.myVehicle.lane,this.myVehicle.lane<.85?this.myVehicle.lane=0:this.myVehicle.lane>3.85?this.myVehicle.lane=3:this.myVehicle.lane%1>.15&&this.myVehicle.lane%1<.85?this.myVehicle.lane=Math.floor(this.myVehicle.lane):this.myVehicle.lane=Math.round(this.myVehicle.lane)-.5,this.scrollY-=.6*this.myVehicle.speed*e,this.scrollY<0&&(this.scrollY+=499);var s=this.myVehicle.steerEaseX;(this.sceneData.isNewGuidelines||0==n.levelNum)&&(this.curve=0),this.steerX+=(s+this.curve*(6*this.myVehicle.speed))*e,this.car.setRotation(this.myVehicle.steerEaseX),this.motoboy.angle=- -this.myVehicle.steerEaseX/this.myVehicle.maxSteer*15,this.scrollInc=this.curve*(.75*this.myVehicle.speed)*t;for(var a=0;a<this.segNum;a++){var o=this.roadNodeList[a],h=o.getComponent(cc.Sprite),r=a/this.segNum,d=r*Math.pow(r,15),l=this.scrollY+this.roadPieceHeight*a,m=cc.rect(0,l,this.roadPieceWidth,this.roadPieceHeight);h.spriteFrame.setRect(m);var u=o.getPosition();u.x=this.steerX*d+(this.segNum-a)*this.curve,u.y=this.horizon-d*this.roadHeight,o.setPosition(u)}for(a=this.segNum;a<this.segNum+30;a++){var p=this.roadNodeList2[a],g=p.getComponent(cc.Sprite),f=a/this.segNum,v=f*Math.pow(f,15),C=this.scrollY+this.roadPieceHeight*a,y=cc.rect(0,C,this.roadPieceWidth,this.roadPieceHeight);g.spriteFrame.setRect(y);var S=p.getPosition();S.x=this.steerX*v+(this.segNum-a)*this.curve,S.y=this.horizon-v*this.roadHeight,p.setPosition(S)}for(var D=0;D<this.roadEndNodeList.length;D++){var w=this.roadEndNodeList[D];if(w.rowNum<650){w.rowNum+=this.myVehicle.speed*t;a=w.rowNum,w.getComponent(cc.Sprite);var N=a/this.segNum,b=(a+1)/this.segNum,A=N*Math.pow(N,15),M=b*Math.pow(b,15)-A;w.width=50+(A+M)*this.roadPieceWidth*8,w.height=M*this.roadHeight+1,w.active||(w.active=!0);var k=w.getPosition();k.x=this.steerX*A+(this.segNum-a)*this.curve,k.y=this.horizon-A*this.roadHeight,w.setPosition(k)}else w.active&&(w.active=!1)}this.scrollX-=this.scrollInc*this.skyScale,this.scrollX<-cc.winSize.width?this.scrollX=2*cc.winSize.width:this.scrollX>2*cc.winSize.width&&(this.scrollX=-cc.winSize.width);var T=(cc.winSize.width/2-Math.abs(this.scrollX-cc.winSize.width/2))/(cc.winSize.width/2)*.5+.5;this.sunNode.active||0==this.scrollX||(this.sunNode.active=!0),this.sunNode.x=this.scrollX-cc.winSize.width/2*T;var L=this.scrollX-cc.winSize.width/2*T;this.sky.x=L>0&&L>this.sky.width/2-100?this.sky.width/2-100:L<-(this.sky.width/2-100)?-(this.sky.width/2-100):L;var R=this.vehicleMgr.aVehicles;for(i=0;i<R.length;i++){var P=this.roadNodeList[Math.floor(R[i].rowNum)];if(R[i].rowNum>=this.segNum)this.vehicleMgr.removeVehicle(i),i-=1;else{if(R[i].rowNum>=this.segNum)R[i].tempInc=(R[i].rowNum-this.segNum)/(this.segNum-c),R[i].perspSpeed=R[i].tempInc*Math.pow(R[i].tempInc,5),this.myVehicle.speed>R[i].speed?R[i].rowNum+=1.6*(this.myVehicle.speed/2-R[i].speed+150*R[i].perspSpeed)*t:R[i].rowNum+=(this.myVehicle.speed-R[i].speed)*t*1;else{if(R[i].rowNum<c){this.vehicleMgr.removeVehicle(i),i-=1,this.vehicleMgr.addBehindTheVehicle();continue}R[i].tempInc=(R[i].rowNum-c)/(this.segNum-c),R[i].perspSpeed=R[i].tempInc*Math.pow(R[i].tempInc,5)+0,this.myVehicle.speed/2>R[i].speed?R[i].rowNum+=1.6*(this.myVehicle.speed/2-R[i].speed+150*R[i].perspSpeed)*t:R[i].rowNum+=1.6*(this.myVehicle.speed/2-R[i].speed-150*R[i].perspSpeed)*t}if(null!=P){var B=P.getPosition();if(R[i].x=B.x+P.width*R[i].sideMultiplier-P.width/2,R[i].y=B.y,R[i].scale=(P.width-30)*this.roadScaleMultiplier/1e3*.75,R[i].road=this,R[i].scale>.03){R[i].active=!0,R[i].zIndex=3999-Math.floor(B.y);for(var G=0;G<this.vehicleAiMgr.aVehicleAis.length;G++){(F=this.vehicleAiMgr.aVehicleAis[G]).lane==R[i].lane&&R[i].rowNum<F.rowNum&&F.rowNum-R[i].rowNum<10&&(F.speed=0,cc.log("onHasAiCrashed 1",F.lane,F.rowNum,R[i].rowNum))}}else R[i].active=!1;if(R[i].rowNum>this.segNum+100)this.vehicleMgr.removeVehicle(i),i-=1;else if(R[i].rowNum>=this.segNum)R[i].active=!1;else if(R[i].rowNum>580){B=this.roadNodeList[this.segNum-1].getPosition();R[i].x>-150&&R[i].x<150?(this.hasCrashed(),this.vehicleMgr.removeVehicle(i),i-=1):R[i].x>-300&&R[i].x<300&&!R[i].overtaken?(this.isMatch||this.onMissCar(),R[i].overtaken=!0,this.onAddSpeedUp()):R[i].x>-600&&R[i].x<600&&!R[i].overtaken&&(this.isMatch||(R[i].overtaken=!0,this.onMissCar()))}else R[i].rowNum<0&&(this.vehicleMgr.removeVehicle(i),i-=1)}}}var V=this.node.getComponent("PropsMgr");for(i=0;i<this.vehicleAiMgr.aVehicleAis.length;i++){var F=this.vehicleAiMgr.aVehicleAis[i],x=(P=this.roadNodeList[Math.floor(F.rowNum)],F.rowNum);F.rowNum+=t*(this.myVehicle.speed-F.speed);var I=F.getComponent("VehicleAi");if(x<=this.segNum-5&&F.rowNum>this.segNum-5?this.node.emit("onRankingChange",-1):x>=this.segNum-5&&F.rowNum<this.segNum-5&&(this.node.emit("onRankingChange",1),cc.audioGame.playOvertakeMoto(Math.floor(2*Math.random()))),x>=this.segNum&&x<this.segNum+30&&(P=this.roadNodeList2[Math.floor(x)]),P){B=P.getPosition();F.x=B.x-P.width/2+F.sideMultiplier*P.width,F.y=B.y,F.scale=this.roadScaleMultiplier/1e3*.75*(P.width-30);var E=!1;this.myVehicle.speed>F.speed-.1?(E=!0,1==this.isAiProp&&F.rowNum>480&&F.rowNum<590&&this.onAiDaoJu(F)):(E=!1,1==this.isAiProp&&F.rowNum>430&&F.rowNum<530&&this.onAiDaoJu(F));var _=!1;if(F.rowNum>this.segNum-20&&F.rowNum<this.segNum+100&&F.x>-100&&F.x<100&&(_=!0,cc.log("onHasAiCrashed 6",F.isCrashedIng,E),F.isCrashedIng||(E?(cc.log("onHasAiCrashed 5",F.lane,this.myVehicle.steerEaseX),F.x>30?(this.myVehicle.steerEaseX<0?(F.speed*=.8,I.byMoveLane(F.lane+1),this.moto.showMotoSpark(1)):this.myVehicle.steerEaseX>0&&(F.speed*=.8,I.byMoveLane(F.lane-1),this.moto.showMotoSpark(-1)),cc.audioGame.playCrash(0),this.node.emit("onHitVehicle"),this.myVehicle.hasAiCrashed(1),this.sceneData.isNewGuidelines&&3==this.gameGuidelines._shoWIndex&&(this.onTouchEndRight(),this.gameGuidelines.setTakeState(1),this.vehicleAiMgr.aVehicleAis[0].lane=4,this.vehicleAiMgr.aVehicleAis[0].rowNum=520,this.vehicleAiMgr.aVehicleAis[0].speed=2*this.myVehicle.speed,this.gameGuidelines.show(4))):F.x<-30?(this.myVehicle.steerEaseX<0?(F.speed*=.8,I.byMoveLane(F.lane+1),this.moto.showMotoSpark(1)):this.myVehicle.steerEaseX>0&&(F.speed*=.8,I.byMoveLane(F.lane-1),this.moto.showMotoSpark(-1)),cc.audioGame.playCrash(0),this.node.emit("onHitVehicle"),this.myVehicle.hasAiCrashed(-1),this.sceneData.isNewGuidelines&&3==this.gameGuidelines._shoWIndex&&(this.onTouchEndRight(),this.vehicleAiMgr.aVehicleAis[0].lane=4,this.vehicleAiMgr.aVehicleAis[0].rowNum=520,this.vehicleAiMgr.aVehicleAis[0].speed=2*this.myVehicle.speed,this.gameGuidelines.show(4))):this.myVehicle.hasAiCrashed(0)):(F.speed*=.5,F.speed>this.myVehicle.speed&&(F.speed=.7*this.myVehicle.speed),cc.log("onHasAiCrashed 4",F.lane)))),F.scale>.03){I.enterView(),F.zIndex=3999-Math.floor(B.y);for(var U=V.props,O=0;O<U.length;O++){var j=U[O];if(F.lane==j.lane&&Math.abs(F.rowNum-j.rowNum)<10)switch(j.id){case"nail":case"oil":case"banana":I.onDaoju(j.id),V.removeVehicle(O),O-=1}}for(O=0;O<this.vehicleAiMgr.aVehicleAis.length;O++)if(O!=i){j=this.vehicleAiMgr.aVehicleAis[O];F.lane==j.lane&&F.speed-j.speed>0&&j.rowNum<F.rowNum&&Math.abs(F.rowNum-j.rowNum)<10&&F.rowNum>j.rowNum&&(_=!0,F.speed=.5*j.speed,cc.log("onHasAiCrashed 2",F.lane))}}else I.outView();F.isCrashedIng=_}else I.outView()}this.updateDaoju(),this.sky.zIndex=601,this.carNode.zIndex=4e3,this.motoNode.zIndex=4e3,this.daojuAinm.zIndex=4e3},hasCrashed:function(){this.myVehicle.speed*=0,this.myVehicle.hasCrashed(0),this.showCrash(),cc.audioGame.playCrash(0)},showCrash:function(){this.node.emit("crash"),this.moto.showCrash()},showSpark:function(e){this.moto.showMotoSpark(e),this.moto.showCrash()},onSpeedUp:function(e){this.myVehicle.onSpeedUp(e)},onSpeedUpOver:function(){this.node.emit("onSpeedUpOver")},onAddSpeedUp:function(){cc.audioGame.playOvertakeCar(Math.floor(2*Math.random())),this.node.emit("onAddSpeedUp")},onMissCar:function(){this.node.emit("onMissCar")},onDaoJu:function(e,t){this.daojuAinm.getComponent(cc.Sprite).spriteFrame=e;var i=null,s=null;if("smoke"==t){for(var a=0;a<this.vehicleAiMgr.aVehicleAis.length;a++){var o=this.vehicleAiMgr.aVehicleAis[a];(null==i||o.rowNum<i)&&(i=o.rowNum,s=o)}if(s&&(s.rowNum<300||s.rowNum>600))s.getComponent("VehicleAi").onDaoju(t),s=null}else{i=300;for(a=0;a<this.vehicleAiMgr.aVehicleAis.length;a++){(o=this.vehicleAiMgr.aVehicleAis[a]).rowNum<600&&o.rowNum>300&&600-o.rowNum<i&&(i=600-o.rowNum,s=o)}}if(s){this.daojuAinm.active=!0,this.daojuAinm.rowNum=this.segNum-20;var n=this.roadNodeList[this.daojuAinm.rowNum];this.daojuAinm.heightS=20,this.daojuAinm.y=n.y+n.height*this.daojuAinm.heightS,this.daojuAinm.x=0,this.daojuAinm.scale=(n.width-30)*this.roadScaleMultiplier/1e3/2,this.daojuAinm.target=s;var h=cc.delayTime(.5);h.setTag("DaoJu");var c=cc.easeIn(3);return h.update=function(e){var i=c.easing(e);this.node.sideMultiplier=this._sideMultiplier+(this.toSideMultiplier-this._sideMultiplier)*i;var s=Math.floor(this.daojuAinm.rowNum+(this.daojuAinm.target.rowNum-this.daojuAinm.rowNum)*i),a=s<600?this.roadNodeList[s]:s<630?this.roadNodeList2[s]:null;if(this.daojuAinm.heightS=this.daojuAinm.heightS+(2-this.daojuAinm.heightS)*i,a&&(this.daojuAinm.y=a.y+a.height*this.daojuAinm.heightS,this.daojuAinm.scale=(a.width-30)*this.roadScaleMultiplier/1e3/2),this.daojuAinm.x=this.daojuAinm.x+(this.daojuAinm.target.x-this.daojuAinm.x)*i,this.daojuAinm.angle+=-10,1==e){this.daojuAinm.active=!1;var o=this.daojuAinm.target.getComponent("VehicleAi");cc.audioGame.playBeThrown(),o.onDaoju(t)}}.bind(this),this.daojuAinm.stopActionByTag("DaoJu"),this.daojuAinm.runAction(h),!0}return!1},onDaoJuBehind:function(e){for(var t=null,i=null,s=0;s<this.vehicleAiMgr.aVehicleAis.length;s++){var a=this.vehicleAiMgr.aVehicleAis[s];a.rowNum>600&&(null==t||a.rowNum-600<t)&&(t=a.rowNum-600,i=a)}if(i){var o=i.getComponent("VehicleAi");cc.audioGame.playBeThrown(),o.onDaoju(e)}},onAiDaoJu:function(e){if((!this.sceneData.isAmusement||0!=this.sceneData.amusementType&&2!=this.sceneData.amusementType&&3!=this.sceneData.amusementType)&&2!=this.isAiProp&&this.aiProps.length>0){this.isAiProp=2;var t=this.aiProps[0].id;if(this.aiProps.splice(0,1),this.scheduleOnce(function(){this.isAiProp=0}.bind(this),6),this.node.emit("onAiDaoju"),this.daojuAinmPool&&this.daojuAinmPool.size()>0)var i=this.daojuAinmPool.get();else i=cc.instantiate(this.daojuAinm);this.node.addChild(i,1e4),i.getComponent(cc.Sprite).spriteFrame=this.daojuIconSpriteFrame[t],i.active=!0,i.rowNum=e?Math.floor(e.rowNum):610;var s=i.rowNum<600?this.roadNodeList[i.rowNum]:i.rowNum<630?this.roadNodeList2[i.rowNum]:null;i.heightS=20,i.y=s.y+s.height*i.heightS,i.x=e?e.x:50+150*Math.random()+250*(Math.floor(2*Math.random())-1),i.scale=(s.width-30)*this.roadScaleMultiplier/1e3/2,i.target={rowNum:this.segNum-20,x:0};var a=e?(this.segNum-e.rowNum)/100+.5:1.5,o=cc.delayTime(a);o.setTag("DaoJu");var n=cc.easeIn(3);o.update=function(e){var s=n.easing(e);this.node.sideMultiplier=this._sideMultiplier+(this.toSideMultiplier-this._sideMultiplier)*s;var a=Math.floor(i.rowNum+(i.target.rowNum-i.rowNum)*s),o=a<600?this.roadNodeList[a]:a<630?this.roadNodeList2[a]:null;i.heightS=i.heightS+(2-i.heightS)*s,o&&(i.y=o.y+o.height*i.heightS,i.scale=(o.width-30)*this.roadScaleMultiplier/1e3/2),i.x=i.x+(i.target.x-i.x)*s,1==e&&(this.daojuAinmPool.put(i),"smoke"==t?this.onSmoke():this.myVehicle.onDaoju(t,this.curve))}.bind(this),i.stopActionByTag("DaoJu"),i.runAction(o)}},onSmoke:function(){this.smogProp&&this.node.removeChild(this.smogProp),this.smogProp=cc.instantiate(this.smokePrefab),cc.audioGame.playSmog(),this.node.addChild(this.smogProp,9999)},updateDaoju:function(){}});var c=360;cc._RF.pop()},{Car:"Car",ChanneConfig:void 0,GameComponent:"GameComponent",GameDataCenter:void 0,Loading:void 0,devices:void 0}],SceneryMgr:[function(e,t,i){"use strict";cc._RF.push(t,"31d7cT1Cd5BFayMZJCpRRYK","SceneryMgr");var s=e("Scenery"),a=e("GameDataCenter").getInstance(),o=(new Array("#3d5460","#0d4699","#93a7d4","#456aa1","#134183","#134183"),new Array("#bd8854","#c79156","#145010","#fd992f","#ffffff","#ffffff"),e("GameComponent"));cc.Class({extends:o,properties:{sceneryPool:cc.NodePool,bollardPool:cc.NodePool,graphicsNode:cc.Node,newLineNode:cc.Node,sunNode:cc.Node,skyNode:cc.Node,groundColor:cc.Node,groundBottomNode:cc.Node},onLoad:function(){var e=cc.loading.getCustomData().level;this.levelData=cc.gameConfig.guankaData[e],cc.loading.getCustomData().isMatch?this.bgType=cc.loading.getCustomData().rankMap:this.bgType=this.levelData.bgType,this.bgType=this.bgType<0?this.node.getComponent("Road").bgType:this.bgType,this.gameData=a.gameData,this.sceneryId=cc.gameConfig.guankaScenery[this.bgType].res,this.sceneryId,cc.loading.loadRes("game/scenery/"+this.sceneryId+"/sky",cc.SpriteFrame,function(e,t){this.skyNode.getComponent(cc.Sprite).spriteFrame=t}.bind(this)),this.sceneryPool=new cc.NodePool,this.bollardPool=new cc.NodePool,this.road=this.node.getComponent("Road"),this.sceneryInc=0,this.sceneryEndInc=0,this.sceneryDir=0,this.aScenery=new Array,this.graphics=this.graphicsNode.getComponent(cc.Graphics),this.graphicsNode.zIndex=2999,this.newLine=this.newLineNode.getComponent(cc.Graphics),this.newLineNode.zIndex=2999,this.sunNode.x=1800*Math.random()-900,this.sunNode.zIndex=4999,this.sceneryPools={},cc.loading.loadResDir("game/scenery/"+this.sceneryId,cc.Prefab,function(e,t){cc.log("game/scenery/prairie = ",t);var i=this.sceneryPrefabs={};t.map(function(e){i[e.name]=e})}.bind(this)),this.sceneryOrder=cc.gameConfig.guankaScenery[this.bgType].scenery,this.sceneryGuidepost=cc.gameConfig.guankaScenery[this.bgType].sceneryGuidepost,this.bollardType=cc.gameConfig.guankaScenery[this.bgType].bollardType,this.groundColours=cc.gameConfig.guankaScenery[this.bgType].groundColours,this.bollardColours=cc.gameConfig.guankaScenery[this.bgType].bollardColours,this.bollardColor=(new cc.Color).fromHEX(this.bollardColours),this.groundColor.color=(new cc.Color).fromHEX(this.groundColours),this.groundBottomNode.color=(new cc.Color).fromHEX(this.groundColours),this.sceneryOrderIndex=0,this.sceneryOrderLeft=0,this.sceneryOrderRight=0,this.sceneryInterval=cc.gameConfig.guankaScenery[this.bgType].interval||5.7},start:function(){for(var e=0;e<30;e++)this.sceneryInc++,this.addScenery(30,e);this.sceneryEnd=!1},addScenery:function(e,t){this.sceneryDir++;var i,s=0;this.sceneryDir%2==1?((null==this.sceneryOrderLeftIndex||this.sceneryOrderLeftIndex>=this.sceneryOrder[this.sceneryOrderLeft].resId.length)&&(this.sceneryOrderLeft=Math.floor(Math.random()*this.sceneryOrder.length),this.sceneryOrderLeftIndex=0),s=this.sceneryId+"_"+this.sceneryOrder[this.sceneryOrderLeft].resId[this.sceneryOrderLeftIndex],this.sceneryOrderLeftIndex++):((null==this.sceneryOrderRightIndex||this.sceneryOrderRightIndex>=this.sceneryOrder[this.sceneryOrderRight].resId.length)&&(this.sceneryOrderRight=Math.floor(Math.random()*this.sceneryOrder.length),this.sceneryOrderRightIndex=0),s=this.sceneryId+"_"+this.sceneryOrder[this.sceneryOrderRight].resId[this.sceneryOrderRightIndex],this.sceneryOrderRightIndex++),this.sceneryGuidepost&&this.sceneryGuidepost.map(function(e){this.sceneryDir%e.interval==0&&this.addGuidepostScenery(e.orderType,this.sceneryId+"_"+e.sceneryType)}.bind(this)),this.sceneryPools[s]&&this.sceneryPools[s].size()>0?i=this.sceneryPools[s].get():((i=cc.instantiate(this.sceneryPrefabs[s])).y=this.road.horizon,i.addComponent("SceneryNew"));var a=i.getComponent("SceneryNew");if(a.rowNum=360,a.scale=.01,i.scale=.01,a.orderType=this.sceneryDir%2,1==a.orderType?(a.sceneryType=s,a.sideMultiplier=.2):0==a.orderType?(a.sceneryType=s,a.sideMultiplier=-.2):a.sceneryType="0",e&&(a.rowNum=(this.road.segNum-360)/e*(e-1-t)+360),this.node.addChild(i,601),-1!=this.bollardType){var o;this.bollardPool.size()>0?(o=this.bollardPool.get()).removeComponent("Bollard"):((o=new cc.Node).addComponent(cc.Sprite),o.y=this.road.horizon);var n=o.addComponent("Bollard");n.bollardType=this.sceneryId,n.orderType=this.sceneryDir%2,e&&(n.rowNum=(this.road.segNum-360)/e*(e-1-t)+360),this.node.addChild(o,601)}this.aScenery.push({scenery:a,bollard:n})},addGuidepostScenery:function(e,t){var i;this.sceneryPools[t]&&this.sceneryPools[t].size()>0?i=this.sceneryPools[t].get():((i=cc.instantiate(this.sceneryPrefabs[t])).y=this.road.horizon,i.addComponent("SceneryNew"));var s=i.getComponent("SceneryNew");s.rowNum=360,s.scale=.01,i.scale=.01,s.orderType=e,s.sceneryType=t,1==s.orderType?s.sideMultiplier=.45:0==s.orderType?s.sideMultiplier=-.45:s.sideMultiplier=0,this.node.addChild(i,601),this.aScenery.push({scenery:s})},addEndScenery:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";this.sceneryPool.size()>0?(e=this.sceneryPool.get()).removeComponent(s):((e=new cc.Node).addComponent(cc.Sprite),e.y=this.road.horizon);var i=e.addComponent(s);i.orderType=3,i.sceneryType=t;this.node.addChild(e,601),this.aScenery.push({scenery:i})},update:function(e){var t=e;this.sceneryInc+=2*this.road.myVehicle.speed/3*t*.6,this.sceneryInc>this.sceneryInterval&&(this.sceneryInc=0,this.addScenery()),(1-a.gameData.dist)*this.levelData.raceDist<.3&&(this.sceneryEndInc+=2*this.road.myVehicle.speed/3*t*.6,this.sceneryEndInc>50&&(this.sceneryEndInc=0,this.gameData.raceDist-this.gameData.dist*this.gameData.raceDist<.1&&!this.sceneryEnd?(this.addEndScenery("0"),this.sceneryEnd=!0):this.addEndScenery())),this.graphics.clear(),this.graphics.fillColor=this.bollardColor;for(var i,s,o,n,h,c,r=this.aScenery.length-1;r>=0;r--){if(-1!=this.bollardType)var d=this.aScenery[r].bollard;var l=this.aScenery[r].scenery,m=this.road.roadNodeList[Math.floor(l.rowNum)];if(m){l.y=m.y,l.x=m.x+l.sideMultiplier*m.width,l.scale=(m.width-50)/(this.road.roadPieceWidth/2-20);var u=(l.rowNum-360)/(this.road.segNum-360),p=u*Math.pow(u,5);-1!=this.bollardType&&d&&(d.y=m.y,d.bollardX=m.x+d.bollardSideMultiplier*m.width,d.scale=(m.width-50)/Math.floor(this.road.roadPieceWidth/1.5)),l.node.scaleY<-.04||l.node.scaleY>.04?(-1!=this.bollardType&&d&&(0==d.orderType?s&&(this.graphics.moveTo(s,o+20*i),this.graphics.lineTo(d.bollardX,d.y+20*d.scale),this.graphics.lineTo(d.bollardX,d.y+15*d.scale),this.graphics.lineTo(s,o+15*i),this.graphics.fill()):1==d.orderType&&h&&(this.graphics.moveTo(h,c+20*n),this.graphics.lineTo(d.bollardX,d.y+20*d.scale),this.graphics.lineTo(d.bollardX,d.y+15*d.scale),this.graphics.lineTo(h,c+15*n),this.graphics.fill()),0==d.orderType?(s=d.bollardX,o=d.y,i=d.scale):1==d.orderType&&(h=d.bollardX,c=d.y,n=d.scale)),l.active=!0):l.active=!1,this.road.myVehicle.speed>0&&(l.rowNum+=(this.road.myVehicle.speed+150*p)*t*.6,-1!=this.bollardType&&d&&(d.rowNum+=(this.road.myVehicle.speed+150*p)*t*.6))}else this.aScenery.splice(r,1),this.sceneryPools[l.sceneryType]=this.sceneryPools[l.sceneryType]||new cc.NodePool,this.sceneryPools[l.sceneryType].put(l.node),-1!=this.bollardType&&d&&(this.bollardPool.put(d.node),d.node.parent=null),l.node.parent=null}}}),cc._RF.pop()},{GameComponent:"GameComponent",GameDataCenter:void 0,Scenery:"Scenery"}],SceneryNew:[function(e,t,i){"use strict";cc._RF.push(t,"2106a/k1ClOuoMEOu9m6RZh","SceneryNew");var s=e("GameComponent");cc.Class({extends:s,properties:{orderType:0,rowNum:360,scale:.01,sceneryType:0,sideMultiplier:.5},onLoad:function(){},start:function(){},update:function(e){this.node.x=this.x,this.node.y=this.y,this.node.zIndex=1999-Math.floor(this.node.y),this.node.scaleY=this.scale,0==this.orderType?this.node.scaleX=this.scale:this.node.scaleX=-this.scale},onDestroy:function(){}}),cc._RF.pop()},{GameComponent:"GameComponent"}],Scenery:[function(e,t,i){"use strict";cc._RF.push(t,"bfd314l/h9A9rXmf2Fik6NV","Scenery");var s=e("GameComponent");cc.Class({extends:s,properties:{orderType:0,rowNum:360,scale:.01,sceneryType:0},onLoad:function(){if(this.node.anchorY=0,this.shadowOffsetY=0,3==this.orderType)switch(this.sceneryType){case"0":this.id="bridge1",this.offsetX=0,this.sideMultiplier=0,this.node.anchorX=.5,this.offsetScale=1.7;break;case"1":this.id="bridge2",this.offsetX=0,this.sideMultiplier=0,this.node.anchorX=.5,this.offsetScale=1.7}var e=this.node.getComponent(cc.Sprite);e.spriteFrame=null,this.loadResUrl="game/scenery/"+this.id,cc.loading.loadRes(this.loadResUrl,cc.SpriteFrame,function(t,i){this.node.isValid&&(this.scenerySpriteFrame=i,e.spriteFrame=this.scenerySpriteFrame)}.bind(this))},start:function(){},update:function(e){if(this.scenerySpriteFrame){var t=this.scenerySpriteFrame.getRect().width;this.scenerySpriteFrame.getRect().height;this.node.x=this.x+this.scale*this.offsetScale*this.offsetX*t,this.node.y=this.y,this.node.zIndex=1999-Math.floor(this.node.y),this.node.scaleY=this.scale*this.offsetScale,this.node.scaleX=this.scale*this.offsetScale}},onDestroy:function(){}}),cc._RF.pop()},{GameComponent:"GameComponent"}],ScoreRanking:[function(e,t,i){"use strict";cc._RF.push(t,"2e313eEjw9P9bvZhET9jLO8","ScoreRanking");var s=r(e("buttonConfig")),a=r(e("share")),o=r(e("videoAd")),n=r(e("statistics")),h=r(e("ChanneConfig")),c=r(e("banner"));function r(e){return e&&e.__esModule?e:{default:e}}var d=e("GameDataCenter").getInstance(),l=h.default.channelId,m=0;function u(e){cc.log("time",e);var t=Math.floor(e/6e4%60).toString(),i=Math.floor(e%6e4/1e3).toString(),s=Math.floor(e/36e5).toString();return s.length<2&&(s="0"+s),t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),s+":"+t+":"+i}cc.Class({extends:cc.Component,properties:{coinLabel:cc.Label,timeLabel:cc.Label,getAeardPrefab:cc.Prefab,totalRanking:cc.Prefab,getAeardButton:cc.Button,getAeardButtonVideo:cc.SpriteFrame,rankNode:cc.Node,levelRank:cc.Prefab,turnplatePrefab:cc.Prefab,checkinPrefab:cc.Prefab,allRaking:cc.Node},onLoad:function(){cc.eventCenter.on("total_coins_change",this.onTotalCoinsChange,this),this.getAeardButton.node.active=!1,this.timeLabel.node.active=!1},onTotalCoinsChange:function(e){this.coinLabel.string=e},setData:function(e){this.levelData=e},start:function(){if(this.coinLabel.string=d.totalCoins,5==l){this.time=(new Date).getTime();var e=cc.instantiate(this.levelRank);e.getComponent("GameOverRanking").level=cc.loading.getCustomData().level,this.rankNode.addChild(e),this.allRaking.active=!1}else 0==!l&&(this.allRaking.active=!1);if(this.schedule(this.timeCall,1),this.timeCall(),m++,cc.log("openIndex2 = ",m),1==m){if(0!=function(e){var t=(new Date).setHours(0,0,0,0)-new Date(e).setHours(0,0,0,0);return parseInt(t/864e5)}(d.lastCheckinDate)){var t=cc.instantiate(this.checkinPrefab);this.node.addChild(t)}}else if(m%2==0&&(cc.log("openIndex2 = ",m),s.default.isShow("zhuanpanmianfeichoujiang"))){cc.log("openIndex3 = ",m);var i=cc.instantiate(this.turnplatePrefab);i.getComponent("turnplateScene").setbuttonType(2),this.node.addChild(i)}n.default.setSceneEvent("","adshow",7,{pos:"jiesuanpaihang"})},timeCall:function(){var e=new Date,t=new Date;e.getHours()<12?(t.setTime(this.time),t.setHours(12),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),this.timeLabel.string=""):12==e.getHours()?(t.setTime(this.time),t.setHours(13),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),this.timeLabel.string=cc.gameConfig.gameString.limit_time+u(t.getTime()-this.time)):e.getHours()<20?(t.setTime(this.time),t.setHours(20),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),this.timeLabel.string=""):20==e.getHours()?(t.setTime(this.time),t.setHours(21),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),this.timeLabel.string=cc.gameConfig.gameString.limit_time+u(t.getTime()-this.time)):e.getHours()<=23&&(t.setTime(this.time+864e5),t.setHours(12),t.setMinutes(0),t.setSeconds(0),this.timeLabel.string=""),this.time+=1e3},onBack:function(){cc.loading.loadScene("MainScene",{cmd:"showMap",level:cc.loading.getCustomData().level+1})},onUpgrade:function(){cc.audioComponent.pauseMusic(),cc.loading.loadScene("ShopScene",{type:0}),n.default.setSceneEvent("\u901a\u5173\u6210\u529f","\u70b9\u51fb","\u751f\u6daf\u6311\u6218-\u7ed3\u7b97-\u5347\u7ea7\u8d5b\u8f66")},onNext:function(){cc.loading.loadScene("MainScene",{cmd:"showMap",level:cc.loading.getCustomData().level+1}),s.default.isSceneOpen("bannerAdPos")&&c.default.setBannerAdPos(-20)},onAgain:function(){var e=cc.loading.getCustomData();cc.loading.loadScene("GameScene",e,!0),s.default.isSceneOpen("bannerAdPos")&&c.default.setBannerAdPos(-20)},onGetAward:function(){n.default.setSceneEvent("\u7ed3\u7b97\u6392\u884c","\u70b9\u51fb","\u9650\u65f6\u5956\u52b1");var e=function(){if(s.default.getState("bisaipaiming",1),!this._isGetAward){this._isGetAward=!0,this.getAeardButton.interactable=!1;var e,t=new Date,i=this.levelData.timeAward[0];if(this.levelData.timeAward.length>0){for(var a=0,o=0;o<this.levelData.timeAward.length;o++)a+=this.levelData.timeAward[o].probability;var n=a*Math.random();a=0;for(o=0;o<this.levelData.timeAward.length;o++)if(n<(a+=this.levelData.timeAward[o].probability)){i=this.levelData.timeAward[o];break}}e=12==t.getHours()||20==t.getHours()?{id:i.timeAwardId,count:i.timeAwardNum}:{id:i.awardId,count:i.awardNum};var h=cc.instantiate(this.getAeardPrefab);h.getComponent("GetAward").setData(e.id,e.count),this.node.addChild(h),this.getAeardButton.getComponent(cc.Animation).stop()}}.bind(this),t=function(){}.bind(this);"share"==s.default.getState("bisaipaiming",0)?a.default.shareToSociety({shareType:1,buttonKey:"bisaipaiming"},e,t):o.default.show("bisaipaiming",e,t)},onTotalRanking:function(){cc.log("\u70b9\u51fb\u5f39\u51fa\u5b8c\u6574\u6392\u884c\u699c");var e=cc.instantiate(this.totalRanking);this.node.addChild(e),e.on("onClose",function(){0},this)},onShare:function(){cc.audioComponent.play("button"),n.default.setSceneEvent("\u901a\u5173\u6210\u529f","\u70b9\u51fb","\u751f\u6daf\u6311\u6218-\u7ed3\u7b97-\u770b\u8c01\u66f4\u5feb"),console.log("\u5206\u4eab\u770b\u8c01\u66f4\u5feb")}}),cc._RF.pop()},{ChanneConfig:void 0,GameDataCenter:void 0,banner:void 0,buttonConfig:void 0,share:void 0,statistics:void 0,videoAd:void 0}],TimeDown:[function(e,t,i){"use strict";cc._RF.push(t,"e2639m7HMFHNb0Q7rhChtj8","TimeDown"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},onPlayAudio:function(e){cc.audioGame.playDen(e)}}),cc._RF.pop()},{}],VehicleAiMgr:[function(e,t,i){"use strict";cc._RF.push(t,"1c3ecVrYJlBBb7d7A9zNcH/","VehicleAiMgr");var s=function(e){return e&&e.__esModule?e:{default:e}}(e("athletics"));e("VehicleAi");var a=e("VehicleNewAi"),o=e("VehicleMatchAi"),n=e("VehicleMatchVirtualAi"),h=e("VirtualGuidelinesAi"),c=e("Moto"),r=e("Car"),d=e("GameDataCenter").getInstance(),l=new Array(.15,.38,.62,.85),m=e("GameComponent");cc.Class({extends:m,properties:{vehiclePrefab:cc.Prefab},onLoad:function(){this.road=this.node.getComponent("Road"),this.aVehicleAis=new Array,this.levelData=cc.loading.getCustomData(),this.level=this.levelData.level,this.isAddAi=cc.gameConfig.guankaData[this.level].isAi,this.motoFrames={},this.levelData.isNewGuidelines?this.addNewGuidelinesVehicleAi():this.levelData.isMatch?this.addMatchVehicleAiNew():this.levelData.isAmusement?1==this.levelData.amusementType&&this.addAmusementVehicleAi():this.isAddAi&&this.addVehicleAi()},start:function(){},update:function(e){for(var t=new Array,i=0;i<this.aVehicleAis.length;i++)t[i]=this.aVehicleAis[i].getComponent("VehicleAi");this.node.emit("VehicleAiPos",t)},addAmusementVehicleAi:function(){for(var e=0;e<7;e++){var t=Math.floor(4*Math.random()),i=cc.instantiate(this.vehiclePrefab),s=i.getComponent("Vehicle");s.isBoss=!1,i.road=this.road,s.farmeURL="moto1",s.prefabUrl="game/vehicle/moto",s.prefabType="Moto",c.loadRes(s.farmeURL,this.motoFrames),i.on("onReachEnd",function(e){this.node.emit("onReachEnd",e)},this);var o=i.addComponent(a);i.rowNum=579-50*e,o.dist=50*e/3e3/d.gameData.raceDist,o.targetPoint=e>1&&e<=4?1/e:0,o.initAmusementData(o.targetPoint),this.node.addChild(i,601),i.sideMultiplier=l[t]+.06*Math.random()-.03,i.lane=t,i.speed=0,this.aVehicleAis.push(i),s.id=e,o.id=e,this.node.emit("onRankingChange",1),i.on("onDistDaoju",this.onDistDaoju,this)}},addVehicleAi:function(){var e=cc.gameConfig.guankaData[this.level];if(null!=e.ais)for(var t=0;t<e.ais.length;t++){var i=e.ais[t],s=cc.gameConfig.vehicleAIData[i.aiId],o=-1==i.lane?Math.floor(4*Math.random()):i.lane,n=cc.instantiate(this.vehiclePrefab),h=n.getComponent("Vehicle");h.isBoss=s.isBoss,n.road=this.road,h.farmeURL=s.farmeURL,"Moto"==s.prefabType?(h.prefabUrl="game/vehicle/moto",h.prefabType="Moto",c.loadRes(s.farmeURL,this.motoFrames)):"Car"==s.prefabType&&(h.prefabUrl="game/vehicle/car",h.prefabType="Car",r.loadRes(s.farmeURL,this.motoFrames)),n.on("onReachEnd",function(e){this.node.emit("onReachEnd",e)},this);var m=n.addComponent(a);n.rowNum=579-50*t,m.dist=50*t/3e3/d.gameData.raceDist,m.initData(i.aiId),this.node.addChild(n,601),n.sideMultiplier=l[o]+.06*Math.random()-.03,n.lane=o,n.speed=0,this.aVehicleAis.push(n),h.id=t,m.id=t,this.node.emit("onRankingChange",1),n.on("onDistDaoju",this.onDistDaoju,this)}},addMatchVehicleAi:function(){var e="Moto",t="moto15",i=!0,a=120,h=100,d=500,m=.5,p=cc.instantiate(this.vehiclePrefab),g=p.getComponent("Vehicle");g.isBoss=!1,p.road=this.road;var f,v=s.default.player2.bike.id;v=(v=v<0?0:v)>=u.length?u.length-1:v,cc.log("bike = ",v),g.farmeURL="moto"+u[v],"Moto"==e?(g.prefabUrl="game/vehicle/moto",g.prefabType="Moto",c.loadRes(t,this.motoFrames)):"Car"==e&&(g.prefabUrl="game/vehicle/car",g.prefabType="Car",r.loadRes(t,this.motoFrames)),p.on("onReachEnd",function(e){this.node.emit("onReachEnd",e)},this),p.on("onMatchEnd",function(){this.node.emit("onMatchEnd")},this),f=s.default.player2.bike.isAi?p.addComponent(n):p.addComponent(o),p.rowNum=590,f.dist=0,f.isBoss=i,f.maxSpeed=a,f.minSpeed=h,f.overTime=d,f.targetDist=m,this.node.addChild(p,601),p.sideMultiplier=l[2],p.lane=2,p.speed=0,this.aVehicleAis.push(p),g.id=0,f.id=0,this.node.emit("onRankingChange",1),p.on("onDistDaoju",this.onDistDaoju,this)},addNewGuidelinesVehicleAi:function(){var e,t="Moto",i="moto1",s=120,a=100,o=500,n=.5,d=cc.instantiate(this.vehiclePrefab),m=d.getComponent("Vehicle");m.isBoss=!1,d.road=this.road,m.farmeURL="moto1","Moto"==t?(m.prefabUrl="game/vehicle/moto",m.prefabType="Moto",c.loadRes(i,this.motoFrames)):"Car"==t&&(m.prefabUrl="game/vehicle/car",m.prefabType="Car",r.loadRes(i,this.motoFrames)),d.on("onReachEnd",function(e){this.node.emit("onReachEnd",e)},this),d.on("onMatchEnd",function(){this.node.emit("onMatchEnd")},this),e=d.addComponent(h),d.rowNum=520,e.dist=0,e.isBoss=!1,e.maxSpeed=s,e.minSpeed=a,e.overTime=o,e.targetDist=n,this.node.addChild(d,601),d.sideMultiplier=l[1],d.lane=1,d.speed=0,this.aVehicleAis.push(d),m.id=0,e.id=0,this.node.emit("onRankingChange",1),d.on("onDistDaoju",this.onDistDaoju,this)},addMatchVehicleAiNew:function(){for(var e=0;e<s.default.players.length;e++){var t=e+1+d.totalMatchNum+"";t=t>210?Math.floor(210*Math.random())+1+"":t+"";var i=cc.gameConfig.vehicleAIData[t],o=Math.floor(4*Math.random()),n=cc.instantiate(this.vehiclePrefab),h=n.getComponent("Vehicle");h.isBoss=!1,n.road=this.road;var m=s.default.players[e].bike.id;m=(m=m<0?0:m)>=u.length?u.length-1:m,cc.log("bike = ",m),h.farmeURL="moto"+u[m],"Moto"==i.prefabType?(h.prefabUrl="game/vehicle/moto",h.prefabType="Moto",c.loadRes(i.farmeURL,this.motoFrames)):"Car"==i.prefabType&&(h.prefabUrl="game/vehicle/car",h.prefabType="Car",r.loadRes(i.farmeURL,this.motoFrames)),n.on("onReachEnd",function(e){this.node.emit("onReachEnd",e)},this);var p=n.addComponent(a);n.rowNum=579-50*e,p.dist=50*e/3e3/d.gameData.raceDist,p.initData(t),p.isBoss=!1,this.node.addChild(n,601),n.sideMultiplier=l[o]+.06*Math.random()-.03,n.lane=o,n.speed=0,this.aVehicleAis.push(n),h.id=e,p.id=e,this.node.emit("onRankingChange",1),n.on("onDistDaoju",this.onDistDaoju,this)}this.scheduleOnce(this.onPrepare,.5+Math.random())},onPrepare:function(){s.default.onBegin()},onDestroy:function(){},onDistDaoju:function(e,t){this.node.emit("onDistDaoju",e,t)}});var u=[1,1,4,5,1,4,5,1,1,4,5,1,1,4,5,4,5,1,5];cc._RF.pop()},{Car:"Car",GameComponent:"GameComponent",GameDataCenter:void 0,Moto:"Moto",VehicleAi:"VehicleAi",VehicleMatchAi:"VehicleMatchAi",VehicleMatchVirtualAi:"VehicleMatchVirtualAi",VehicleNewAi:"VehicleNewAi",VirtualGuidelinesAi:"VirtualGuidelinesAi",athletics:void 0}],VehicleAi:[function(e,t,i){"use strict";cc._RF.push(t,"c6d67f9G3NLtoelI+m7LOdd","VehicleAi");var s=e("GameDataCenter").getInstance(),a=e("GameComponent"),o=new Array(.15,.38,.62,.85);o[.5]=.26,o[1.5]=.5,o[2.5]=.73,cc.Class({extends:a,properties:{maxSpeed:150,minSpeed:105,accRate:.5,speed:0,isAccelerating:!0,isMoveLane:!1,curTime:0,overTime:5900,dist:0,targetDist:0,targetPoint:0,isCrashedIng:!1},onLoad:function(){this.vehicle=this.getComponent("Vehicle"),this.gameData=s.gameData,this.isNotAi=!1},start:function(){},outView:function(){this.vehicle.vehicleNode&&(this.vehicle.vehicleNode.active=!1)},enterView:function(){this.vehicle.vehicleNode&&(this.vehicle.vehicleNode.active=!0)},initData:function(e){if(cc.loading.getCustomData().isAmusement){var t=this.node.road;i=cc.gameConfig.vehicleAIData[e];this.isBoss=!1,this.maxSpeed=t.myVehicle.maxSpeed,this.minSpeed=t.myVehicle.minSpeed,this.overTime=i.overTime,this.targetDist=i.targetDist}else{var i=cc.gameConfig.vehicleAIData[e];this.isBoss=i.isBoss,this.maxSpeed=i.maxSpeed,this.minSpeed=i.minSpeed,this.overTime=i.overTime,this.targetDist=i.targetDist}},updateSpeed:function(e){this.curTime=Math.max(Math.round(this.curTime+100*e),0),this.speed=this.node.speed,this.dist<1?this.isCrashedIng||(this.isAccelerating?this.speed-=(this.speed-this.maxSpeed)*(this.accRate*e):this.speed-=(this.speed-this.minSpeed)*(this.accRate*e)):(this.speed-=30*e,this.speed=this.speed<0?0:this.speed)},updateIsAccelerating:function(){this.isMoveLane||this.targetDist-this.dist<0&&this.overTime-this.curTime>this.gameData.raceDist*(1-this.dist)/this.speed*18e4/60*100?this.isAccelerating=!1:this.isAccelerating=!0},updateDist:function(e){this.dist<1?this.dist+=this.speed/this.gameData.raceDist/18e4*(60*e):this.dist>1&&(this.node.emit("onReachEnd",this),this.dist=1)},overTakePlayerDist:function(){var e=this.node.road;this.node.rowNum<550?this.speed=.6*this.minSpeed:this.node.rowNum<590&&e.myVehicle.speed>this.maxSpeed?this.speed=this.maxSpeed:this.node.rowNum>=605&&(this.speed=1.2*this.maxSpeed),this.gameData.dist<this.targetPoint&&(this.speed=1.2*this.maxSpeed)},update:function(e){if(this.gameData.gameStart){this.isStart||(this.isStart=!0,this.node.speed=this.minSpeed);var t=e;this.updateSpeed(t),this.updateDist(t),cc.loading.getCustomData().isAmusement&&this.overTakePlayerDist(),this.updateIsAccelerating();var i=this.node.road;this.node.speed=this.speed,this.vehicleMgr=i.node.getComponent("VehicleMgr");var s=!1,a=null;if(this.isCrashedIng||this.isNotAi||(a=this.isMove(this.node.lane))>0&&(s=!0),s){var o=this.getMoveLane(a);o&&this.moveLane(o)}var n=0;this.toSideMultiplier-this.node.sideMultiplier>0?n=.6:this.toSideMultiplier-this.node.sideMultiplier<0&&(n=-.6),this.vehicle.vehicle&&this.vehicle.vehicle.setSteerX(i.curve+n)}},getMoveLane:function(e){var t=this.node.lane,i=t;if(t<1)for(;i<3;){if(i++,null==(n=this.isMove(i))){t=i;break}n>e&&(t=i,e=n)}else if(t>2)for(;i>0;){if(i--,null==(n=this.isMove(i))){t=i;break}n>e&&(t=i,e=n)}else for(var s=Math.random()>.5?1:-1,a=[s,-s,2*s,2*-s],o=0;o<a.length;o++)if(!(i+a[o]>3||i+a[o]<0)){var n;if(null==(n=this.isMove(i+a[o]))){t=i+a[o];break}n>e&&(t=i+a[o],e=n)}return t==this.node.lane?null:t},isMove:function(e){if(!this.isMoveLane){var t=this.isMoveForPlayer(e,null);return t=this.isMoveForVehicle(e,t),t=this.isMoveForVehicleAi(e,t),t=this.isMoveForProps(e,t)}},isMoveForVehicle:function(e,t){var i=this.node.road,s=i.node.getComponent("VehicleMgr").aVehicleLanes[e];if(s)for(var a=0;a<s.length;a++){var o=s[a],n=o.rowNum-360,h=1*(n/=i.segNum-360)*Math.pow(n,5)+0;if(i.myVehicle.speed/2>o.speed)var c=this.node.speed-1.6*(i.myVehicle.speed/2-o.speed+150*h);else c=this.node.speed-1.6*(i.myVehicle.speed/2-o.speed-150*h);if(c>0&&o.rowNum<this.node.rowNum){var r=(this.node.rowNum-o.rowNum-10)/c;r<1.5&&(null==t||r<t)&&(t=r)}}return t},isMoveForVehicleAi:function(e,t){for(var i=this.node.road.node.getComponent("VehicleAiMgr").aVehicleAis,s=0;s<i.length;s++){var a=i[s];if(e==a.lane&&this.node.speed-a.speed>0&&a.rowNum<this.node.rowNum){var o=this.node.rowNum-a.rowNum-10,n=this.node.speed-a.speed,h=o/n;h<1.5&&(null==t||h<t)&&(t=h)}}return t},isMoveForProps:function(e,t){var i=this.node.road.node.getComponent("PropsMgr").propsLanes[e];if(i)for(var s=0;s<i.length;s++){var a=i[s];if(this.node.speed-a.speed>0&&a.rowNum<this.node.rowNum){var o=(this.node.rowNum-a.rowNum-10)/(this.node.speed-a.speed);o<1.5&&(null==t||o<t)&&(t=o)}}return t},isMoveForPlayer:function(e,t){var i=this.node.road;if(this.node.rowNum>600&&this.node.speed>i.myVehicle.speed&&i.myVehicle.lane==e){var s=(this.node.rowNum-580)/(this.node.speed-i.myVehicle.speed);s<1.5&&(null==t||s<t)&&(t=s)}return t},onSliding:function(e){if(this.slidingIndex=1,this.isMoveLane)if(this.toSideMultiplier-this._sideMultiplier>0){var t=this.node.lane+2;this.byMoveLane(t)}else{t=this.node.lane-2;this.byMoveLane(t)}else if(e>0){t=this.node.lane+1;this.byMoveLane(t)}else if(e<0){t=this.node.lane-1;this.byMoveLane(t)}},runMoveLane:function(e,t){this.isMoveLane=!0,this.toSideMultiplier=e;var i=1.3;Math.abs(this.node.sideMultiplier-e)<=.13&&(i=1.3);var s=cc.delayTime(i);this._sideMultiplier=this.node.sideMultiplier,s.setTag("moveLane"),this.side=0,s.update=function(e){var i=t.easing(e);this.easeX=(i-this.side)*(this.toSideMultiplier-this._sideMultiplier)*3e5,this.side=i,this.node.sideMultiplier=this._sideMultiplier+(this.toSideMultiplier-this._sideMultiplier)*i,1==e&&(this.isMoveLane=!1,this.side=0,this.node.sideMultiplier<.05?(this.node.speed=0,this.moveLane(0)):this.node.sideMultiplier>.95&&(this.node.speed=0,this.moveLane(3)))}.bind(this),this.node.stopActionByTag("moveLane"),this.node.runAction(s)},moveLane:function(e){var t=0;e<0?(e=0,t=0):e>3?(e=3,t=1):t=o[e],this.node.emit("onMoveLane",this.node,this.node.lane,e),this.node.lane=e,this.runMoveLane(t,cc.easeInOut(3))},byMoveLane:function(e){var t=0;e<0?(e=0,t=0):e>3?(e=3,t=1):t=o[e],this.node.emit("onMoveLane",this.node,this.node.lane,e),this.node.lane=e,this.runMoveLane(t,cc.easeOut(3))},onDaoju:function(e){switch(e){case"nail":this.vehicle.vehicle.onYun(1),this.node.speed-=.5*this.node.speed,cc.audioGame.playProps(e);break;case"oil":this.vehicle.vehicle.onYun(1.5),this.onSliding(this.node.road.curve),cc.audioGame.playAiProps();break;case"banana":this.vehicle.vehicle.onYun(1),this.node.speed-=.3*this.node.speed,this.isNotAi=!0,cc.audioGame.playProps(e),this.scheduleOnce(function(){this.isNotAi=!1},1);break;case"smoke":this.vehicle.vehicle.onYun(2),this.isNotAi=!0,this.scheduleOnce(function(){this.isNotAi=!1},3);break;case"bar":this.vehicle.vehicle.onYun(2),this.node.speed-=.6*this.node.speed,this.isNotAi=!0,cc.audioGame.playProps(e),this.scheduleOnce(function(){this.isNotAi=!1},2)}this.node.emit("onDistDaoju",this,e)}}),cc._RF.pop()},{GameComponent:"GameComponent",GameDataCenter:void 0}],VehicleCarAi:[function(e,t,i){"use strict";cc._RF.push(t,"47fceDC2ypG4o9gJBKfAoP8","VehicleCarAi");e("GameDataCenter").getInstance();var s=e("VehicleAi");cc.Class({extends:s,properties:{},isMove:function(e){if(!this.isMoveLane){var t=this.isMoveForVehicle(e,null);return t=this.isMoveForVehicleAi(e,t)}},isMoveForVehicle:function(e,t){var i=this.node.road.node.getComponent("VehicleMgr").aVehicleLanes[e];if(i)for(var s=0;s<i.length;s++){var a=i[s],o=this.node.speed-a.speed;if(o>0&&a.rowNum<this.node.rowNum){var n=(this.node.rowNum-a.rowNum-10)/o;n<1.5&&(null==t||n<t)&&(t=n)}}return t}}),cc._RF.pop()},{GameDataCenter:void 0,VehicleAi:"VehicleAi"}],VehicleMatchAi:[function(e,t,i){"use strict";cc._RF.push(t,"9c61d4O2pZGrpE5E37XY+u8","VehicleMatchAi");var s=function(e){return e&&e.__esModule?e:{default:e}}(e("athletics"));var a=e("GameDataCenter").getInstance(),o=e("VehicleAi");cc.Class({extends:o,properties:{},start:function(){this.isAi=s.default.player2.bike.isAi,this.udSpeed=1,this.maxSpeed=s.default.player2.bike.maxSpeed,this.minSpeed=s.default.player2.bike.maxSpeed,this.accRate=s.default.player2.bike.accRate,this.targetDist=0,this.updateDistDelta=0,this.beyondDist=0,this.beyondEndDist=0,this.isEnd=!1,s.default.on("onUpdateDist",this.onUpdateDist.bind(this)),s.default.on("onEnd",this.onEnd.bind(this))},updateSpeed:function(e){this.curTime=Math.max(Math.round(this.curTime+100*e),0),this.speed=this.node.speed,this.beyondEndDist>0&&this.beyondDist>this.beyondEndDist?(this.speed-=30*e,this.speed=this.speed<0?0:this.speed):this.isCrashedIng||(this.speed-=(this.speed-this.maxSpeed*this.udSpeed)*(this.accRate*e))},updateIsAccelerating:function(){if(this.isEnd)if(this.isWin){var e=this.node.road;this.maxSpeed=Math.max(this.maxSpeed,e.myVehicle.maxSpeed),this.maxSpeed=Math.max(this.maxSpeed,e.myVehicle.speed),this.accRate=Math.max(this.accRate,e.myVehicle.accRate),this.node.rowNum>575?this.udSpeed=2:this.udSpeed=1.2}else{e=this.node.road;this.maxSpeed=Math.min(this.maxSpeed,e.myVehicle.maxSpeed),this.maxSpeed=Math.min(this.maxSpeed,e.myVehicle.speed),this.accRate=Math.min(this.accRate,e.myVehicle.accRate),this.node.rowNum<575?this.udSpeed=.5:this.udSpeed=.8}else{var t=this.targetDist*a.gameData.raceDist-a.gameData.raceDist*this.dist;this.udSpeed=t>.6?2:t>.3?1.5:t>.1?1.2:t>0?1.05:t<-.6?.2:t<-.2?.5:t<.1?.8:t<0?.95:1}},updateDist:function(e){this.dist<1?this.dist+=this.speed/this.gameData.raceDist/18e4*(60*e):this.dist>1?this.dist=1:this.beyondDist+=this.speed/this.gameData.raceDist/18e4*(60*e),this.isEnd&&(this.isWin?this.node.rowNum<575&&this.dist>=1&&(0==this.beyondEndDist&&(this.beyondEndDist=this.beyondDist+.204/this.gameData.raceDist),this.node.emit("onMatchEnd")):this.node.rowNum>590&&(0==this.beyondEndDist&&(this.beyondEndDist=this.beyondDist+.204/this.gameData.raceDist),this.node.emit("onMatchEnd")))},onUpdateDist:function(e){this.targetDist=e;var t=this.targetDist*a.gameData.raceDist-a.gameData.raceDist*this.dist;cc.log("correction = ",t)},onEnd:function(e){this.isEnd=!0,this.isWin=e}}),cc._RF.pop()},{GameDataCenter:void 0,VehicleAi:"VehicleAi",athletics:void 0}],VehicleMatchVirtualAi:[function(e,t,i){"use strict";cc._RF.push(t,"f3806HxGg9J6pJopFsgfb57","VehicleMatchVirtualAi");var s=function(e){return e&&e.__esModule?e:{default:e}}(e("athletics"));e("GameDataCenter").getInstance();var a=e("VehicleAi");cc.Class({extends:a,properties:{},start:function(){this.isAi=s.default.player2.bike.isAi,this.isWin=Math.random()>.7,this.beyondDist=0,this.beyondEndDist=0,this.udSpeed=1,this.maxSpeed=this.node.road.myVehicle.maxSpeed+5+5*Math.random(),this.minSpeed=this.node.road.myVehicle.maxSpeed-5-5*Math.random(),this.accRate=this.node.road.myVehicle.accRate-.3*this.node.road.myVehicle.accRate+Math.random()*this.node.road.myVehicle.accRate*.3,this.scheduleOnce(this.onPrepare,.5+Math.random()),s.default.on("onEnd",this.onEnd.bind(this)),this.isEnd=!1},updateSpeed:function(e){this.curTime=Math.max(Math.round(this.curTime+100*e),0),this.speed=this.node.speed,this.beyondEndDist>0&&this.beyondDist>this.beyondEndDist?(this.speed-=30*e,this.speed=this.speed<0?0:this.speed):this.isCrashedIng||(this.isAccelerating&&!this.isMoveLane?this.speed-=(this.speed-this.maxSpeed*this.udSpeed)*(this.accRate*e):this.speed-=(this.speed-this.minSpeed)*(this.accRate*e))},updateIsAccelerating:function(){this.node.rowNum<450?(this.isAccelerating=!1,this.udSpeed=1):(this.node.rowNum>700||this.isWin&&this.dist>.8)&&(this.isAccelerating=!0),this.node.rowNum>720?this.udSpeed=1.2:this.node.rowNum<600&&(this.udSpeed=1)},onPrepare:function(){s.default.onBegin()},updateDist:function(e){this.dist<1?this.dist+=this.speed/this.gameData.raceDist/18e4*(60*e):this.dist>1?(s.default.endAi(),this.beyondEndDist=this.beyondDist+.204/this.gameData.raceDist,this.dist=1):this.beyondDist+=this.speed/this.gameData.raceDist/18e4*(60*e),this.isEnd&&this.node.emit("onMatchEnd")},onEnd:function(){this.isEnd||(this.isEnd=!0)}}),cc._RF.pop()},{GameDataCenter:void 0,VehicleAi:"VehicleAi",athletics:void 0}],VehicleMgr:[function(e,t,i){"use strict";cc._RF.push(t,"5ba5aeWR0dC3adRmXMpzYIO","VehicleMgr");var s=new Array(.15,.38,.62,.85),a=(e("Vehicle"),e("MyVehicle")),o=e("GameDataCenter").getInstance(),n=e("GameComponent"),h=e("VehicleCarAi");cc.Class({extends:n,properties:{vehiclePool:cc.NodePool,myVehicle:a,vehiclePrefab:cc.Prefab,carNode:cc.Node},onLoad:function(){this.road=this.node.getComponent("Road"),this.aVehicles=new Array,this.aVehicleLanes=new Array;for(var e=0;e<4;e++){var t=new Array;this.aVehicleLanes.push(t)}this.vehiclePool=new cc.NodePool},initData:function(e){if(this.vehicleDataList=new Array,this.sceneData=cc.loading.getCustomData(),this.sceneData.isAmusement&&0==this.sceneData.amusementType)this.isBonusLevel=!0;else if(!this.sceneData.isMatch&&!this.sceneData.isAmusement)for(var t=e.levelTask[e.levelTask.length-1].type,i=0;i<t.length;i++)if(5==parseInt(t[i])){this.isBonusLevel=!0;break}var s=e.vehicle[e.vehicle.length-1];return this.vehicleMaxNums=s.carNum,this.vehicleSpeed=s.speed,this.vehicleCount=0,this.vehicleDataList},start:function(){this.vehicleRate=0,this.vehicleRelease=0,this.dist=0,this.oldDist=0},update:function(e){if(o.gameData.gameStart&&!this.sceneData.isNewGuidelines&&1!=this.sceneData.rankMap&&(!this.sceneData.isAmusement||2!=this.sceneData.amusementType&&3!=this.sceneData.amusementType)){var t=e;if(this.aVehicles.length<10||this.road.myVehicle.speed>40?this.dist+=o.gameData.dist-this.oldDist:this.road.myVehicle.speed<=40&&(this.dist+=(this.road.myVehicle.speed-40)/o.gameData.raceDist/18e4*(60*t)),this.oldDist=o.gameData.dist,this.sceneData.isNewGuidelines)for(var i=0;i<this.vehicleDataList.length;i++){var s=this.vehicleDataList[i];this.dist>s.dist&&(this.vehicleDataList.splice(i,1),i--,this.addVehicle(s))}else if(this.vehicleCount<=this.vehicleMaxNums&&(1*Math.random()<.3||this.isBonusLevel&&1*Math.random()<.5)){if(!this.isBonusLevel)for(i=0;i<this.road.propsMgr.propDataList.length;i++){s=this.road.propsMgr.propDataList[i];if(o.gameData.dist+.2>s.dist&&1*Math.random()<.5)return}this.vehicleRate+=this.myVehicle.speed*t,this.vehicleRate>=this.vehicleRelease&&(this.addVehicle(),this.vehicleRelease=130*Math.random(),this.vehicleRate=0)}}},addVehicle:function(e){if(this.sceneData.isNewGuidelines){var t=360;if((r=-1==e.lane?Math.floor(4*Math.random()):e.lane)<0||r>3)return;for(var i=!1,a=0;!i;){if(a>3)return;i=!0;for(var o=0;o<this.aVehicleLanes[r].length;o++)if(this.aVehicleLanes[r][o].rowNum<t+25&&this.aVehicleLanes[r][o].rowNum>t-25){i=!1,r=Math.floor(4*Math.random()),a++;break}}var n=null,c=cc.gameConfig.vehicleData[e.vehicleId];return this.vehiclePool.size()>0?n=this.vehiclePool.get():(n=cc.instantiate(this.vehiclePrefab)).addComponent(h),n.overtaken=!1,(d=n.getComponent(h)).dist=0,d.isBoss=!1,d.maxSpeed=40,d.minSpeed=40,d.overTime=1,d.targetDist=1,d.accRate=.3,n.farmeURL=c.farmeURL,(l=n.getComponent("Vehicle")).farmeURL=c.farmeURL,"Moto"==c.prefabType?(l.prefabUrl="game/vehicle/moto",l.prefabType="Moto"):"Car"==c.prefabType&&(l.prefabUrl="game/vehicle/car",l.prefabType="Car"),n.rowNum=t,n.active=!1,this.node.addChild(n,this.carNode.getSiblingIndex()-1),n.sideMultiplier=s[r]+.06*Math.random()-.03,n.lane=r,this.aVehicleLanes[r].push(n),this.addVehicleCount=this.addVehicleCount||0,this.addVehicleCount++,40<this.road.myVehicle.speed||this.addVehicleCount,n.speed=40,n.speed=n.speed<0?0:n.speed,n.speed=n.speed/2,this.aVehicles.push(n),n.on("onMoveLane",this.onMoveLane,this),n}if(this.vehicleCount++,void 0===(t=e)&&(t=360),this.aVehicles.length<10){var r;if((r=Math.floor(4*Math.random()))<0||r>3)return;for(i=!1,a=0;!i;){if(a>3)return;i=!0;for(o=0;o<this.aVehicleLanes[r].length;o++)if(this.aVehicleLanes[r][o].rowNum<t+25&&this.aVehicleLanes[r][o].rowNum>t-25){i=!1,r=Math.floor(4*Math.random()),a++;break}}n=null;var d,l,m=Math.floor(3*Math.random())+1+"";c=cc.gameConfig.vehicleData[m];return this.vehiclePool.size()>0?n=this.vehiclePool.get():(n=cc.instantiate(this.vehiclePrefab)).addComponent(h),n.overtaken=!1,(d=n.getComponent(h)).dist=0,d.isBoss=!1,d.maxSpeed=this.vehicleSpeed,d.minSpeed=this.vehicleSpeed,d.overTime=1,d.targetDist=1,d.accRate=.3,(l=n.getComponent("Vehicle")).farmeURL=c.farmeURL,"Moto"==c.prefabType?(l.prefabUrl="game/vehicle/moto",l.prefabType="Moto"):"Car"==c.prefabType&&(l.prefabUrl="game/vehicle/car",l.prefabType="Car"),n.rowNum=t,n.active=!1,this.node.addChild(n,this.carNode.getSiblingIndex()-1),n.sideMultiplier=s[r]+.06*Math.random()-.03,n.lane=r,this.aVehicleLanes[r].push(n),this.addVehicleCount=this.addVehicleCount||0,this.addVehicleCount++,40<this.road.myVehicle.speed||this.addVehicleCount,n.speed=40,n.speed=n.speed<0?0:n.speed,n.speed=n.speed/2,this.aVehicles.push(n),n.on("onMoveLane",this.onMoveLane,this),n}},addBehindTheVehicle:function(){var e=this.vehiclePool.get();if(e){e.rowNum=650,e.active=!1,this.node.addChild(e,this.carNode.getSiblingIndex()-1);var t=e.lane;if(t==this.road.myVehicle.lane){t>1?t-=1:t+=1;for(var i=!1,a=0;!i;){if(a>3)return;i=!0;for(var o=0;o<this.aVehicleLanes[t].length;o++)if(this.aVehicleLanes[t][o].rowNum<e.rowNum+25&&this.aVehicleLanes[t][o].rowNum>e.rowNum-25){i=!1,t=Math.floor(4*Math.random()),a++;break}}}e.speed=40,e.sideMultiplier=s[t]+.06*Math.random()-.03,cc.log("vehicle.sideMultiplier = ",e.sideMultiplier),e.lane=t,this.aVehicleLanes[t].push(e),this.aVehicles.push(e)}},removeVehicle:function(e){for(var t=this.aVehicles[e],i=0;i<this.aVehicleLanes[t.lane].length;i++)this.aVehicleLanes[t.lane][i]==t&&this.aVehicleLanes[t.lane].splice(i,1);this.vehiclePool.put(t),this.aVehicles.splice(e,1)},onMoveLane:function(e,t,i){cc.log("onMoveLane",t,i);for(var s=0;s<this.aVehicleLanes[t].length;s++)this.aVehicleLanes[t][s]==e&&(this.aVehicleLanes[t].splice(s,1),s--);this.aVehicleLanes[i].push(e)}}),cc._RF.pop()},{GameComponent:"GameComponent",GameDataCenter:void 0,MyVehicle:"MyVehicle",Vehicle:"Vehicle",VehicleCarAi:"VehicleCarAi"}],VehicleNewAi:[function(e,t,i){"use strict";cc._RF.push(t,"d4242Mi7/pL4LyU+eebqGJs","VehicleNewAi");var s=e("GameDataCenter").getInstance(),a=e("VehicleAi");cc.Class({extends:a,properties:{},start:function(){this.udSpeed=1,this.maxSpeed=this.node.road.myVehicle.maxSpeed+5+5*Math.random(),this.minSpeed=this.node.road.myVehicle.maxSpeed-5-5*Math.random(),this.startTime=0},initData:function(e){var t=cc.gameConfig.vehicleAIData[e];this.isBoss=t.isBoss,this.maxSpeed=t.maxSpeed,this.minSpeed=t.minSpeed,this.overTime=t.overTime,this.targetDist=t.targetDist,this.accRate=t.accRate,this.expectSpeed=t.expectSpeed,this.distSpeeds=new Array;for(var i=0;i<t.distSpeeds.length;i++)this.distSpeeds[i]=parseInt(t.distSpeeds[i]);this.targetDists=new Array,this.targetTimes=new Array;var a=0,o=0;for(i=0;i<t.targetDists.length;i++)this.targetDists[i]=parseFloat(t.targetDists[i]),this.targetTimes[i]=o+s.gameData.raceDist*(this.targetDists[i]-a)/this.distSpeeds[i]*18e4/60*100,a=this.targetDists[i],o=this.targetTimes[i];this.distSpeed=this.distSpeeds[0]},initAmusementData:function(e){var t=cc.loading.getCustomData().amusementType,i=7*s._userGameData.amusementCountArr[t].win+1,a=cc.gameConfig.vehicleAIData[i],o=s.getCurBikeAndUpgradeData();this.isBoss=a.isBoss,this.maxSpeed=o.maxSpeed,this.minSpeed=o.minSpeed,this.overTime=a.overTime,this.targetDist=a.targetDist,this.accRate=o.accRate,this.expectSpeed=a.expectSpeed,this.distSpeeds=new Array;for(var n=0;n<a.distSpeeds.length;n++)this.distSpeeds[n]=parseInt(a.distSpeeds[n]);this.targetDists=new Array,this.targetTimes=new Array;var h=0,c=0;for(n=0;n<a.targetDists.length;n++)this.targetDists[n]=parseFloat(a.targetDists[n]),this.targetTimes[n]=c+s.gameData.raceDist*(this.targetDists[n]-h)/this.distSpeeds[n]*18e4/60*100,h=this.targetDists[n],c=this.targetTimes[n];this.distSpeed=this.distSpeeds[0]},updateSpeed:function(e){0==this.startTime&&this.speed>this.distSpeed-1&&(this.startTime=this.curTime-this.gameData.raceDist*this.dist/this.speed*18e4/60*10),this.curTime=Math.max(Math.round(this.curTime+100*e),0),this.speed=this.node.speed,this.dist<1?this.isCrashedIng||(this.speed-=(this.speed-this.distSpeed)*(this.accRate*e)):(this.speed-=30*e,this.speed=this.speed<0?0:this.speed)},updateIsAccelerating:function(){for(var e=0,t=0;t<this.targetDists.length&&(e=t,!(this.targetDists[t]>this.dist));t++);if(this.distSpeed=this.distSpeeds[e],this.distSpeed==this.expectSpeed)this.node.rowNum<450?this.distSpeed=this.minSpeed:this.node.rowNum<600&&this.distSpeed>this.maxSpeed?this.distSpeed=this.maxSpeed:this.node.rowNum>700&&(this.node.rowNum>720?this.distSpeed=1.2*this.maxSpeed:this.distSpeed=this.maxSpeed);else if(this.startTime>0&&this.speed>0){var i=this.targetTimes[e]+this.startTime-this.curTime,s=this.gameData.raceDist*(this.targetDists[e]-this.dist)/this.speed*18e4/60*100;i-s<-500?this.distSpeed=1.2*this.distSpeed:i-s>500&&(this.distSpeed=.8*this.distSpeed)}},getMoveLane:function(e){var t=this.node.lane,i=t;if(t%1>0){for(var s=[o=Math.random()>.5?.5:-.5,-o,2*o,2*-o],a=0;a<s.length;a++)if(!(i+s[a]>3||i+s[a]<0)){if(null==(n=this.isMove(i+s[a]))){t=i+s[a];break}n>e&&(t=i+s[a],e=n)}}else if(0==t)i++,null==(n=this.isMove(i))?t=i:t+=.5;else if(3==t){i--,null==(n=this.isMove(i))?t=i:t-=.5}else{var o;for(s=[2*(o=Math.random()>.5?.5:-.5),2*-o,o,-o],a=0;a<s.length;a++){var n;if(null==(n=this.isMove(i+s[a]))){t=i+s[a];break}n>e&&(t=i+s[a],e=n)}}return t==this.node.lane?null:t}}),cc._RF.pop()},{GameDataCenter:void 0,VehicleAi:"VehicleAi"}],Vehicle:[function(e,t,i){"use strict";cc._RF.push(t,"3ee649eozZNp5d0yGhhR9//","Vehicle");var s=e("GameComponent"),a=new Array(.15,.38,.62,.85);a[.5]=.26,a[1.5]=.5,a[2.5]=.73,cc.Class({extends:s,statics:{oLaneSpeeds:{}},properties:{farmeURL:"car2",prefabUrl:"car/car",prefabType:"Car",isMoveLane:!1},onLoad:function(){cc.loading.loadRes(this.prefabUrl,cc.Prefab,function(e,t){this.vehicleNode=cc.instantiate(t),this.vehicle=this.vehicleNode.getComponent(this.prefabType),this.vehicle.setFarmeURL(this.farmeURL),this.vehicle.isBoss=this.isBoss,this.node.addChild(this.vehicleNode),this.vehicleNode.x=0,this.vehicleNode.y=53}.bind(this))},start:function(){this.x=0,this.y=0,this.overtaken=!1,this.typeId="vehicle",this.id=1,this.hasWhooshed=!1,this.offsetY=-13},update:function(e){var t=this.node.road,i=(t.steerX-t.steerXcentre)/135,s=this.node.x/400,a=(t.segNum-Math.min(this.node.rowNum,t.segNum))*t.curve/-25;this.frame=Math.min(Math.max(Math.round(30*(1-this.node.sideMultiplier)-a-i-s),0),30),this.vehicle&&(this.vehicle.setFrame(this.frame),this.vehicle.setSteerX(t.curve));var o=!1,n=null;if(this.isCrashedIng||(n=this.isMove(this.node.lane))>0&&(o=!0),o){var h=this.getMoveLane(n);h&&this.moveLane(h)}},getMoveLane:function(e){var t=this.node.lane,i=t;if(t<1)for(;i<3;){if(i++,null==(n=this.isMove(i))){t=i;break}n>e&&(t=i,e=n)}else if(t>2)for(;i>0;){if(i--,null==(n=this.isMove(i))){t=i;break}n>e&&(t=i,e=n)}else for(var s=Math.random()>.5?1:-1,a=[s,-s,2*s,2*-s],o=0;o<a.length;o++)if(!(i+a[o]>3||i+a[o]<0)){var n;if(null==(n=this.isMove(i+a[o]))){t=i+a[o];break}n>e&&(t=i+a[o],e=n)}return t==this.node.lane?null:t},isMove:function(e){if(!this.isMoveLane){var t=t=this.isMoveForProps(e,t);return t}},isMoveForProps:function(e,t){var i=this.node.road.node.getComponent("PropsMgr").propsLanes[e];if(i)for(var s=0;s<i.length;s++){var a=i[s];if(this.node.speed-a.speed>0&&a.rowNum<this.node.rowNum){var o=(this.node.rowNum-a.rowNum-10)/(this.node.speed-a.speed);o<1.5&&(null==t||o<t)&&(t=o)}}return t},moveLane:function(e){var t=0;e<0?(e=0,t=0):e>3?(e=3,t=1):t=a[e],this.node.emit("onMoveLane",this.node,this.node.lane,e),this.node.lane=e,this.runMoveLane(t,cc.easeInOut(3))},runMoveLane:function(e,t){this.isMoveLane=!0,this.toSideMultiplier=e;var i=1.3;Math.abs(this.node.sideMultiplier-e)<=.13&&(i=1.3);var s=cc.delayTime(i);this._sideMultiplier=this.node.sideMultiplier,s.setTag("moveLane"),this.side=0,s.update=function(e){var i=t.easing(e);this.easeX=(i-this.side)*(this.toSideMultiplier-this._sideMultiplier)*3e5,this.side=i,this.node.sideMultiplier=this._sideMultiplier+(this.toSideMultiplier-this._sideMultiplier)*i,1==e&&(this.isMoveLane=!1,this.side=0,this.node.sideMultiplier<.05?(this.node.speed=0,this.moveLane(0)):this.node.sideMultiplier>.95&&(this.node.speed=0,this.moveLane(3)))}.bind(this),this.node.stopActionByTag("moveLane"),this.node.runAction(s)}}),cc._RF.pop()},{GameComponent:"GameComponent"}],VirtualGuidelinesAi:[function(e,t,i){"use strict";cc._RF.push(t,"93ecfuBRrRPKrIeHDNjpSBP","VirtualGuidelinesAi");(function(e){e&&e.__esModule})(e("athletics"));e("GameDataCenter").getInstance();var s=e("VehicleAi");cc.Class({extends:s,properties:{},start:function(){this.beyondDist=0,this.beyondEndDist=0,this.udSpeed=1,this.maxSpeed=this.node.road.myVehicle.maxSpeed,this.minSpeed=this.node.road.myVehicle.maxSpeed,this.accRate=this.node.road.myVehicle.accRate-.3*this.node.road.myVehicle.accRate+Math.random()*this.node.road.myVehicle.accRate*.3},updateSpeed:function(e){this.curTime=Math.max(Math.round(this.curTime+100*e),0),this.speed=this.node.speed,this.beyondEndDist>0&&this.beyondDist>this.beyondEndDist?(this.speed-=30*e,this.speed=this.speed<0?0:this.speed):this.isCrashedIng||(this.isAccelerating&&!this.isMoveLane?this.speed-=(this.speed-this.maxSpeed*this.udSpeed)*(this.accRate*e):this.speed-=(this.speed-this.minSpeed)*(this.accRate*e))},updateIsAccelerating:function(){this.node.rowNum<450?(this.isAccelerating=!1,this.udSpeed=1):(this.node.rowNum>700||this.isWin&&this.dist>.8)&&(this.isAccelerating=!0),this.node.rowNum>720?this.udSpeed=1.2:this.node.rowNum<600&&(this.udSpeed=1),this.udSpeed=1},updateDist:function(e){},onEnd:function(){this.isEnd||(this.isEnd=!0)}}),cc._RF.pop()},{GameDataCenter:void 0,VehicleAi:"VehicleAi",athletics:void 0}],smoke:[function(e,t,i){"use strict";cc._RF.push(t,"f2b7eEVZOdCZ7tQZWIamrDH","smoke"),cc.Class({extends:cc.Component,properties:{props:sp.Skeleton},start:function(){this.props.addAnimation(0,"await1"),this.props.addAnimation(1,"await2",!0),this.props.addAnimation(2,"await3",!1,3),this.props.setEndListener(this.onEnd.bind(this))},onEnd:function(){cc.log("onEnd"),this.node.destroy()}}),cc._RF.pop()},{}]},{},["AmusementScore","AudioGame","Bollard","Car","CoinMgr","CointDown","Dist","DistRankin","FcdbOver","GameComponent","GameData","GameGuidelines","GamePause","GameScene","GameScore","LicenseUp","MatchLos","MatchScore","MatchWin","Moto","MyMoto","MyVehicle","NewMatchLos","NewMatchWin","PropsMgr","PropsTips","Road","Scenery","SceneryMgr","SceneryNew","ScoreRanking","TimeDown","Vehicle","VehicleAi","VehicleAiMgr","VehicleCarAi","VehicleMatchAi","VehicleMatchVirtualAi","VehicleMgr","VehicleNewAi","VirtualGuidelinesAi","smoke","RankSettlement"]);